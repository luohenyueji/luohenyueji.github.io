import{_ as e}from"./plugin-vue_export-helper-x3n3nnut.js";import{r as o,o as c,c as l,a as n,b as s,d as p,e as t}from"./app-MsA2k2kn.js";const i={},u=n("h1",{id:"python-基于matplotlib实现圆环图的绘制",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#python-基于matplotlib实现圆环图的绘制","aria-hidden":"true"},"#"),s(" [python] 基于matplotlib实现圆环图的绘制")],-1),r={href:"https://github.com/luohenyueji/Python-Study-Notes/tree/master/Plot%20Items",target:"_blank",rel:"noopener noreferrer"},k=t(`<div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># 去掉警告</span>
<span class="token keyword">import</span> warnings
warnings<span class="token punctuation">.</span>filterwarnings<span class="token punctuation">(</span><span class="token string">&quot;ignore&quot;</span><span class="token punctuation">)</span>
<span class="token comment"># 多行输出</span>
<span class="token keyword">from</span> IPython<span class="token punctuation">.</span>core<span class="token punctuation">.</span>interactiveshell <span class="token keyword">import</span> InteractiveShell
InteractiveShell<span class="token punctuation">.</span>ast_node_interactivity <span class="token operator">=</span> <span class="token string">&quot;all&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_1-基础圆环图绘制-basic-donut-plot" tabindex="-1"><a class="header-anchor" href="#_1-基础圆环图绘制-basic-donut-plot" aria-hidden="true">#</a> 1 基础圆环图绘制 Basic donut plot</h2><p>下面是使用matplotlib库制作的基本圆环图的实例。这里的诀窍是做一个饼图，在中间加一个白色的圆圈。注意另一个选择是使用半径radius和宽度width参数。</p><p>首先创建一个饼图，如下所示</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># library</span>
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt


<span class="token comment"># ----- 步骤一</span>
 
<span class="token comment"># create data</span>
<span class="token comment"># 创建数据</span>
size_of_groups<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">]</span>
 
<span class="token comment"># 设置等比例轴，x和y轴等比例</span>
plt<span class="token punctuation">.</span>axis<span class="token punctuation">(</span><span class="token string">&#39;equal&#39;</span><span class="token punctuation">)</span> 
<span class="token comment"># Create a pieplot</span>
<span class="token comment"># 创建饼图</span>
plt<span class="token punctuation">.</span>pie<span class="token punctuation">(</span>size_of_groups<span class="token punctuation">)</span><span class="token punctuation">;</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/Python-Study-Notes/Donut/output_4_0.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><p>然后在饼图中间添加一个白色的圆，就能够得到圆环图</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># library</span>
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt


<span class="token comment"># ----- 步骤一</span>
 
<span class="token comment"># create data</span>
<span class="token comment"># 创建数据</span>
size_of_groups<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">]</span>
 
<span class="token comment"># Create a pieplot</span>
<span class="token comment"># 创建饼图</span>
plt<span class="token punctuation">.</span>pie<span class="token punctuation">(</span>size_of_groups<span class="token punctuation">)</span>
<span class="token comment">#plt.show()</span>
 
<span class="token comment"># ----- 步骤二</span>

<span class="token comment"># add a circle at the center</span>
<span class="token comment"># 添加一个圆</span>
my_circle<span class="token operator">=</span>plt<span class="token punctuation">.</span>Circle<span class="token punctuation">(</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0.7</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">&#39;white&#39;</span><span class="token punctuation">)</span>
<span class="token comment"># 获得当前显示的图表，也就是前面画的饼图</span>
p<span class="token operator">=</span>plt<span class="token punctuation">.</span>gcf<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment"># 将两图相加</span>
p<span class="token punctuation">.</span>gca<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>add_artist<span class="token punctuation">(</span>my_circle<span class="token punctuation">)</span>

 
<span class="token comment"># 设置等比例轴，x和y轴等比例</span>
plt<span class="token punctuation">.</span>axis<span class="token punctuation">(</span><span class="token string">&#39;equal&#39;</span><span class="token punctuation">)</span> 
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/Python-Study-Notes/Donut/output_6_0.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><p>上面创建饼图的方式太麻烦，事实上matplotlib可以直接设定pie中wedgeprops参数来实现饼图绘制,wedgeprops中通过width参数设定内部圆的半径，edgecolor设置内部圆的颜色。</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># library</span>
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt


<span class="token comment"># create data</span>
<span class="token comment"># 创建数据</span>
size_of_groups<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">]</span>
 
<span class="token comment"># Create a pieplot</span>
<span class="token comment"># 创建饼图</span>
plt<span class="token punctuation">.</span>pie<span class="token punctuation">(</span>size_of_groups<span class="token punctuation">,</span>wedgeprops<span class="token operator">=</span><span class="token builtin">dict</span><span class="token punctuation">(</span>width<span class="token operator">=</span><span class="token number">0.3</span><span class="token punctuation">,</span> edgecolor<span class="token operator">=</span><span class="token string">&#39;w&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment"># 设置等比例轴，x和y轴等比例</span>
plt<span class="token punctuation">.</span>axis<span class="token punctuation">(</span><span class="token string">&#39;equal&#39;</span><span class="token punctuation">)</span> 
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/Python-Study-Notes/Donut/output_8_0.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><h2 id="_2-自定义圆环图-custom-matplotlib-donut-plot" tabindex="-1"><a class="header-anchor" href="#_2-自定义圆环图-custom-matplotlib-donut-plot" aria-hidden="true">#</a> 2 自定义圆环图 Custom matplotlib donut plot</h2><p>本节旨在描述如何自定义圆环图，包括自定义颜色，标签，这些操作都是通用的。</p><h3 id="_2-1-自定义颜色" tabindex="-1"><a class="header-anchor" href="#_2-1-自定义颜色" aria-hidden="true">#</a> 2.1 自定义颜色</h3><p>通过设置饼图的颜色便能够实现圆环图的颜色自定义</p><p>以下示例设置不同类别的不同颜色来展示圆环图</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># library</span>
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt
 
<span class="token comment"># create data</span>
<span class="token comment"># 创建数据</span>
names<span class="token operator">=</span><span class="token string">&#39;groupA&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;groupB&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;groupC&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;groupD&#39;</span><span class="token punctuation">,</span>
size<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">]</span>
 
<span class="token comment"># Give color names</span>
<span class="token comment"># 画饼图，label设置标签名，colors代表颜色</span>
plt<span class="token punctuation">.</span>pie<span class="token punctuation">(</span>size<span class="token punctuation">,</span> labels<span class="token operator">=</span>names<span class="token punctuation">,</span> colors<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">&#39;red&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;green&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;blue&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;skyblue&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>wedgeprops<span class="token operator">=</span><span class="token builtin">dict</span><span class="token punctuation">(</span>width<span class="token operator">=</span><span class="token number">0.3</span><span class="token punctuation">,</span> edgecolor<span class="token operator">=</span><span class="token string">&#39;w&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
 
<span class="token comment"># 设置等比例轴，x和y轴等比例</span>
plt<span class="token punctuation">.</span>axis<span class="token punctuation">(</span><span class="token string">&#39;equal&#39;</span><span class="token punctuation">)</span> 
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/Python-Study-Notes/Donut/output_12_0.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><p>以下示例设置循环使用颜色来展示圆环图</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># library</span>
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt
 
<span class="token comment"># create data</span>
<span class="token comment"># 创建数据</span>
names<span class="token operator">=</span><span class="token string">&#39;groupA&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;groupB&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;groupC&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;groupD&#39;</span><span class="token punctuation">,</span>
size<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">]</span>
 
<span class="token comment"># Create a circle for the center of the plot</span>
<span class="token comment"># 创建中间白色圆</span>
my_circle<span class="token operator">=</span>plt<span class="token punctuation">.</span>Circle<span class="token punctuation">(</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0.7</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">&#39;white&#39;</span><span class="token punctuation">)</span>

 
<span class="token comment"># Custom colors --&gt; colors will cycle</span>
<span class="token comment"># 自定义颜色，如果颜色长度和数据长度不一致，则会循环使用颜色,即&#39;red&#39;,&#39;green&#39;,&#39;red&#39;,&#39;green&#39;</span>
<span class="token comment"># 但是这种方法必须通过创建中间白色圆实现</span>
plt<span class="token punctuation">.</span>pie<span class="token punctuation">(</span>size<span class="token punctuation">,</span> labels<span class="token operator">=</span>names<span class="token punctuation">,</span> colors<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">&#39;red&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;green&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
p<span class="token operator">=</span>plt<span class="token punctuation">.</span>gcf<span class="token punctuation">(</span><span class="token punctuation">)</span>
 
<span class="token comment"># 设置等比例轴，x和y轴等比例</span>
plt<span class="token punctuation">.</span>axis<span class="token punctuation">(</span><span class="token string">&#39;equal&#39;</span><span class="token punctuation">)</span> 
p<span class="token punctuation">.</span>gca<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>add_artist<span class="token punctuation">(</span>my_circle<span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/Python-Study-Notes/Donut/output_14_0.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure>`,22),d={href:"https://github.com/jiffyclub/palettable",target:"_blank",rel:"noopener noreferrer"},m=t(`<p>通过以下命令安装palettable</p><blockquote><p>pip install palettable</p></blockquote><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># library</span>
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt
 
<span class="token comment"># create data</span>
<span class="token comment"># 创建数据</span>
names<span class="token operator">=</span><span class="token string">&#39;groupA&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;groupB&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;groupC&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;groupD&#39;</span><span class="token punctuation">,</span>
size<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">]</span>
 
<span class="token keyword">from</span> palettable<span class="token punctuation">.</span>colorbrewer<span class="token punctuation">.</span>qualitative <span class="token keyword">import</span> Pastel1_7
plt<span class="token punctuation">.</span>pie<span class="token punctuation">(</span>size<span class="token punctuation">,</span> labels<span class="token operator">=</span>names<span class="token punctuation">,</span> colors<span class="token operator">=</span>Pastel1_7<span class="token punctuation">.</span>hex_colors<span class="token punctuation">,</span>wedgeprops<span class="token operator">=</span><span class="token builtin">dict</span><span class="token punctuation">(</span>width<span class="token operator">=</span><span class="token number">0.3</span><span class="token punctuation">,</span> edgecolor<span class="token operator">=</span><span class="token string">&#39;w&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

 
<span class="token comment"># 设置等比例轴，x和y轴等比例</span>
plt<span class="token punctuation">.</span>axis<span class="token punctuation">(</span><span class="token string">&#39;equal&#39;</span><span class="token punctuation">)</span> 
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/Python-Study-Notes/Donut/output_16_0.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><h3 id="_2-2-自定义标签" tabindex="-1"><a class="header-anchor" href="#_2-2-自定义标签" aria-hidden="true">#</a> 2.2 自定义标签</h3><p>以下示例展示自定义标签的位置</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># library</span>
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt
 
<span class="token comment"># create data</span>
<span class="token comment"># 创建数据</span>
names<span class="token operator">=</span><span class="token string">&#39;groupA&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;groupB&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;groupC&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;groupD&#39;</span><span class="token punctuation">,</span>
size<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">]</span>


<span class="token comment"># Label distance: gives the space between labels and the center of the pie</span>
<span class="token comment"># labeldistance给出标签和饼图中心之间的间距</span>
plt<span class="token punctuation">.</span>pie<span class="token punctuation">(</span>size<span class="token punctuation">,</span> labels<span class="token operator">=</span>names<span class="token punctuation">,</span> labeldistance<span class="token operator">=</span><span class="token number">0.85</span><span class="token punctuation">,</span>wedgeprops<span class="token operator">=</span><span class="token builtin">dict</span><span class="token punctuation">(</span>width<span class="token operator">=</span><span class="token number">0.3</span><span class="token punctuation">,</span> edgecolor<span class="token operator">=</span><span class="token string">&#39;w&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
 
<span class="token comment"># 设置等比例轴，x和y轴等比例</span>
plt<span class="token punctuation">.</span>axis<span class="token punctuation">(</span><span class="token string">&#39;equal&#39;</span><span class="token punctuation">)</span> 
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/Python-Study-Notes/Donut/output_19_0.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><p>以下示例展示自定义标签的颜色</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># library</span>
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt
 
<span class="token comment"># create data</span>
<span class="token comment"># 创建数据</span>
names<span class="token operator">=</span><span class="token string">&#39;groupA&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;groupB&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;groupC&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;groupD&#39;</span><span class="token punctuation">,</span>
size<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">]</span>
 
<span class="token comment"># Label color</span>
<span class="token comment"># 标签颜色</span>
plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">&#39;text.color&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&#39;red&#39;</span>
plt<span class="token punctuation">.</span>pie<span class="token punctuation">(</span>size<span class="token punctuation">,</span> labels<span class="token operator">=</span>names<span class="token punctuation">,</span>wedgeprops<span class="token operator">=</span><span class="token builtin">dict</span><span class="token punctuation">(</span>width<span class="token operator">=</span><span class="token number">0.3</span><span class="token punctuation">,</span> edgecolor<span class="token operator">=</span><span class="token string">&#39;w&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment"># 设置等比例轴，x和y轴等比例</span>
plt<span class="token punctuation">.</span>axis<span class="token punctuation">(</span><span class="token string">&#39;equal&#39;</span><span class="token punctuation">)</span> 
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/Python-Study-Notes/Donut/output_21_0.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><p>对于各个类别边缘大小和颜色可以设置饼图的wedgeprops参数来实现</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># library</span>
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt
 
<span class="token comment"># create data</span>
<span class="token comment"># 创建数据</span>
names<span class="token operator">=</span><span class="token string">&#39;groupA&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;groupB&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;groupC&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;groupD&#39;</span><span class="token punctuation">,</span>
size<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">]</span>
 
<span class="token comment"># Custom wedges</span>
<span class="token comment"># wedgeprops设置各个类别边缘宽度和颜色</span>
plt<span class="token punctuation">.</span>pie<span class="token punctuation">(</span>size<span class="token punctuation">,</span> labels<span class="token operator">=</span>names<span class="token punctuation">,</span> wedgeprops <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token string">&#39;linewidth&#39;</span> <span class="token punctuation">:</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token string">&#39;edgecolor&#39;</span> <span class="token punctuation">:</span> <span class="token string">&#39;white&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;width&#39;</span><span class="token punctuation">:</span><span class="token number">0.3</span><span class="token punctuation">,</span> <span class="token string">&#39;edgecolor&#39;</span><span class="token punctuation">:</span><span class="token string">&#39;w&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
 
<span class="token comment"># 设置等比例轴，x和y轴等比例</span>
plt<span class="token punctuation">.</span>axis<span class="token punctuation">(</span><span class="token string">&#39;equal&#39;</span><span class="token punctuation">)</span> 
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/Python-Study-Notes/Donut/output_23_0.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><h3 id="_2-3-自定义背景颜色" tabindex="-1"><a class="header-anchor" href="#_2-3-自定义背景颜色" aria-hidden="true">#</a> 2.3 自定义背景颜色</h3><p>以下示例展示了如何改变背景颜色</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># library</span>
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt

<span class="token comment"># Data</span>
names<span class="token operator">=</span><span class="token string">&#39;groupA&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;groupB&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;groupC&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;groupD&#39;</span><span class="token punctuation">,</span>
size<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">]</span>

<span class="token comment"># create a figure and set different background</span>
fig <span class="token operator">=</span> plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment"># 设置背景颜色</span>
fig<span class="token punctuation">.</span>patch<span class="token punctuation">.</span>set_facecolor<span class="token punctuation">(</span><span class="token string">&#39;black&#39;</span><span class="token punctuation">)</span>

<span class="token comment"># Change color of text</span>
plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">&#39;text.color&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&#39;white&#39;</span>

<span class="token comment"># Pieplot + circle on it</span>
plt<span class="token punctuation">.</span>pie<span class="token punctuation">(</span>size<span class="token punctuation">,</span> labels<span class="token operator">=</span>names<span class="token punctuation">,</span>wedgeprops<span class="token operator">=</span><span class="token builtin">dict</span><span class="token punctuation">(</span>width<span class="token operator">=</span><span class="token number">0.3</span><span class="token punctuation">,</span> edgecolor<span class="token operator">=</span><span class="token string">&#39;w&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
 
<span class="token comment"># 设置等比例轴，x和y轴等比例</span>
plt<span class="token punctuation">.</span>axis<span class="token punctuation">(</span><span class="token string">&#39;equal&#39;</span><span class="token punctuation">)</span> 
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/Python-Study-Notes/Donut/output_25_0.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><h3 id="_2-4-自定义标记" tabindex="-1"><a class="header-anchor" href="#_2-4-自定义标记" aria-hidden="true">#</a> 2.4 自定义标记</h3><p>以下示例显示引出标记，来自定义圆环图</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># Libraries</span>
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

fig<span class="token punctuation">,</span> ax <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplots<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> subplot_kw<span class="token operator">=</span><span class="token builtin">dict</span><span class="token punctuation">(</span>aspect<span class="token operator">=</span><span class="token string">&quot;equal&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment"># 类别名</span>
recipe <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;225 g flour&quot;</span><span class="token punctuation">,</span>
          <span class="token string">&quot;90 g sugar&quot;</span><span class="token punctuation">,</span>
          <span class="token string">&quot;1 egg&quot;</span><span class="token punctuation">,</span>
          <span class="token string">&quot;60 g butter&quot;</span><span class="token punctuation">,</span>
          <span class="token string">&quot;100 ml milk&quot;</span><span class="token punctuation">,</span>
          <span class="token string">&quot;1/2 package of yeast&quot;</span><span class="token punctuation">]</span>

data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">225</span><span class="token punctuation">,</span> <span class="token number">90</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span>

<span class="token comment"># startangle 设置方向</span>
wedges<span class="token punctuation">,</span> texts <span class="token operator">=</span> ax<span class="token punctuation">.</span>pie<span class="token punctuation">(</span>data<span class="token punctuation">,</span> wedgeprops<span class="token operator">=</span><span class="token builtin">dict</span><span class="token punctuation">(</span>width<span class="token operator">=</span><span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> startangle<span class="token operator">=</span><span class="token operator">-</span><span class="token number">40</span><span class="token punctuation">)</span>

<span class="token comment"># 每一类别说明框</span>
<span class="token comment"># boxstyle框的类型，fc填充颜色,ec边框颜色,lw边框宽度</span>
bbox_props <span class="token operator">=</span> <span class="token builtin">dict</span><span class="token punctuation">(</span>boxstyle<span class="token operator">=</span><span class="token string">&quot;square,pad=0.3&quot;</span><span class="token punctuation">,</span> fc<span class="token operator">=</span><span class="token string">&#39;white&#39;</span><span class="token punctuation">,</span> ec<span class="token operator">=</span><span class="token string">&quot;black&quot;</span><span class="token punctuation">,</span> lw<span class="token operator">=</span><span class="token number">0.72</span><span class="token punctuation">)</span>
<span class="token comment"># 设置框引出方式</span>
kw <span class="token operator">=</span> <span class="token builtin">dict</span><span class="token punctuation">(</span>arrowprops<span class="token operator">=</span><span class="token builtin">dict</span><span class="token punctuation">(</span>arrowstyle<span class="token operator">=</span><span class="token string">&quot;-&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          bbox<span class="token operator">=</span>bbox_props<span class="token punctuation">,</span> zorder<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> va<span class="token operator">=</span><span class="token string">&quot;center&quot;</span><span class="token punctuation">)</span>

<span class="token comment"># 添加标签</span>
<span class="token keyword">for</span> i<span class="token punctuation">,</span> p <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>wedges<span class="token punctuation">)</span><span class="token punctuation">:</span>
    ang <span class="token operator">=</span> <span class="token punctuation">(</span>p<span class="token punctuation">.</span>theta2 <span class="token operator">-</span> p<span class="token punctuation">.</span>theta1<span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2.</span> <span class="token operator">+</span> p<span class="token punctuation">.</span>theta1
    y <span class="token operator">=</span> np<span class="token punctuation">.</span>sin<span class="token punctuation">(</span>np<span class="token punctuation">.</span>deg2rad<span class="token punctuation">(</span>ang<span class="token punctuation">)</span><span class="token punctuation">)</span>
    x <span class="token operator">=</span> np<span class="token punctuation">.</span>cos<span class="token punctuation">(</span>np<span class="token punctuation">.</span>deg2rad<span class="token punctuation">(</span>ang<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token comment"># 设置方向</span>
    horizontalalignment <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">:</span> <span class="token string">&quot;right&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">:</span> <span class="token string">&quot;left&quot;</span><span class="token punctuation">}</span><span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">(</span>np<span class="token punctuation">.</span>sign<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
    connectionstyle <span class="token operator">=</span> <span class="token string">&quot;angle,angleA=0,angleB={}&quot;</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>ang<span class="token punctuation">)</span>
    kw<span class="token punctuation">[</span><span class="token string">&quot;arrowprops&quot;</span><span class="token punctuation">]</span><span class="token punctuation">.</span>update<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;connectionstyle&quot;</span><span class="token punctuation">:</span> connectionstyle<span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token comment"># 设置标注</span>
    ax<span class="token punctuation">.</span>annotate<span class="token punctuation">(</span>recipe<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> xy<span class="token operator">=</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">,</span> xytext<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">1.35</span><span class="token operator">*</span>np<span class="token punctuation">.</span>sign<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1.4</span><span class="token operator">*</span>y<span class="token punctuation">)</span><span class="token punctuation">,</span>
                horizontalalignment<span class="token operator">=</span>horizontalalignment<span class="token punctuation">,</span>color<span class="token operator">=</span><span class="token string">&#39;black&#39;</span><span class="token punctuation">,</span> <span class="token operator">**</span>kw<span class="token punctuation">)</span>

ax<span class="token punctuation">.</span>set_title<span class="token punctuation">(</span><span class="token string">&quot;Matplotlib bakery: A donut&quot;</span><span class="token punctuation">)</span>

plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/Python-Study-Notes/Donut/output_27_0.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><h2 id="_3-多层级圆环图-donut-plot-with-subgroups" tabindex="-1"><a class="header-anchor" href="#_3-多层级圆环图-donut-plot-with-subgroups" aria-hidden="true">#</a> 3 多层级圆环图 Donut plot with subgroups</h2><p>以下示例展示了具有三个类别，每个类别具有多个子类别的圆环图。你可以使用半径和宽度选项来设置2个圆级别的位置。然后，为每个组指定一个调色板。</p><p>首先绘制外圈图形，注意该实例通过setp函数实现在内部添加圆</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># Libraries</span>
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt
 
<span class="token comment"># Make data: I have 3 groups and 7 subgroups</span>
<span class="token comment"># 设置数据</span>
group_names<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">&#39;groupA&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;groupB&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;groupC&#39;</span><span class="token punctuation">]</span>
group_size<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">]</span>
subgroup_names<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">&#39;A.1&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;A.2&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;A.3&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;B.1&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;B.2&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;C.1&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;C.2&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;C.3&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;C.4&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;C.5&#39;</span><span class="token punctuation">]</span>
subgroup_size<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">]</span>
 
<span class="token comment"># Create colors</span>
<span class="token comment"># 设置颜色</span>
a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token operator">=</span><span class="token punctuation">[</span>plt<span class="token punctuation">.</span>cm<span class="token punctuation">.</span>Blues<span class="token punctuation">,</span> plt<span class="token punctuation">.</span>cm<span class="token punctuation">.</span>Reds<span class="token punctuation">,</span> plt<span class="token punctuation">.</span>cm<span class="token punctuation">.</span>Greens<span class="token punctuation">]</span>
 
<span class="token comment"># First Ring (outside)</span>
<span class="token comment"># 外圈</span>
fig<span class="token punctuation">,</span> ax <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplots<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment"># 设置等比例轴，x和y轴等比例</span>
ax<span class="token punctuation">.</span>axis<span class="token punctuation">(</span><span class="token string">&#39;equal&#39;</span><span class="token punctuation">)</span>
<span class="token comment"># 画饼图</span>
mypie<span class="token punctuation">,</span> _ <span class="token operator">=</span> ax<span class="token punctuation">.</span>pie<span class="token punctuation">(</span>group_size<span class="token punctuation">,</span> radius<span class="token operator">=</span><span class="token number">1.3</span><span class="token punctuation">,</span> labels<span class="token operator">=</span>group_names<span class="token punctuation">,</span> colors<span class="token operator">=</span><span class="token punctuation">[</span>a<span class="token punctuation">(</span><span class="token number">0.6</span><span class="token punctuation">)</span><span class="token punctuation">,</span> b<span class="token punctuation">(</span><span class="token number">0.6</span><span class="token punctuation">)</span><span class="token punctuation">,</span> c<span class="token punctuation">(</span><span class="token number">0.6</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>wedgeprops<span class="token operator">=</span><span class="token builtin">dict</span><span class="token punctuation">(</span>width<span class="token operator">=</span><span class="token number">0.3</span><span class="token punctuation">,</span> edgecolor<span class="token operator">=</span><span class="token string">&#39;white&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/Python-Study-Notes/Donut/output_30_0.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><p>然后再画内圈圆，如下所示</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># Libraries</span>
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt
 
<span class="token comment"># Make data: I have 3 groups and 7 subgroups</span>
<span class="token comment"># 设置数据</span>
group_names<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">&#39;groupA&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;groupB&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;groupC&#39;</span><span class="token punctuation">]</span>
group_size<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">]</span>
subgroup_names<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">&#39;A.1&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;A.2&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;A.3&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;B.1&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;B.2&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;C.1&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;C.2&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;C.3&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;C.4&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;C.5&#39;</span><span class="token punctuation">]</span>
subgroup_size<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">]</span>
 
<span class="token comment"># Create colors</span>
<span class="token comment"># 设置颜色</span>
a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token operator">=</span><span class="token punctuation">[</span>plt<span class="token punctuation">.</span>cm<span class="token punctuation">.</span>Blues<span class="token punctuation">,</span> plt<span class="token punctuation">.</span>cm<span class="token punctuation">.</span>Reds<span class="token punctuation">,</span> plt<span class="token punctuation">.</span>cm<span class="token punctuation">.</span>Greens<span class="token punctuation">]</span>
 
<span class="token comment"># First Ring (outside)</span>
<span class="token comment"># 外圈</span>
fig<span class="token punctuation">,</span> ax <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplots<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment"># 设置等比例轴，x和y轴等比例</span>
ax<span class="token punctuation">.</span>axis<span class="token punctuation">(</span><span class="token string">&#39;equal&#39;</span><span class="token punctuation">)</span>
<span class="token comment"># 画饼图</span>
mypie<span class="token punctuation">,</span> _ <span class="token operator">=</span> ax<span class="token punctuation">.</span>pie<span class="token punctuation">(</span>group_size<span class="token punctuation">,</span> radius<span class="token operator">=</span><span class="token number">1.3</span><span class="token punctuation">,</span> labels<span class="token operator">=</span>group_names<span class="token punctuation">,</span> colors<span class="token operator">=</span><span class="token punctuation">[</span>a<span class="token punctuation">(</span><span class="token number">0.6</span><span class="token punctuation">)</span><span class="token punctuation">,</span> b<span class="token punctuation">(</span><span class="token number">0.6</span><span class="token punctuation">)</span><span class="token punctuation">,</span> c<span class="token punctuation">(</span><span class="token number">0.6</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>wedgeprops<span class="token operator">=</span><span class="token builtin">dict</span><span class="token punctuation">(</span>width<span class="token operator">=</span><span class="token number">0.3</span><span class="token punctuation">,</span> edgecolor<span class="token operator">=</span><span class="token string">&#39;white&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># Second Ring (Inside)</span>
<span class="token comment"># 画第二个圆</span>
mypie2<span class="token punctuation">,</span> _ <span class="token operator">=</span> ax<span class="token punctuation">.</span>pie<span class="token punctuation">(</span>subgroup_size<span class="token punctuation">,</span> radius<span class="token operator">=</span><span class="token number">1.3</span><span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span> labels<span class="token operator">=</span>subgroup_names<span class="token punctuation">,</span> labeldistance<span class="token operator">=</span><span class="token number">0.7</span><span class="token punctuation">,</span> colors<span class="token operator">=</span><span class="token punctuation">[</span>a<span class="token punctuation">(</span><span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> a<span class="token punctuation">(</span><span class="token number">0.4</span><span class="token punctuation">)</span><span class="token punctuation">,</span> a<span class="token punctuation">(</span><span class="token number">0.3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> b<span class="token punctuation">(</span><span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> b<span class="token punctuation">(</span><span class="token number">0.4</span><span class="token punctuation">)</span><span class="token punctuation">,</span> c<span class="token punctuation">(</span><span class="token number">0.6</span><span class="token punctuation">)</span><span class="token punctuation">,</span> c<span class="token punctuation">(</span><span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> c<span class="token punctuation">(</span><span class="token number">0.4</span><span class="token punctuation">)</span><span class="token punctuation">,</span> c<span class="token punctuation">(</span><span class="token number">0.3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> c<span class="token punctuation">(</span><span class="token number">0.2</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>wedgeprops<span class="token operator">=</span><span class="token builtin">dict</span><span class="token punctuation">(</span>width<span class="token operator">=</span><span class="token number">0.4</span><span class="token punctuation">,</span> edgecolor<span class="token operator">=</span><span class="token string">&#39;white&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

plt<span class="token punctuation">.</span>margins<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/Python-Study-Notes/Donut/output_32_0.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><h2 id="_4-参考" tabindex="-1"><a class="header-anchor" href="#_4-参考" aria-hidden="true">#</a> 4 参考</h2>`,31),v={href:"https://matplotlib.org/gallery/pie_and_polar_charts/nested_pie.html#sphx-glr-gallery-pie-and-polar-charts-nested-pie-py",target:"_blank",rel:"noopener noreferrer"},b={href:"https://matplotlib.org/gallery/pie_and_polar_charts/pie_and_donut_labels.html#sphx-glr-gallery-pie-and-polar-charts-pie-and-donut-labels-py",target:"_blank",rel:"noopener noreferrer"},g={href:"http://python-graph-gallery.com/donut-plot/",target:"_blank",rel:"noopener noreferrer"};function h(y,_){const a=o("ExternalLinkIcon");return c(),l("div",null,[u,n("p",null,[s("圆环图本质上是一个中间切出一块区域的饼状图。可以使用python和matplotlib库来实现。本文主要介绍基于matplotlib实现圆环图。本文所有代码见："),n("a",r,[s("Python-Study-Notes"),p(a)])]),k,n("p",null,[s("以下示例展示通过Palettable utility库来设置颜色， Palettable utility库说明见"),n("a",d,[s("palettable"),p(a)])]),m,n("ul",null,[n("li",null,[n("blockquote",null,[n("p",null,[n("a",v,[s("Nested pie charts"),p(a)])])])]),n("li",null,[n("blockquote",null,[n("p",null,[n("a",b,[s("Labeling a pie and a donut"),p(a)])])])]),n("li",null,[n("blockquote",null,[n("p",null,[n("a",g,[s("donut-plot"),p(a)])])])])])])}const x=e(i,[["render",h],["__file","2020-09-01-_python_ 基于matplotlib实现圆环图的绘制.html.vue"]]);export{x as default};
