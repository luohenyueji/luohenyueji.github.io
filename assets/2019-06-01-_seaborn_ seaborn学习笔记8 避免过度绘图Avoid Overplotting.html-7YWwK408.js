import{_ as t}from"./plugin-vue_export-helper-x3n3nnut.js";import{r as p,o,c as e,a as n,b as s,d as c,e as l}from"./app-MsA2k2kn.js";const i={},u=n("h1",{id:"seaborn-seaborn学习笔记8-避免过度绘图avoid-overplotting",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#seaborn-seaborn学习笔记8-避免过度绘图avoid-overplotting","aria-hidden":"true"},"#"),s(" [seaborn] seaborn学习笔记8 避免过度绘图Avoid Overplotting")],-1),r={href:"https://github.com/luohenyueji/Python-Study-Notes/tree/master/Seaborn%20Study",target:"_blank",rel:"noopener noreferrer"},k=l(`<ol><li>减小点的大小 reduce the dot size</li><li>使用透明度 use transparency</li><li>使用二维密度图 2D density graph</li><li>数据采样 Sample data</li><li>特定数据显示 Show a specific group</li><li>分组显示 Show putative structure</li><li>多图显示 faceting</li><li>数据分离 jitter</li><li>3D显示 3D image plot</li><li>边际图 Marginal distribution plot</li></ol><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># libraries and data</span>
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">import</span> seaborn <span class="token keyword">as</span> sns
<span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd
 
<span class="token comment"># Dataset:</span>
df<span class="token operator">=</span>pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&#39;x&#39;</span><span class="token punctuation">:</span> np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>normal<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">1.2</span><span class="token punctuation">,</span> <span class="token number">20000</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&#39;y&#39;</span><span class="token punctuation">:</span> np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>normal<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">1.2</span><span class="token punctuation">,</span> <span class="token number">20000</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&#39;group&#39;</span><span class="token punctuation">:</span> np<span class="token punctuation">.</span>repeat<span class="token punctuation">(</span><span class="token string">&#39;A&#39;</span><span class="token punctuation">,</span><span class="token number">20000</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
tmp1<span class="token operator">=</span>pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&#39;x&#39;</span><span class="token punctuation">:</span> np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>normal<span class="token punctuation">(</span><span class="token number">14.5</span><span class="token punctuation">,</span> <span class="token number">1.2</span><span class="token punctuation">,</span> <span class="token number">20000</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&#39;y&#39;</span><span class="token punctuation">:</span> np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>normal<span class="token punctuation">(</span><span class="token number">14.5</span><span class="token punctuation">,</span> <span class="token number">1.2</span><span class="token punctuation">,</span> <span class="token number">20000</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&#39;group&#39;</span><span class="token punctuation">:</span> np<span class="token punctuation">.</span>repeat<span class="token punctuation">(</span><span class="token string">&#39;B&#39;</span><span class="token punctuation">,</span><span class="token number">20000</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
tmp2<span class="token operator">=</span>pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&#39;x&#39;</span><span class="token punctuation">:</span> np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>normal<span class="token punctuation">(</span><span class="token number">9.5</span><span class="token punctuation">,</span> <span class="token number">1.5</span><span class="token punctuation">,</span> <span class="token number">20000</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&#39;y&#39;</span><span class="token punctuation">:</span> np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>normal<span class="token punctuation">(</span><span class="token number">15.5</span><span class="token punctuation">,</span> <span class="token number">1.5</span><span class="token punctuation">,</span> <span class="token number">20000</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&#39;group&#39;</span><span class="token punctuation">:</span> np<span class="token punctuation">.</span>repeat<span class="token punctuation">(</span><span class="token string">&#39;C&#39;</span><span class="token punctuation">,</span><span class="token number">20000</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
df<span class="token operator">=</span>df<span class="token punctuation">.</span>append<span class="token punctuation">(</span>tmp1<span class="token punctuation">)</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span>tmp2<span class="token punctuation">)</span>

<span class="token comment"># plot</span>
sns<span class="token punctuation">.</span>regplot<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token string">&#39;x&#39;</span><span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token string">&#39;y&#39;</span><span class="token punctuation">,</span> data<span class="token operator">=</span>df<span class="token punctuation">,</span> marker<span class="token operator">=</span><span class="token string">&#39;o&#39;</span><span class="token punctuation">,</span>fit_reg<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>xlabel<span class="token punctuation">(</span><span class="token string">&#39;Value of X&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
plt<span class="token punctuation">.</span>ylabel<span class="token punctuation">(</span><span class="token string">&#39;Value of Y&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">&#39;Overplotting looks like that:&#39;</span><span class="token punctuation">,</span> loc<span class="token operator">=</span><span class="token string">&#39;left&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_1-减小点的大小-reduce-the-dot-size" tabindex="-1"><a class="header-anchor" href="#_1-减小点的大小-reduce-the-dot-size" aria-hidden="true">#</a> 1. 减小点的大小 reduce the dot size</h2><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># Plot with small marker size scatter_kws控制点的大小</span>
sns<span class="token punctuation">.</span>regplot<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token string">&#39;x&#39;</span><span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token string">&#39;y&#39;</span><span class="token punctuation">,</span> data<span class="token operator">=</span>df<span class="token punctuation">,</span> marker<span class="token operator">=</span><span class="token string">&#39;o&#39;</span><span class="token punctuation">,</span>fit_reg<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> scatter_kws<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&quot;s&quot;</span><span class="token punctuation">:</span><span class="token number">0.01</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>xlabel<span class="token punctuation">(</span><span class="token string">&#39;Value of X&#39;</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>ylabel<span class="token punctuation">(</span><span class="token string">&#39;Value of Y&#39;</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">&#39;Overplotting? Try to reduce the dot size&#39;</span><span class="token punctuation">,</span> loc<span class="token operator">=</span><span class="token string">&#39;left&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/Python-Study-Notes/Seaborn-Study/8 避免过度绘图Avoid Overplotting/output_3_0.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><h2 id="_2-使用透明度-use-transparency" tabindex="-1"><a class="header-anchor" href="#_2-使用透明度-use-transparency" aria-hidden="true">#</a> 2. 使用透明度 use transparency</h2><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># Plot with transparency</span>
sns<span class="token punctuation">.</span>regplot<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token string">&#39;x&#39;</span><span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token string">&#39;y&#39;</span><span class="token punctuation">,</span> data<span class="token operator">=</span>df<span class="token punctuation">,</span> marker<span class="token operator">=</span><span class="token string">&#39;o&#39;</span><span class="token punctuation">,</span>fit_reg<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> scatter_kws<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&quot;color&quot;</span><span class="token punctuation">:</span><span class="token string">&quot;purple&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;alpha&quot;</span><span class="token punctuation">:</span><span class="token number">0.5</span><span class="token punctuation">,</span><span class="token string">&quot;s&quot;</span><span class="token punctuation">:</span><span class="token number">0.1</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
 
<span class="token comment"># Titles</span>
plt<span class="token punctuation">.</span>xlabel<span class="token punctuation">(</span><span class="token string">&#39;Value of X&#39;</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>ylabel<span class="token punctuation">(</span><span class="token string">&#39;Value of Y&#39;</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">&#39;Overplotting? Try to use transparency&#39;</span><span class="token punctuation">,</span> loc<span class="token operator">=</span><span class="token string">&#39;left&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/Python-Study-Notes/Seaborn-Study/8 避免过度绘图Avoid Overplotting/output_5_0.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><h2 id="_3-使用二维密度图-2d-density-graph" tabindex="-1"><a class="header-anchor" href="#_3-使用二维密度图-2d-density-graph" aria-hidden="true">#</a> 3. 使用二维密度图 2D density graph</h2><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># 2D density plot, kdeplot调用二维密度函数</span>
sns<span class="token punctuation">.</span>kdeplot<span class="token punctuation">(</span>df<span class="token punctuation">.</span>x<span class="token punctuation">,</span> df<span class="token punctuation">.</span>y<span class="token punctuation">,</span> cmap<span class="token operator">=</span><span class="token string">&quot;Reds&quot;</span><span class="token punctuation">,</span> shade<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">&#39;Overplotting? Try 2D density graph&#39;</span><span class="token punctuation">,</span> loc<span class="token operator">=</span><span class="token string">&#39;left&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><pre><code>C:\\ProgramData\\Anaconda3\\lib\\site-packages\\scipy\\stats\\stats.py:1713: FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use \`arr[tuple(seq)]\` instead of \`arr[seq]\`. In the future this will be interpreted as an array index, \`arr[np.array(seq)]\`, which will result either in an error or a different result.
  return np.add.reduce(sorted[indexer] * weights, axis=axis) / sumval
</code></pre><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/Python-Study-Notes/Seaborn-Study/8 避免过度绘图Avoid Overplotting/output_7_1.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><h2 id="_4-数据采样-sample-data" tabindex="-1"><a class="header-anchor" href="#_4-数据采样-sample-data" aria-hidden="true">#</a> 4. 数据采样 Sample data</h2><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># Sample 1000 random lines 随机获得1000个点</span>
df_sample<span class="token operator">=</span>df<span class="token punctuation">.</span>sample<span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span>
 
<span class="token comment"># plot</span>
sns<span class="token punctuation">.</span>regplot<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token string">&#39;x&#39;</span><span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token string">&#39;y&#39;</span><span class="token punctuation">,</span> data<span class="token operator">=</span>df_sample<span class="token punctuation">,</span> marker<span class="token operator">=</span><span class="token string">&#39;o&#39;</span><span class="token punctuation">,</span>fit_reg<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>xlabel<span class="token punctuation">(</span><span class="token string">&#39;Value of X&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
plt<span class="token punctuation">.</span>ylabel<span class="token punctuation">(</span><span class="token string">&#39;Value of Y&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">&#39;Overplotting? Sample data&#39;</span><span class="token punctuation">,</span> loc<span class="token operator">=</span><span class="token string">&#39;left&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/Python-Study-Notes/Seaborn-Study/8 避免过度绘图Avoid Overplotting/output_9_0.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><h2 id="_5-特定数据显示-show-a-specific-group" tabindex="-1"><a class="header-anchor" href="#_5-特定数据显示-show-a-specific-group" aria-hidden="true">#</a> 5. 特定数据显示 Show a specific group</h2><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># Filter the data randomly 筛选数据</span>
df_filtered <span class="token operator">=</span> df<span class="token punctuation">[</span> df<span class="token punctuation">[</span><span class="token string">&#39;group&#39;</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">&#39;A&#39;</span><span class="token punctuation">]</span>
<span class="token comment"># 基于matplotlib绘制主要显示的类别数据</span>
<span class="token comment"># Plot the whole dataset</span>
plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span> df<span class="token punctuation">[</span><span class="token string">&#39;x&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> df<span class="token punctuation">[</span><span class="token string">&#39;y&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> linestyle<span class="token operator">=</span><span class="token string">&#39;&#39;</span><span class="token punctuation">,</span> marker<span class="token operator">=</span><span class="token string">&#39;o&#39;</span><span class="token punctuation">,</span> markersize<span class="token operator">=</span><span class="token number">1.5</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">&quot;grey&quot;</span><span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token number">0.3</span><span class="token punctuation">,</span> label<span class="token operator">=</span><span class="token string">&#39;other group&#39;</span><span class="token punctuation">)</span>
<span class="token comment"># Add the group to study</span>
plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span> df_filtered<span class="token punctuation">[</span><span class="token string">&#39;x&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> df_filtered<span class="token punctuation">[</span><span class="token string">&#39;y&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> linestyle<span class="token operator">=</span><span class="token string">&#39;&#39;</span><span class="token punctuation">,</span> marker<span class="token operator">=</span><span class="token string">&#39;o&#39;</span><span class="token punctuation">,</span> markersize<span class="token operator">=</span><span class="token number">1.5</span><span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token number">0.3</span><span class="token punctuation">,</span> label<span class="token operator">=</span><span class="token string">&#39;group A&#39;</span><span class="token punctuation">)</span>
 
<span class="token comment"># Add titles and legend</span>
plt<span class="token punctuation">.</span>legend<span class="token punctuation">(</span>markerscale<span class="token operator">=</span><span class="token number">8</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>xlabel<span class="token punctuation">(</span><span class="token string">&#39;Value of X&#39;</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>ylabel<span class="token punctuation">(</span><span class="token string">&#39;Value of Y&#39;</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">&#39;Overplotting? Show a specific group&#39;</span><span class="token punctuation">,</span> loc<span class="token operator">=</span><span class="token string">&#39;left&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/Python-Study-Notes/Seaborn-Study/8 避免过度绘图Avoid Overplotting/output_11_0.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><h2 id="_6-分组显示-show-putative-structure" tabindex="-1"><a class="header-anchor" href="#_6-分组显示-show-putative-structure" aria-hidden="true">#</a> 6. 分组显示 Show putative structure</h2><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># Plot 不同组显示不同的颜色</span>
sns<span class="token punctuation">.</span>lmplot<span class="token punctuation">(</span> x<span class="token operator">=</span><span class="token string">&quot;x&quot;</span><span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token string">&quot;y&quot;</span><span class="token punctuation">,</span> data<span class="token operator">=</span>df<span class="token punctuation">,</span> fit_reg<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> hue<span class="token operator">=</span><span class="token string">&#39;group&#39;</span><span class="token punctuation">,</span> legend<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> palette<span class="token operator">=</span><span class="token string">&quot;Accent&quot;</span><span class="token punctuation">,</span> scatter_kws<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&quot;alpha&quot;</span><span class="token punctuation">:</span><span class="token number">0.1</span><span class="token punctuation">,</span><span class="token string">&quot;s&quot;</span><span class="token punctuation">:</span><span class="token number">15</span><span class="token punctuation">}</span> <span class="token punctuation">)</span>
 
<span class="token comment"># Legend</span>
plt<span class="token punctuation">.</span>legend<span class="token punctuation">(</span>loc<span class="token operator">=</span><span class="token string">&#39;lower right&#39;</span><span class="token punctuation">,</span> markerscale<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span>
 
<span class="token comment"># titles</span>
plt<span class="token punctuation">.</span>xlabel<span class="token punctuation">(</span><span class="token string">&#39;Value of X&#39;</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>ylabel<span class="token punctuation">(</span><span class="token string">&#39;Value of Y&#39;</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">&#39;Overplotting? Show putative structure&#39;</span><span class="token punctuation">,</span> loc<span class="token operator">=</span><span class="token string">&#39;left&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/Python-Study-Notes/Seaborn-Study/8 避免过度绘图Avoid Overplotting/output_13_0.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><h2 id="_7-多图显示-faceting" tabindex="-1"><a class="header-anchor" href="#_7-多图显示-faceting" aria-hidden="true">#</a> 7. 多图显示 faceting</h2><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># Use seaborn for easy faceting</span>
<span class="token comment"># 应用多绘图网格函数FacetGrid实例化group，其中根据col=&quot;group&quot;分组。</span>
g <span class="token operator">=</span> sns<span class="token punctuation">.</span>FacetGrid<span class="token punctuation">(</span>df<span class="token punctuation">,</span> col<span class="token operator">=</span><span class="token string">&quot;group&quot;</span><span class="token punctuation">,</span> hue<span class="token operator">=</span><span class="token string">&quot;group&quot;</span><span class="token punctuation">)</span>
g <span class="token operator">=</span> <span class="token punctuation">(</span>g<span class="token punctuation">.</span><span class="token builtin">map</span><span class="token punctuation">(</span>plt<span class="token punctuation">.</span>scatter<span class="token punctuation">,</span> <span class="token string">&quot;x&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;y&quot;</span><span class="token punctuation">,</span> edgecolor<span class="token operator">=</span><span class="token string">&quot;w&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/Python-Study-Notes/Seaborn-Study/8 避免过度绘图Avoid Overplotting/output_15_0.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><h2 id="_8-数据分离-jitter" tabindex="-1"><a class="header-anchor" href="#_8-数据分离-jitter" aria-hidden="true">#</a> 8. 数据分离 jitter</h2><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># Dataset:</span>
a<span class="token operator">=</span>np<span class="token punctuation">.</span>concatenate<span class="token punctuation">(</span><span class="token punctuation">[</span>np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>normal<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">,</span> np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>normal<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">,</span> np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>normal<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">,</span> np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>normal<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">,</span> np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>normal<span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">,</span> np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>normal<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
df<span class="token operator">=</span>pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&#39;x&#39;</span><span class="token punctuation">:</span> np<span class="token punctuation">.</span>repeat<span class="token punctuation">(</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&#39;y&#39;</span><span class="token punctuation">:</span> a <span class="token punctuation">}</span><span class="token punctuation">)</span>
 
<span class="token comment"># plot</span>
sns<span class="token punctuation">.</span>regplot<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token string">&#39;x&#39;</span><span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token string">&#39;y&#39;</span><span class="token punctuation">,</span> data<span class="token operator">=</span>df<span class="token punctuation">,</span> marker<span class="token operator">=</span><span class="token string">&#39;o&#39;</span><span class="token punctuation">,</span>fit_reg<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/Python-Study-Notes/Seaborn-Study/8 避免过度绘图Avoid Overplotting/output_17_0.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># A scatterplot with jitter</span>
sns<span class="token punctuation">.</span>stripplot<span class="token punctuation">(</span>df<span class="token punctuation">.</span>x<span class="token punctuation">,</span> df<span class="token punctuation">.</span>y<span class="token punctuation">,</span> jitter<span class="token operator">=</span><span class="token number">0.2</span><span class="token punctuation">,</span> size<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">&#39;Overplotting? Use jitter when x data are not really continuous&#39;</span><span class="token punctuation">,</span> loc<span class="token operator">=</span><span class="token string">&#39;left&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/Python-Study-Notes/Seaborn-Study/8 避免过度绘图Avoid Overplotting/output_18_0.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><h2 id="_9-3d显示-3d-image-plot" tabindex="-1"><a class="header-anchor" href="#_9-3d显示-3d-image-plot" aria-hidden="true">#</a> 9. 3D显示 3D image plot</h2><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># libraries</span>
<span class="token keyword">from</span> scipy<span class="token punctuation">.</span>stats <span class="token keyword">import</span> kde
<span class="token keyword">from</span> mpl_toolkits<span class="token punctuation">.</span>mplot3d <span class="token keyword">import</span> Axes3D
 
<span class="token comment"># Evaluate a gaussian kde on a regular grid of nbins x nbins over data extents</span>
nbins<span class="token operator">=</span><span class="token number">300</span>
k <span class="token operator">=</span> kde<span class="token punctuation">.</span>gaussian_kde<span class="token punctuation">(</span><span class="token punctuation">[</span>df<span class="token punctuation">.</span>x<span class="token punctuation">,</span>df<span class="token punctuation">.</span>y<span class="token punctuation">]</span><span class="token punctuation">)</span>
xi<span class="token punctuation">,</span> yi <span class="token operator">=</span> np<span class="token punctuation">.</span>mgrid<span class="token punctuation">[</span> df<span class="token punctuation">.</span>x<span class="token punctuation">.</span><span class="token builtin">min</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>df<span class="token punctuation">.</span>x<span class="token punctuation">.</span><span class="token builtin">max</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>nbins<span class="token operator">*</span><span class="token number">1j</span><span class="token punctuation">,</span> df<span class="token punctuation">.</span>y<span class="token punctuation">.</span><span class="token builtin">min</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>df<span class="token punctuation">.</span>y<span class="token punctuation">.</span><span class="token builtin">max</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>nbins<span class="token operator">*</span><span class="token number">1j</span><span class="token punctuation">]</span>
zi <span class="token operator">=</span> k<span class="token punctuation">(</span>np<span class="token punctuation">.</span>vstack<span class="token punctuation">(</span><span class="token punctuation">[</span>xi<span class="token punctuation">.</span>flatten<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> yi<span class="token punctuation">.</span>flatten<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
 
<span class="token comment"># Transform it in a dataframe</span>
data<span class="token operator">=</span>pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&#39;x&#39;</span><span class="token punctuation">:</span> xi<span class="token punctuation">.</span>flatten<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&#39;y&#39;</span><span class="token punctuation">:</span> yi<span class="token punctuation">.</span>flatten<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&#39;z&#39;</span><span class="token punctuation">:</span> zi <span class="token punctuation">}</span><span class="token punctuation">)</span>
 
<span class="token comment"># Make the plot</span>
fig <span class="token operator">=</span> plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span><span class="token punctuation">)</span>
ax <span class="token operator">=</span> fig<span class="token punctuation">.</span>gca<span class="token punctuation">(</span>projection<span class="token operator">=</span><span class="token string">&#39;3d&#39;</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>plot_trisurf<span class="token punctuation">(</span>data<span class="token punctuation">.</span>x<span class="token punctuation">,</span> data<span class="token punctuation">.</span>y<span class="token punctuation">,</span> data<span class="token punctuation">.</span>z<span class="token punctuation">,</span> cmap<span class="token operator">=</span>plt<span class="token punctuation">.</span>cm<span class="token punctuation">.</span>Spectral<span class="token punctuation">,</span> linewidth<span class="token operator">=</span><span class="token number">0.2</span><span class="token punctuation">)</span>
<span class="token comment"># Adapt angle, first number is up/down, second number is right/left</span>
ax<span class="token punctuation">.</span>view_init<span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">80</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/Python-Study-Notes/Seaborn-Study/8 避免过度绘图Avoid Overplotting/output_20_0.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><h2 id="_10-边际图-marginal-distribution-plot" tabindex="-1"><a class="header-anchor" href="#_10-边际图-marginal-distribution-plot" aria-hidden="true">#</a> 10. 边际图 Marginal distribution plot</h2><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># 2D density + marginal distribution:</span>
sns<span class="token punctuation">.</span>jointplot<span class="token punctuation">(</span>x<span class="token operator">=</span>df<span class="token punctuation">.</span>x<span class="token punctuation">,</span> y<span class="token operator">=</span>df<span class="token punctuation">.</span>y<span class="token punctuation">,</span> kind<span class="token operator">=</span><span class="token string">&#39;kde&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/Python-Study-Notes/Seaborn-Study/8 避免过度绘图Avoid Overplotting/output_22_0.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure>`,35);function d(m,g){const a=p("ExternalLinkIcon");return o(),e("div",null,[u,n("p",null,[n("a",r,[s("(代码下载)"),c(a)]),s(" 过度绘图是散点图及几天常见图表中最常见的问题之一。如下图所示当数据集很大时，散点图的点会重叠，使得图形变得不可读。在这篇文章中，提出了多种方法避免过度绘图。该章节主要内容有:")]),k])}const h=t(i,[["render",d],["__file","2019-06-01-_seaborn_ seaborn学习笔记8 避免过度绘图Avoid Overplotting.html.vue"]]);export{h as default};
