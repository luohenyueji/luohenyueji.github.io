import{_ as t}from"./plugin-vue_export-helper-x3n3nnut.js";import{r as p,o as e,c as o,a as n,b as s,d as c,e as i}from"./app-MsA2k2kn.js";const l={},u=n("h1",{id:"seaborn-seaborn学习笔记12-绘图实例-4-drawing-example-4",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#seaborn-seaborn学习笔记12-绘图实例-4-drawing-example-4","aria-hidden":"true"},"#"),s(" [seaborn] seaborn学习笔记12 绘图实例(4) Drawing example(4)")],-1),r={href:"https://github.com/luohenyueji/Python-Study-Notes/tree/master/Seaborn%20Study",target:"_blank",rel:"noopener noreferrer"},k=i(`<ol><li>Scatterplot with varying point sizes and hues(relplot)</li><li>Scatterplot with categorical variables(swarmplot)</li><li>Scatterplot Matrix(pairplot)</li><li>Scatterplot with continuous hues and sizes(scatterplot)</li><li>Violinplots with observations(violinplot)</li><li>Discovering structure in heatmap data(clustermap)</li><li>Lineplot from a wide-form dataset(lineplot)</li><li>Violinplot from a wide-form dataset(violinplot)</li></ol><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># import packages</span>
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd
<span class="token keyword">import</span> seaborn <span class="token keyword">as</span> sns
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_1-scatterplot-with-varying-point-sizes-and-hues-relplot" tabindex="-1"><a class="header-anchor" href="#_1-scatterplot-with-varying-point-sizes-and-hues-relplot" aria-hidden="true">#</a> 1. Scatterplot with varying point sizes and hues(relplot)</h2><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>sns<span class="token punctuation">.</span><span class="token builtin">set</span><span class="token punctuation">(</span>style<span class="token operator">=</span><span class="token string">&quot;white&quot;</span><span class="token punctuation">)</span>

<span class="token comment"># Load the example mpg dataset</span>
mpg <span class="token operator">=</span> sns<span class="token punctuation">.</span>load_dataset<span class="token punctuation">(</span><span class="token string">&quot;mpg&quot;</span><span class="token punctuation">)</span>

<span class="token comment"># Plot miles per gallon against horsepower with other semantics</span>
<span class="token comment"># 其中x,y为横轴坐标变量，hue表示分类类别，size表示点的大小</span>
sns<span class="token punctuation">.</span>relplot<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token string">&quot;horsepower&quot;</span><span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token string">&quot;mpg&quot;</span><span class="token punctuation">,</span> hue<span class="token operator">=</span><span class="token string">&quot;origin&quot;</span><span class="token punctuation">,</span> size<span class="token operator">=</span><span class="token string">&quot;weight&quot;</span><span class="token punctuation">,</span>
            sizes<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">)</span><span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token number">.5</span><span class="token punctuation">,</span> palette<span class="token operator">=</span><span class="token string">&quot;muted&quot;</span><span class="token punctuation">,</span>
            height<span class="token operator">=</span><span class="token number">6</span><span class="token punctuation">,</span> data<span class="token operator">=</span>mpg<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/Python-Study-Notes/Seaborn-Study/12 绘图实例(4) Drawing example(4)/output_3_0.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><h2 id="_2-scatterplot-with-categorical-variables-swarmplot" tabindex="-1"><a class="header-anchor" href="#_2-scatterplot-with-categorical-variables-swarmplot" aria-hidden="true">#</a> 2. Scatterplot with categorical variables(swarmplot)</h2><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># Load the example iris dataset</span>
iris <span class="token operator">=</span> sns<span class="token punctuation">.</span>load_dataset<span class="token punctuation">(</span><span class="token string">&quot;iris&quot;</span><span class="token punctuation">)</span>

<span class="token comment"># &quot;Melt&quot; the dataset to &quot;long-form&quot; or &quot;tidy&quot; representation</span>
<span class="token comment"># 合并数据集</span>
iris <span class="token operator">=</span> pd<span class="token punctuation">.</span>melt<span class="token punctuation">(</span>iris<span class="token punctuation">,</span> <span class="token string">&quot;species&quot;</span><span class="token punctuation">,</span> var_name<span class="token operator">=</span><span class="token string">&quot;measurement&quot;</span><span class="token punctuation">)</span>

<span class="token comment"># Draw a categorical scatterplot to show each observation</span>
<span class="token comment"># swarmplot将不同类别散点图用树状表示</span>
sns<span class="token punctuation">.</span>swarmplot<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token string">&quot;measurement&quot;</span><span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token string">&quot;value&quot;</span><span class="token punctuation">,</span> hue<span class="token operator">=</span><span class="token string">&quot;species&quot;</span><span class="token punctuation">,</span>
              palette<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">&quot;r&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;c&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;y&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> data<span class="token operator">=</span>iris<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/Python-Study-Notes/Seaborn-Study/12 绘图实例(4) Drawing example(4)/output_5_0.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><h2 id="_3-scatterplot-matrix-pairplot" tabindex="-1"><a class="header-anchor" href="#_3-scatterplot-matrix-pairplot" aria-hidden="true">#</a> 3. Scatterplot Matrix(pairplot)</h2><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>df <span class="token operator">=</span> sns<span class="token punctuation">.</span>load_dataset<span class="token punctuation">(</span><span class="token string">&quot;iris&quot;</span><span class="token punctuation">)</span>
<span class="token comment">#制作多变量图，hue为使用指定变量为分类变量画图</span>
sns<span class="token punctuation">.</span>pairplot<span class="token punctuation">(</span>df<span class="token punctuation">,</span> hue<span class="token operator">=</span><span class="token string">&quot;species&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><pre><code>C:\\ProgramData\\Anaconda3\\lib\\site-packages\\scipy\\stats\\stats.py:1713: FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use \`arr[tuple(seq)]\` instead of \`arr[seq]\`. In the future this will be interpreted as an array index, \`arr[np.array(seq)]\`, which will result either in an error or a different result.
  return np.add.reduce(sorted[indexer] * weights, axis=axis) / sumval
</code></pre><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/Python-Study-Notes/Seaborn-Study/12 绘图实例(4) Drawing example(4)/output_7_1.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><h2 id="_4-scatterplot-with-continuous-hues-and-sizes-scatterplot" tabindex="-1"><a class="header-anchor" href="#_4-scatterplot-with-continuous-hues-and-sizes-scatterplot" aria-hidden="true">#</a> 4. Scatterplot with continuous hues and sizes(scatterplot)</h2><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># Load the example iris dataset</span>
planets <span class="token operator">=</span> sns<span class="token punctuation">.</span>load_dataset<span class="token punctuation">(</span><span class="token string">&quot;planets&quot;</span><span class="token punctuation">)</span>
<span class="token comment"># 设定颜色</span>
<span class="token comment">#cubehelix_palette表示从cubehelix中制作顺序调色板</span>
cmap <span class="token operator">=</span> sns<span class="token punctuation">.</span>cubehelix_palette<span class="token punctuation">(</span>rot<span class="token operator">=</span><span class="token operator">-</span><span class="token number">.2</span><span class="token punctuation">,</span> as_cmap<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
ax <span class="token operator">=</span> sns<span class="token punctuation">.</span>scatterplot<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token string">&quot;distance&quot;</span><span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token string">&quot;orbital_period&quot;</span><span class="token punctuation">,</span>
                     hue<span class="token operator">=</span><span class="token string">&quot;year&quot;</span><span class="token punctuation">,</span> size<span class="token operator">=</span><span class="token string">&quot;mass&quot;</span><span class="token punctuation">,</span>
                     palette<span class="token operator">=</span>cmap<span class="token punctuation">,</span> sizes<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                     data<span class="token operator">=</span>planets<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/Python-Study-Notes/Seaborn-Study/12 绘图实例(4) Drawing example(4)/output_9_0.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><h2 id="_5-violinplots-with-observations-violinplot" tabindex="-1"><a class="header-anchor" href="#_5-violinplots-with-observations-violinplot" aria-hidden="true">#</a> 5. Violinplots with observations(violinplot)</h2><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># Create a random dataset across several variables</span>
rs <span class="token operator">=</span> np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>RandomState<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
n<span class="token punctuation">,</span> p <span class="token operator">=</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">8</span>
d <span class="token operator">=</span> rs<span class="token punctuation">.</span>normal<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>n<span class="token punctuation">,</span> p<span class="token punctuation">)</span><span class="token punctuation">)</span>
d <span class="token operator">+=</span> np<span class="token punctuation">.</span>log<span class="token punctuation">(</span>np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> p <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token operator">-</span><span class="token number">5</span> <span class="token operator">+</span> <span class="token number">10</span>

<span class="token comment"># Use cubehelix to get a custom sequential palette</span>
pal <span class="token operator">=</span> sns<span class="token punctuation">.</span>cubehelix_palette<span class="token punctuation">(</span>p<span class="token punctuation">,</span> rot<span class="token operator">=</span><span class="token operator">-</span><span class="token number">.5</span><span class="token punctuation">,</span> dark<span class="token operator">=</span><span class="token number">.3</span><span class="token punctuation">)</span>

<span class="token comment"># Show each distribution with both violins and points</span>
<span class="token comment"># 制作小提琴图，pal表示颜色</span>
sns<span class="token punctuation">.</span>violinplot<span class="token punctuation">(</span>data<span class="token operator">=</span>d<span class="token punctuation">,</span> palette<span class="token operator">=</span>pal<span class="token punctuation">,</span> inner<span class="token operator">=</span><span class="token string">&quot;points&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/Python-Study-Notes/Seaborn-Study/12 绘图实例(4) Drawing example(4)/output_11_0.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><h2 id="_6-discovering-structure-in-heatmap-data-clustermap" tabindex="-1"><a class="header-anchor" href="#_6-discovering-structure-in-heatmap-data-clustermap" aria-hidden="true">#</a> 6. Discovering structure in heatmap data(clustermap)</h2><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># Load the brain networks example dataset</span>
df <span class="token operator">=</span> sns<span class="token punctuation">.</span>load_dataset<span class="token punctuation">(</span><span class="token string">&quot;brain_networks&quot;</span><span class="token punctuation">,</span> header<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> index_col<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>

<span class="token comment"># Select a subset of the networks</span>
used_networks <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">,</span> <span class="token number">17</span><span class="token punctuation">]</span>
used_columns <span class="token operator">=</span> <span class="token punctuation">(</span>df<span class="token punctuation">.</span>columns<span class="token punctuation">.</span>get_level_values<span class="token punctuation">(</span><span class="token string">&quot;network&quot;</span><span class="token punctuation">)</span>
                          <span class="token punctuation">.</span>astype<span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">)</span>
                          <span class="token punctuation">.</span>isin<span class="token punctuation">(</span>used_networks<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment"># 建立矩阵类数据集</span>
df <span class="token operator">=</span> df<span class="token punctuation">.</span>loc<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> used_columns<span class="token punctuation">]</span>

<span class="token comment"># Create a categorical palette to identify the networks</span>
<span class="token comment">#创建调色盘</span>
network_pal <span class="token operator">=</span> sns<span class="token punctuation">.</span>husl_palette<span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> s<span class="token operator">=</span><span class="token number">.45</span><span class="token punctuation">)</span>
network_lut <span class="token operator">=</span> <span class="token builtin">dict</span><span class="token punctuation">(</span><span class="token builtin">zip</span><span class="token punctuation">(</span><span class="token builtin">map</span><span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">,</span> used_networks<span class="token punctuation">)</span><span class="token punctuation">,</span> network_pal<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment"># Convert the palette to vectors that will be drawn on the side of the matrix</span>
networks <span class="token operator">=</span> df<span class="token punctuation">.</span>columns<span class="token punctuation">.</span>get_level_values<span class="token punctuation">(</span><span class="token string">&quot;network&quot;</span><span class="token punctuation">)</span>
network_colors <span class="token operator">=</span> pd<span class="token punctuation">.</span>Series<span class="token punctuation">(</span>networks<span class="token punctuation">,</span> index<span class="token operator">=</span>df<span class="token punctuation">.</span>columns<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">map</span><span class="token punctuation">(</span>network_lut<span class="token punctuation">)</span>

<span class="token comment"># Draw the full plot</span>
<span class="token comment"># 将矩阵数据集绘制为分层聚类热图</span>
<span class="token comment"># row_colors,col_color行或列标记的颜色列表</span>
sns<span class="token punctuation">.</span>clustermap<span class="token punctuation">(</span>df<span class="token punctuation">.</span>corr<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> center<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> cmap<span class="token operator">=</span><span class="token string">&quot;vlag&quot;</span><span class="token punctuation">,</span>
               row_colors<span class="token operator">=</span>network_colors<span class="token punctuation">,</span> col_colors<span class="token operator">=</span>network_colors<span class="token punctuation">,</span>
               linewidths<span class="token operator">=</span><span class="token number">.75</span><span class="token punctuation">,</span> figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">13</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/Python-Study-Notes/Seaborn-Study/12 绘图实例(4) Drawing example(4)/output_13_0.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><h2 id="_7-lineplot-from-a-wide-form-dataset-lineplot" tabindex="-1"><a class="header-anchor" href="#_7-lineplot-from-a-wide-form-dataset-lineplot" aria-hidden="true">#</a> 7. Lineplot from a wide-form dataset(lineplot)</h2><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>sns<span class="token punctuation">.</span><span class="token builtin">set</span><span class="token punctuation">(</span>style<span class="token operator">=</span><span class="token string">&quot;whitegrid&quot;</span><span class="token punctuation">)</span>

rs <span class="token operator">=</span> np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>RandomState<span class="token punctuation">(</span><span class="token number">365</span><span class="token punctuation">)</span>
values <span class="token operator">=</span> rs<span class="token punctuation">.</span>randn<span class="token punctuation">(</span><span class="token number">365</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">.</span>cumsum<span class="token punctuation">(</span>axis<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>
dates <span class="token operator">=</span> pd<span class="token punctuation">.</span>date_range<span class="token punctuation">(</span><span class="token string">&quot;1 1 2016&quot;</span><span class="token punctuation">,</span> periods<span class="token operator">=</span><span class="token number">365</span><span class="token punctuation">,</span> freq<span class="token operator">=</span><span class="token string">&quot;D&quot;</span><span class="token punctuation">)</span>
data <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span>values<span class="token punctuation">,</span> dates<span class="token punctuation">,</span> columns<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">&quot;A&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;B&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;C&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;D&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
data <span class="token operator">=</span> data<span class="token punctuation">.</span>rolling<span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">.</span>mean<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># 创建折线图</span>
sns<span class="token punctuation">.</span>lineplot<span class="token punctuation">(</span>data<span class="token operator">=</span>data<span class="token punctuation">,</span> palette<span class="token operator">=</span><span class="token string">&quot;tab10&quot;</span><span class="token punctuation">,</span> linewidth<span class="token operator">=</span><span class="token number">2.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/Python-Study-Notes/Seaborn-Study/12 绘图实例(4) Drawing example(4)/output_15_0.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><h2 id="_8-violinplot-from-a-wide-form-dataset-violinplot" tabindex="-1"><a class="header-anchor" href="#_8-violinplot-from-a-wide-form-dataset-violinplot" aria-hidden="true">#</a> 8. Violinplot from a wide-form dataset(violinplot)</h2><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># Load the example dataset of brain network correlations</span>
df <span class="token operator">=</span> sns<span class="token punctuation">.</span>load_dataset<span class="token punctuation">(</span><span class="token string">&quot;brain_networks&quot;</span><span class="token punctuation">,</span> header<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> index_col<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>

<span class="token comment"># Pull out a specific subset of networks</span>
used_networks <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">17</span><span class="token punctuation">]</span>
used_columns <span class="token operator">=</span> <span class="token punctuation">(</span>df<span class="token punctuation">.</span>columns<span class="token punctuation">.</span>get_level_values<span class="token punctuation">(</span><span class="token string">&quot;network&quot;</span><span class="token punctuation">)</span>
                          <span class="token punctuation">.</span>astype<span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">)</span>
                          <span class="token punctuation">.</span>isin<span class="token punctuation">(</span>used_networks<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">#创建矩阵</span>
df <span class="token operator">=</span> df<span class="token punctuation">.</span>loc<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> used_columns<span class="token punctuation">]</span>

<span class="token comment"># Compute the correlation matrix and average over networks</span>
<span class="token comment"># 计算相对系数和均值</span>
corr_df <span class="token operator">=</span> df<span class="token punctuation">.</span>corr<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>groupby<span class="token punctuation">(</span>level<span class="token operator">=</span><span class="token string">&quot;network&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>mean<span class="token punctuation">(</span><span class="token punctuation">)</span>
corr_df<span class="token punctuation">.</span>index <span class="token operator">=</span> corr_df<span class="token punctuation">.</span>index<span class="token punctuation">.</span>astype<span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">)</span>
corr_df <span class="token operator">=</span> corr_df<span class="token punctuation">.</span>sort_index<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>T

<span class="token comment"># Set up the matplotlib figure</span>
f<span class="token punctuation">,</span> ax <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplots<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment"># Draw a violinplot with a narrower bandwidth than the default</span>
sns<span class="token punctuation">.</span>violinplot<span class="token punctuation">(</span>data<span class="token operator">=</span>corr_df<span class="token punctuation">,</span> palette<span class="token operator">=</span><span class="token string">&quot;Set3&quot;</span><span class="token punctuation">,</span> bw<span class="token operator">=</span><span class="token number">.2</span><span class="token punctuation">,</span> cut<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> linewidth<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>

<span class="token comment"># Finalize the figure</span>
ax<span class="token punctuation">.</span><span class="token builtin">set</span><span class="token punctuation">(</span>ylim<span class="token operator">=</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">.7</span><span class="token punctuation">,</span> <span class="token number">1.05</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
sns<span class="token punctuation">.</span>despine<span class="token punctuation">(</span>left<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> bottom<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/Python-Study-Notes/Seaborn-Study/12 绘图实例(4) Drawing example(4)/output_17_0.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure>`,27);function d(m,v){const a=p("ExternalLinkIcon");return e(),o("div",null,[u,n("p",null,[n("a",r,[s("(代码下载)"),c(a)]),s(" 本文主要讲述seaborn官网相关函数绘图实例。具体内容有：")]),k])}const h=t(l,[["render",d],["__file","2019-06-06-_seaborn_ seaborn学习笔记12 绘图实例(4) Drawing example(4).html.vue"]]);export{h as default};
