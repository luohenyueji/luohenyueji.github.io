import{_ as i}from"./plugin-vue_export-helper-x3n3nnut.js";import{r as d,o as a,c as n,a as e,b as l,d as s,e as o}from"./app-MsA2k2kn.js";const r={},c=o(`<h1 id="数据分析与可视化-数据绘图要点10-图例的构建" tabindex="-1"><a class="header-anchor" href="#数据分析与可视化-数据绘图要点10-图例的构建" aria-hidden="true">#</a> [数据分析与可视化] 数据绘图要点10-图例的构建</h1><p>图例是数据可视化中传达信息非常关键的部分，因此创建合适的图例非常重要。这篇文章描述了如何设置ggplot2图例中的标题、文本、位置、符号等。</p><h2 id="ggplot2图例设置" tabindex="-1"><a class="header-anchor" href="#ggplot2图例设置" aria-hidden="true">#</a> ggplot2图例设置</h2><h3 id="ggplot2创建默认图例" tabindex="-1"><a class="header-anchor" href="#ggplot2创建默认图例" aria-hidden="true">#</a> ggplot2创建默认图例</h3><p>默认情况下，只要形状特征映射到ggplot调用的aes()部分中的变量，ggplot2就会自动在图表上生成图例。因此，如果您在ggplot2中设置颜色、形状或透明度，则会默认创建图例。如果你想查看ggplot2可以设置的信息，调用ggplot2::theme即可。</p><div class="language-R line-numbers-mode" data-ext="R"><pre class="language-R"><code>## 加载ggplot2
library(ggplot2)
## 展示自带的mtcars数据
head(mtcars)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><table class="dataframe"><caption>A data.frame: 6 × 11</caption><thead><tr><th></th><th scope="col">mpg</th><th scope="col">cyl</th><th scope="col">disp</th><th scope="col">hp</th><th scope="col">drat</th><th scope="col">wt</th><th scope="col">qsec</th><th scope="col">vs</th><th scope="col">am</th><th scope="col">gear</th><th scope="col">carb</th></tr><tr><th></th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;dbl&gt;</th></tr></thead><tbody><tr><th scope="row">Mazda RX4</th><td>21.0</td><td>6</td><td>160</td><td>110</td><td>3.90</td><td>2.620</td><td>16.46</td><td>0</td><td>1</td><td>4</td><td>4</td></tr><tr><th scope="row">Mazda RX4 Wag</th><td>21.0</td><td>6</td><td>160</td><td>110</td><td>3.90</td><td>2.875</td><td>17.02</td><td>0</td><td>1</td><td>4</td><td>4</td></tr><tr><th scope="row">Datsun 710</th><td>22.8</td><td>4</td><td>108</td><td> 93</td><td>3.85</td><td>2.320</td><td>18.61</td><td>1</td><td>1</td><td>4</td><td>1</td></tr><tr><th scope="row">Hornet 4 Drive</th><td>21.4</td><td>6</td><td>258</td><td>110</td><td>3.08</td><td>3.215</td><td>19.44</td><td>1</td><td>0</td><td>3</td><td>1</td></tr><tr><th scope="row">Hornet Sportabout</th><td>18.7</td><td>8</td><td>360</td><td>175</td><td>3.15</td><td>3.440</td><td>17.02</td><td>0</td><td>0</td><td>3</td><td>2</td></tr><tr><th scope="row">Valiant</th><td>18.1</td><td>6</td><td>225</td><td>105</td><td>2.76</td><td>3.460</td><td>20.22</td><td>1</td><td>0</td><td>3</td><td>1</td></tr></tbody></table><div class="language-R line-numbers-mode" data-ext="R"><pre class="language-R"><code>## 绘图
## 横轴wt,纵轴mpg，颜色cyl，形状factor
basic &lt;- ggplot(mtcars, aes(wt, mpg, colour = factor(cyl), shape = factor(vs) )) +
       geom_point()
basic
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/R-Study-Notes/[数据分析与可视化] 数据绘图要点/[数据分析与可视化] 数据绘图要点10-图例的构建/output_3_0.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><h3 id="更改图例标题labs" tabindex="-1"><a class="header-anchor" href="#更改图例标题labs" aria-hidden="true">#</a> 更改图例标题labs()</h3><p>labs()函数允许更改图例标题。您可以为图例的每个部分指定一个标题，即图表中使用的每个美学aesthetics 。</p><div class="language-R line-numbers-mode" data-ext="R"><pre class="language-R"><code>## 在默认图表的基础上设置图例标题
basic+
  labs(
         colour = &quot;colour&quot;,
         shape = &quot;shape&quot;
        )
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/R-Study-Notes/[数据分析与可视化] 数据绘图要点/[数据分析与可视化] 数据绘图要点10-图例的构建/output_5_0.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><h3 id="图例信息的删除" tabindex="-1"><a class="header-anchor" href="#图例信息的删除" aria-hidden="true">#</a> 图例信息的删除</h3><p>通过theme()和guides()可以删除整个图例或图例的特定部分。</p><div class="language-R line-numbers-mode" data-ext="R"><pre class="language-R"><code>## 删除shape
basic + guides(shape=FALSE) +
labs(
     colour = &quot;colour&quot;,
     shape = &quot;shape&quot;
    )
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><pre><code>Warning message:
&quot;\`guides(&lt;scale&gt; = FALSE)\` is deprecated. Please use \`guides(&lt;scale&gt; = &quot;none&quot;)\` instead.&quot;
</code></pre><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/R-Study-Notes/[数据分析与可视化] 数据绘图要点/[数据分析与可视化] 数据绘图要点10-图例的构建/output_7_1.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><div class="language-R line-numbers-mode" data-ext="R"><pre class="language-R"><code>## 删除图例
basic + theme(legend.position = &quot;none&quot;)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/R-Study-Notes/[数据分析与可视化] 数据绘图要点/[数据分析与可视化] 数据绘图要点10-图例的构建/output_8_0.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><h3 id="控制图例位置" tabindex="-1"><a class="header-anchor" href="#控制图例位置" aria-hidden="true">#</a> 控制图例位置</h3><p>ggplot2允许将图例放在任何地方。如果将图例放在图表周围，使用legend.position选项并指定top，right，bottom，或left。要将图例放在绘图区域内，指定一个长度为2的向量，两个值都在 0 和 1 之间，并给出x和y坐标即可。</p><div class="language-R line-numbers-mode" data-ext="R"><pre class="language-R"><code>## 将图例放在图表左边
basic + theme(legend.position = &quot;left&quot;)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/R-Study-Notes/[数据分析与可视化] 数据绘图要点/[数据分析与可视化] 数据绘图要点10-图例的构建/output_10_0.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><div class="language-R line-numbers-mode" data-ext="R"><pre class="language-R"><code>## 将图例放在图表左边
## legend.justification设置图例位置后，图例具体所处方位
basic + theme(legend.position = &quot;left&quot;,legend.justification = c(&quot;left&quot;, &quot;center&quot;))
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/R-Study-Notes/[数据分析与可视化] 数据绘图要点/[数据分析与可视化] 数据绘图要点10-图例的构建/output_11_0.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><div class="language-R line-numbers-mode" data-ext="R"><pre class="language-R"><code>basic + theme(
    legend.position = c(0.55, 0.95), ## 设置图例起始位置，左下角为原点，横坐标和纵坐标范围都为0到1
    legend.justification = c(&quot;right&quot;, &quot;top&quot;), #设置图例位置后，图例具体所处方位
    legend.box.just = &quot;right&quot;, ## 设置不同图例对齐方式
    legend.margin = margin(6, 6, 6, 6) ## 设置图例内容外边距
    )
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/R-Study-Notes/[数据分析与可视化] 数据绘图要点/[数据分析与可视化] 数据绘图要点10-图例的构建/output_12_0.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><h3 id="图例外观设置" tabindex="-1"><a class="header-anchor" href="#图例外观设置" aria-hidden="true">#</a> 图例外观设置</h3><p>以下是 4 个示例，展示了如何自定义图例的主要功能：</p><ul><li>legend.box 自定义图例外框</li><li>legend.key 设置图例中每一个变量key值的展示信息</li><li>legend.text 设置图例字体</li><li>legend.title 设置图例标题</li></ul><div class="language-R line-numbers-mode" data-ext="R"><pre class="language-R"><code>## 自定义图例外框
basic + theme(
    ## 设置外框颜色
    legend.box.background = element_rect(color=&quot;red&quot;, size=2),
    ## 设置外框边距
    legend.box.margin = margin(36, 6, 6, 6)
)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/R-Study-Notes/[数据分析与可视化] 数据绘图要点/[数据分析与可视化] 数据绘图要点10-图例的构建/output_14_0.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><div class="language-R line-numbers-mode" data-ext="R"><pre class="language-R"><code>## 设置图例中每一个变量key值的展示信息
basic + theme(legend.key = element_rect(fill = &quot;blue&quot;, colour = &quot;black&quot;))
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/R-Study-Notes/[数据分析与可视化] 数据绘图要点/[数据分析与可视化] 数据绘图要点10-图例的构建/output_15_0.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><div class="language-R line-numbers-mode" data-ext="R"><pre class="language-R"><code>## 自定义图例字体颜色
basic + theme(legend.text = element_text(size = 8, colour = &quot;red&quot;))
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/R-Study-Notes/[数据分析与可视化] 数据绘图要点/[数据分析与可视化] 数据绘图要点10-图例的构建/output_16_0.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><div class="language-R line-numbers-mode" data-ext="R"><pre class="language-R"><code>## 设置图例标题
basic + theme(legend.title = element_text(face = &quot;bold&quot;,colour = &#39;red&#39;))
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/R-Study-Notes/[数据分析与可视化] 数据绘图要点/[数据分析与可视化] 数据绘图要点10-图例的构建/output_17_0.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><h2 id="参考" tabindex="-1"><a class="header-anchor" href="#参考" aria-hidden="true">#</a> 参考</h2>`,40),u={href:"https://www.r-graph-gallery.com/239-custom-layout-legend-ggplot2.html",target:"_blank",rel:"noopener noreferrer"};function g(p,h){const t=d("ExternalLinkIcon");return a(),n("div",null,[c,e("ul",null,[e("li",null,[e("a",u,[l("Building a nice legend with R and ggplot2"),s(t)])])])])}const v=i(r,[["render",g],["__file","2022-01-06-_数据分析与可视化_ 数据绘图要点10-图例的构建.html.vue"]]);export{v as default};
