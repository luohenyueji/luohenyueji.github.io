import{_ as t}from"./plugin-vue_export-helper-x3n3nnut.js";import{r as p,o,c as e,a as n,b as s,d as c,e as i}from"./app-MsA2k2kn.js";const l={},u=n("h1",{id:"seaborn-seaborn学习笔记1-箱形图boxplot",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#seaborn-seaborn学习笔记1-箱形图boxplot","aria-hidden":"true"},"#"),s(" [seaborn] seaborn学习笔记1 箱形图Boxplot")],-1),r={href:"https://github.com/luohenyueji/Python-Study-Notes/tree/master/Seaborn%20Study",target:"_blank",rel:"noopener noreferrer"},d=i(`<ol><li>基础箱形图绘制 Basic boxplot and input format</li><li>自定义外观 Custom boxplot appearance</li><li>箱型图的颜色设置 Control colors of boxplot</li><li>分组箱图 Grouped Boxplot</li><li>箱图的顺序设置 Control order of boxplot</li><li>添加散点分布 Add jitter over boxplot</li><li>显示各类的样本数 Show number of observation on boxplot</li><li>箱形图隐藏的数据处理 Hidden data under boxplot</li></ol><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment">#调用seaborn</span>
<span class="token keyword">import</span> seaborn <span class="token keyword">as</span> sns
<span class="token comment">#调用seaborn自带数据集</span>
df <span class="token operator">=</span> sns<span class="token punctuation">.</span>load_dataset<span class="token punctuation">(</span><span class="token string">&#39;iris&#39;</span><span class="token punctuation">)</span>
<span class="token comment">#显示数据集</span>
df<span class="token punctuation">.</span>head<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><table><thead><tr><th>a</th><th>sepal_length</th><th>sepal_width</th><th>petal_length</th><th>petal_width</th><th>species</th></tr></thead><tbody><tr><th>0</th><td>5.1</td><td>3.5</td><td>1.4</td><td>0.2</td><td>setosa</td></tr><tr><th>1</th><td>4.9</td><td>3.0</td><td>1.4</td><td>0.2</td><td>setosa</td></tr><tr><th>2</th><td>4.7</td><td>3.2</td><td>1.3</td><td>0.2</td><td>setosa</td></tr><tr><th>3</th><td>4.6</td><td>3.1</td><td>1.5</td><td>0.2</td><td>setosa</td></tr><tr><th>4</th><td>5.0</td><td>3.6</td><td>1.4</td><td>0.2</td><td>setosa</td></tr></tbody></table><h2 id="_1-基础箱形图绘制-basic-boxplot-and-input-format" tabindex="-1"><a class="header-anchor" href="#_1-基础箱形图绘制-basic-boxplot-and-input-format" aria-hidden="true">#</a> 1. 基础箱形图绘制 Basic boxplot and input format</h2><ul><li>一个数值变量 One numerical variable only</li><li>一个数值变量和多个分组 One numerical variable, and several groups</li><li>多个数值变量 Several numerical variable</li><li>水平箱型图 Horizontal boxplot with seaborn</li></ul><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># 一个数值变量 One numerical variable only</span>
<span class="token comment"># 如果您只有一个数字变量，则可以使用此代码获得仅包含一个组的箱线图。</span>
<span class="token comment"># Make boxplot for one group only</span>
<span class="token comment"># 显示花萼长度sepal_length</span>
sns<span class="token punctuation">.</span>boxplot<span class="token punctuation">(</span> y<span class="token operator">=</span>df<span class="token punctuation">[</span><span class="token string">&quot;sepal_length&quot;</span><span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/Python-Study-Notes/Seaborn-Study/1 箱形图BOXPLOT/output_3_0.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># 一个数值变量和多个分组 One numerical variable, and several groups</span>
<span class="token comment"># 假设我们想要研究数值变量的分布，但是对于每个组分别进行研究。在这里，我们研究了3种花的萼片长度。</span>
<span class="token comment"># x花的品种，y花萼长度</span>
sns<span class="token punctuation">.</span>boxplot<span class="token punctuation">(</span> x<span class="token operator">=</span>df<span class="token punctuation">[</span><span class="token string">&quot;species&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> y<span class="token operator">=</span>df<span class="token punctuation">[</span><span class="token string">&quot;sepal_length&quot;</span><span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/Python-Study-Notes/Seaborn-Study/1 箱形图BOXPLOT/output_4_0.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># 多个数值变量 Several numerical variable</span>
<span class="token comment"># 可以研究几个数值变量的分布，比如说萼片的长度和宽度：</span>
sns<span class="token punctuation">.</span>boxplot<span class="token punctuation">(</span>data<span class="token operator">=</span>df<span class="token punctuation">.</span>iloc<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/Python-Study-Notes/Seaborn-Study/1 箱形图BOXPLOT/output_5_0.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># 水平箱型图 Horizontal boxplot with seaborn</span>
<span class="token comment"># 用seaborn将你的箱图水平转动是非常简单的。您可以切换x和y属性，或使用选项orient =&quot;h&quot;</span>
sns<span class="token punctuation">.</span>boxplot<span class="token punctuation">(</span> y<span class="token operator">=</span>df<span class="token punctuation">[</span><span class="token string">&quot;species&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> x<span class="token operator">=</span>df<span class="token punctuation">[</span><span class="token string">&quot;sepal_length&quot;</span><span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/Python-Study-Notes/Seaborn-Study/1 箱形图BOXPLOT/output_6_0.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><h2 id="_2-自定义外观-custom-boxplot-appearance" tabindex="-1"><a class="header-anchor" href="#_2-自定义外观-custom-boxplot-appearance" aria-hidden="true">#</a> 2. 自定义外观 Custom boxplot appearance</h2><ul><li>自定义线宽 Custom line width</li><li>添加缺口 Add notch</li><li>控制箱的尺寸 Control box sizes</li></ul><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># 自定义线宽 Custom line width</span>
<span class="token comment"># Change line width</span>
<span class="token comment"># 根据linewidth改变线条宽度</span>
sns<span class="token punctuation">.</span>boxplot<span class="token punctuation">(</span> x<span class="token operator">=</span>df<span class="token punctuation">[</span><span class="token string">&quot;species&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> y<span class="token operator">=</span>df<span class="token punctuation">[</span><span class="token string">&quot;sepal_length&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> linewidth<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/Python-Study-Notes/Seaborn-Study/1 箱形图BOXPLOT/output_8_0.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># 添加缺口 Add notch</span>
<span class="token comment"># notch设置为true即可</span>
sns<span class="token punctuation">.</span>boxplot<span class="token punctuation">(</span> x<span class="token operator">=</span>df<span class="token punctuation">[</span><span class="token string">&quot;species&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> y<span class="token operator">=</span>df<span class="token punctuation">[</span><span class="token string">&quot;sepal_length&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> notch<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/Python-Study-Notes/Seaborn-Study/1 箱形图BOXPLOT/output_9_0.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># 控制箱的尺寸 Control box sizes</span>
<span class="token comment"># Change width</span>
sns<span class="token punctuation">.</span>boxplot<span class="token punctuation">(</span> x<span class="token operator">=</span>df<span class="token punctuation">[</span><span class="token string">&quot;species&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> y<span class="token operator">=</span>df<span class="token punctuation">[</span><span class="token string">&quot;sepal_length&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> width<span class="token operator">=</span><span class="token number">0.3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/Python-Study-Notes/Seaborn-Study/1 箱形图BOXPLOT/output_10_0.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><h2 id="_3-箱型图的颜色设置-control-colors-of-boxplot" tabindex="-1"><a class="header-anchor" href="#_3-箱型图的颜色设置-control-colors-of-boxplot" aria-hidden="true">#</a> 3. 箱型图的颜色设置 Control colors of boxplot</h2><ul><li>调色板的使用 Use a color palette</li><li>单种颜色的使用 Uniform color</li><li>每组的特定颜色 Specific color for each group</li><li>单组高亮 Highlight a group</li><li>添加透明色 Add transparency to color</li></ul><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># 调色板的使用 Use a color palette </span>
<span class="token comment"># Python提出了几种调色板。您可以像Set1，Set2，Set3，Paired，BuPu一样调用RColorBrewer调色板，还有Blues或BuGn_r等调色板。</span>
<span class="token comment"># 调色板各种颜色见 http://www.r-graph-gallery.com/38-rcolorbrewers-palettes/</span>
<span class="token comment"># t通过plaette调用调色板，Use a color palette</span>
sns<span class="token punctuation">.</span>boxplot<span class="token punctuation">(</span> x<span class="token operator">=</span>df<span class="token punctuation">[</span><span class="token string">&quot;species&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> y<span class="token operator">=</span>df<span class="token punctuation">[</span><span class="token string">&quot;sepal_length&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> palette<span class="token operator">=</span><span class="token string">&quot;Blues&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/Python-Study-Notes/Seaborn-Study/1 箱形图BOXPLOT/output_12_0.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># 单种颜色的使用 Uniform color</span>
<span class="token comment"># 当然您可以轻松地为每个盒子应用同样的颜色。最常见的是b: blue</span>
<span class="token comment"># 颜色列表 https://matplotlib.org/examples/color/named_colors.html</span>
sns<span class="token punctuation">.</span>boxplot<span class="token punctuation">(</span> x<span class="token operator">=</span>df<span class="token punctuation">[</span><span class="token string">&quot;species&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> y<span class="token operator">=</span>df<span class="token punctuation">[</span><span class="token string">&quot;sepal_length&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">&quot;skyblue&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/Python-Study-Notes/Seaborn-Study/1 箱形图BOXPLOT/output_13_0.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># 每组的特定颜色 Specific color for each group</span>
<span class="token comment"># 用不用颜色描绘不同种类的花</span>
my_pal <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;versicolor&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;g&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;setosa&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;virginica&quot;</span><span class="token punctuation">:</span><span class="token string">&quot;m&quot;</span><span class="token punctuation">}</span>
sns<span class="token punctuation">.</span>boxplot<span class="token punctuation">(</span> x<span class="token operator">=</span>df<span class="token punctuation">[</span><span class="token string">&quot;species&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> y<span class="token operator">=</span>df<span class="token punctuation">[</span><span class="token string">&quot;sepal_length&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> palette<span class="token operator">=</span>my_pal<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/Python-Study-Notes/Seaborn-Study/1 箱形图BOXPLOT/output_14_0.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># 单组高亮 Highlight a group</span>
<span class="token comment"># 设定某一组为红色，其他组为蓝色</span>
my_pal <span class="token operator">=</span> <span class="token punctuation">{</span>species<span class="token punctuation">:</span> <span class="token string">&quot;r&quot;</span> <span class="token keyword">if</span> species <span class="token operator">==</span> <span class="token string">&quot;versicolor&quot;</span> <span class="token keyword">else</span> <span class="token string">&quot;b&quot;</span> <span class="token keyword">for</span> species <span class="token keyword">in</span> df<span class="token punctuation">.</span>species<span class="token punctuation">.</span>unique<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
sns<span class="token punctuation">.</span>boxplot<span class="token punctuation">(</span> x<span class="token operator">=</span>df<span class="token punctuation">[</span><span class="token string">&quot;species&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> y<span class="token operator">=</span>df<span class="token punctuation">[</span><span class="token string">&quot;sepal_length&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> palette<span class="token operator">=</span>my_pal<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/Python-Study-Notes/Seaborn-Study/1 箱形图BOXPLOT/output_15_0.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># 添加透明色 Add transparency to color</span>
<span class="token comment"># usual boxplot 正常绘图</span>
ax <span class="token operator">=</span> sns<span class="token punctuation">.</span>boxplot<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token string">&#39;species&#39;</span><span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token string">&#39;sepal_length&#39;</span><span class="token punctuation">,</span> data<span class="token operator">=</span>df<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment"># Add transparency to colors 设置透明色</span>
<span class="token keyword">for</span> patch <span class="token keyword">in</span> ax<span class="token punctuation">.</span>artists<span class="token punctuation">:</span>
    r<span class="token punctuation">,</span> g<span class="token punctuation">,</span> b<span class="token punctuation">,</span> a <span class="token operator">=</span> patch<span class="token punctuation">.</span>get_facecolor<span class="token punctuation">(</span><span class="token punctuation">)</span>
    patch<span class="token punctuation">.</span>set_facecolor<span class="token punctuation">(</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span> g<span class="token punctuation">,</span> b<span class="token punctuation">,</span> <span class="token number">.3</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/Python-Study-Notes/Seaborn-Study/1 箱形图BOXPLOT/output_16_0.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><h2 id="_4-分组箱图-grouped-boxplot" tabindex="-1"><a class="header-anchor" href="#_4-分组箱图-grouped-boxplot" aria-hidden="true">#</a> 4. 分组箱图 Grouped Boxplot</h2><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># 当您有一个数值变量，几个组和子组时，将使用分组箱图。使用seaborn很容易实现。Y是您的数字变量，x是组列，而hue是子组列。</span>
<span class="token comment"># 调用tips数据集</span>
df_tips <span class="token operator">=</span> sns<span class="token punctuation">.</span>load_dataset<span class="token punctuation">(</span><span class="token string">&#39;tips&#39;</span><span class="token punctuation">)</span>
df_tips<span class="token punctuation">.</span>head<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div><table border="1" class="dataframe"><thead><tr style="text-align:right;"><th></th><th>total_bill</th><th>tip</th><th>sex</th><th>smoker</th><th>day</th><th>time</th><th>size</th></tr></thead><tbody><tr><th>0</th><td>16.99</td><td>1.01</td><td>Female</td><td>No</td><td>Sun</td><td>Dinner</td><td>2</td></tr><tr><th>1</th><td>10.34</td><td>1.66</td><td>Male</td><td>No</td><td>Sun</td><td>Dinner</td><td>3</td></tr><tr><th>2</th><td>21.01</td><td>3.50</td><td>Male</td><td>No</td><td>Sun</td><td>Dinner</td><td>3</td></tr><tr><th>3</th><td>23.68</td><td>3.31</td><td>Male</td><td>No</td><td>Sun</td><td>Dinner</td><td>2</td></tr><tr><th>4</th><td>24.59</td><td>3.61</td><td>Female</td><td>No</td><td>Sun</td><td>Dinner</td><td>4</td></tr></tbody></table></div><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># Grouped boxplot 分组箱图</span>
<span class="token comment"># x日期，y餐费，hue自组列，palette调色盘</span>
sns<span class="token punctuation">.</span>boxplot<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token string">&quot;day&quot;</span><span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token string">&quot;total_bill&quot;</span><span class="token punctuation">,</span> hue<span class="token operator">=</span><span class="token string">&quot;smoker&quot;</span><span class="token punctuation">,</span> data<span class="token operator">=</span>df_tips<span class="token punctuation">,</span> palette<span class="token operator">=</span><span class="token string">&quot;Set1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/Python-Study-Notes/Seaborn-Study/1 箱形图BOXPLOT/output_19_0.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><h2 id="_5-箱图的顺序设置-control-order-of-boxplot" tabindex="-1"><a class="header-anchor" href="#_5-箱图的顺序设置-control-order-of-boxplot" aria-hidden="true">#</a> 5. 箱图的顺序设置 Control order of boxplot</h2><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment">#如果您按特定顺序设定组，则箱图通常会提供更多信息。这对seaborn来说是可行的。 </span>
<span class="token comment"># specific order 通过order自定义组</span>
p1<span class="token operator">=</span>sns<span class="token punctuation">.</span>boxplot<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token string">&#39;species&#39;</span><span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token string">&#39;sepal_length&#39;</span><span class="token punctuation">,</span> data<span class="token operator">=</span>df<span class="token punctuation">,</span> order<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">&quot;virginica&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;versicolor&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;setosa&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/Python-Study-Notes/Seaborn-Study/1 箱形图BOXPLOT/output_21_0.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># 中位数由大到小排列</span>
<span class="token comment"># Find the order 设定中位数</span>
my_order <span class="token operator">=</span> df<span class="token punctuation">.</span>groupby<span class="token punctuation">(</span>by<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">&quot;species&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">&quot;sepal_length&quot;</span><span class="token punctuation">]</span><span class="token punctuation">.</span>median<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>iloc<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>index
<span class="token comment"># Give it to the boxplot</span>
sns<span class="token punctuation">.</span>boxplot<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token string">&#39;species&#39;</span><span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token string">&#39;sepal_length&#39;</span><span class="token punctuation">,</span> data<span class="token operator">=</span>df<span class="token punctuation">,</span> order<span class="token operator">=</span>my_order<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/Python-Study-Notes/Seaborn-Study/1 箱形图BOXPLOT/output_22_0.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><h2 id="_6-添加散点分布-add-jitter-over-boxplot" tabindex="-1"><a class="header-anchor" href="#_6-添加散点分布-add-jitter-over-boxplot" aria-hidden="true">#</a> 6. 添加散点分布 Add jitter over boxplot</h2><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># 可以在箱线图上添加每种类别的散点分布情况</span>
<span class="token comment"># Usual boxplot 正常绘图</span>
ax <span class="token operator">=</span> sns<span class="token punctuation">.</span>boxplot<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token string">&#39;species&#39;</span><span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token string">&#39;sepal_length&#39;</span><span class="token punctuation">,</span> data<span class="token operator">=</span>df<span class="token punctuation">)</span>
<span class="token comment"># Add jitter with the swarmplot function 添加散点分布</span>
ax <span class="token operator">=</span> sns<span class="token punctuation">.</span>swarmplot<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token string">&#39;species&#39;</span><span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token string">&#39;sepal_length&#39;</span><span class="token punctuation">,</span> data<span class="token operator">=</span>df<span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">&quot;grey&quot;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/Python-Study-Notes/Seaborn-Study/1 箱形图BOXPLOT/output_24_0.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><h2 id="_7-显示各类的样本数-show-number-of-observation-on-boxplot" tabindex="-1"><a class="header-anchor" href="#_7-显示各类的样本数-show-number-of-observation-on-boxplot" aria-hidden="true">#</a> 7. 显示各类的样本数 Show number of observation on boxplot</h2><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># 显示每个组的观察次数可能很有用</span>

<span class="token comment"># 基础的箱形图</span>
ax <span class="token operator">=</span> sns<span class="token punctuation">.</span>boxplot<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token string">&quot;species&quot;</span><span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token string">&quot;sepal_length&quot;</span><span class="token punctuation">,</span> data<span class="token operator">=</span>df<span class="token punctuation">)</span>
 
<span class="token comment"># Calculate number of obs per group &amp; median to position labels </span>
<span class="token comment"># 计算各个种类的中位数</span>
medians <span class="token operator">=</span> df<span class="token punctuation">.</span>groupby<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#39;species&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">&#39;sepal_length&#39;</span><span class="token punctuation">]</span><span class="token punctuation">.</span>median<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>values
<span class="token comment"># 统计各个种类的样本数</span>
nobs <span class="token operator">=</span> df<span class="token punctuation">[</span><span class="token string">&#39;species&#39;</span><span class="token punctuation">]</span><span class="token punctuation">.</span>value_counts<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>values
nobs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token builtin">str</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token keyword">for</span> x <span class="token keyword">in</span> nobs<span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
nobs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;n: &quot;</span> <span class="token operator">+</span> i <span class="token keyword">for</span> i <span class="token keyword">in</span> nobs<span class="token punctuation">]</span>
 
<span class="token comment"># Add it to the plot </span>
pos <span class="token operator">=</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>nobs<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> tick<span class="token punctuation">,</span>label <span class="token keyword">in</span> <span class="token builtin">zip</span><span class="token punctuation">(</span>pos<span class="token punctuation">,</span>ax<span class="token punctuation">.</span>get_xticklabels<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    ax<span class="token punctuation">.</span>text<span class="token punctuation">(</span>pos<span class="token punctuation">[</span>tick<span class="token punctuation">]</span><span class="token punctuation">,</span> medians<span class="token punctuation">[</span>tick<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">0.03</span><span class="token punctuation">,</span> nobs<span class="token punctuation">[</span>tick<span class="token punctuation">]</span><span class="token punctuation">,</span> horizontalalignment<span class="token operator">=</span><span class="token string">&#39;center&#39;</span><span class="token punctuation">,</span> size<span class="token operator">=</span><span class="token string">&#39;x-small&#39;</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">&#39;w&#39;</span><span class="token punctuation">,</span> weight<span class="token operator">=</span><span class="token string">&#39;semibold&#39;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/Python-Study-Notes/Seaborn-Study/1 箱形图BOXPLOT/output_26_0.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><h2 id="_8-箱形图隐藏的数据处理-hidden-data-under-boxplot" tabindex="-1"><a class="header-anchor" href="#_8-箱形图隐藏的数据处理-hidden-data-under-boxplot" aria-hidden="true">#</a> 8. 箱形图隐藏的数据处理 Hidden data under boxplot</h2><ul><li>添加分布散点图 boxplot with jitter</li><li>使用小提琴图 use violinplot</li></ul><p>箱形图总结了几个组的数值变量的分布。但是箱形图的问题不仅是丢失信息，这可能会结果有偏差。如果我们考虑下面的箱形图，很容易得出结论，&#39;C&#39;组的价值高于其他组。但是，我们无法看到每个组中点的基本分布是什么，也没有观察每个组的观察次数。所以我们需要对隐藏的数据进行处理</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># libraries and data</span>
<span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt
<span class="token comment"># Dataset:</span>
a <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&#39;group&#39;</span> <span class="token punctuation">:</span> np<span class="token punctuation">.</span>repeat<span class="token punctuation">(</span><span class="token string">&#39;A&#39;</span><span class="token punctuation">,</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&#39;value&#39;</span><span class="token punctuation">:</span> np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>normal<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
b <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&#39;group&#39;</span> <span class="token punctuation">:</span> np<span class="token punctuation">.</span>repeat<span class="token punctuation">(</span><span class="token string">&#39;B&#39;</span><span class="token punctuation">,</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&#39;value&#39;</span><span class="token punctuation">:</span> np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>normal<span class="token punctuation">(</span><span class="token number">13</span><span class="token punctuation">,</span> <span class="token number">1.2</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
c <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&#39;group&#39;</span> <span class="token punctuation">:</span> np<span class="token punctuation">.</span>repeat<span class="token punctuation">(</span><span class="token string">&#39;B&#39;</span><span class="token punctuation">,</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&#39;value&#39;</span><span class="token punctuation">:</span> np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>normal<span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">,</span> <span class="token number">1.2</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
d <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&#39;group&#39;</span> <span class="token punctuation">:</span> np<span class="token punctuation">.</span>repeat<span class="token punctuation">(</span><span class="token string">&#39;C&#39;</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&#39;value&#39;</span><span class="token punctuation">:</span> np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>normal<span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
e <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&#39;group&#39;</span> <span class="token punctuation">:</span> np<span class="token punctuation">.</span>repeat<span class="token punctuation">(</span><span class="token string">&#39;D&#39;</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&#39;value&#39;</span><span class="token punctuation">:</span> np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>uniform<span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">,</span> size<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
df<span class="token operator">=</span>a<span class="token punctuation">.</span>append<span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span>e<span class="token punctuation">)</span>
 
<span class="token comment"># Usual boxplot</span>
sns<span class="token punctuation">.</span>boxplot<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token string">&#39;group&#39;</span><span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token string">&#39;value&#39;</span><span class="token punctuation">,</span> data<span class="token operator">=</span>df<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/Python-Study-Notes/Seaborn-Study/1 箱形图BOXPLOT/output_29_0.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># 添加分布散点图 boxplot with jitter</span>
ax <span class="token operator">=</span> sns<span class="token punctuation">.</span>boxplot<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token string">&#39;group&#39;</span><span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token string">&#39;value&#39;</span><span class="token punctuation">,</span> data<span class="token operator">=</span>df<span class="token punctuation">)</span>
<span class="token comment"># 通过stripplot添加分布散点图，jitter设置数据间距</span>
ax <span class="token operator">=</span> sns<span class="token punctuation">.</span>stripplot<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token string">&#39;group&#39;</span><span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token string">&#39;value&#39;</span><span class="token punctuation">,</span> data<span class="token operator">=</span>df<span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">&quot;orange&quot;</span><span class="token punctuation">,</span> jitter<span class="token operator">=</span><span class="token number">0.2</span><span class="token punctuation">,</span> size<span class="token operator">=</span><span class="token number">2.5</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">&quot;Boxplot with jitter&quot;</span><span class="token punctuation">,</span> loc<span class="token operator">=</span><span class="token string">&quot;left&quot;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><pre><code>Text(0.0, 1.0, &#39;Boxplot with jitter&#39;)
</code></pre><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/Python-Study-Notes/Seaborn-Study/1 箱形图BOXPLOT/output_30_1.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># 使用小提琴图 use violinplot</span>
sns<span class="token punctuation">.</span>violinplot<span class="token punctuation">(</span> x<span class="token operator">=</span><span class="token string">&#39;group&#39;</span><span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token string">&#39;value&#39;</span><span class="token punctuation">,</span> data<span class="token operator">=</span>df<span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">&quot;Violin plot&quot;</span><span class="token punctuation">,</span> loc<span class="token operator">=</span><span class="token string">&quot;left&quot;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><pre><code>Text(0.0, 1.0, &#39;Violin plot&#39;)
</code></pre><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/Python-Study-Notes/Seaborn-Study/1 箱形图BOXPLOT/output_31_2.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure>`,60);function k(m,g){const a=p("ExternalLinkIcon");return o(),e("div",null,[u,n("p",null,[n("a",r,[s("(代码下载)"),c(a)]),s(" Boxplot可能是最常见的图形类型之一。它能够很好表示数据中的分布规律。箱型图方框的末尾显示了上下四分位数。极线显示最高和最低值，不包括异常值。seaborn中用boxplot函数制作箱形图。该章节主要内容有：")]),d])}const h=t(l,[["render",k],["__file","2019-05-29-_seaborn_ seaborn学习笔记1 箱形图Boxplot.html.vue"]]);export{h as default};
