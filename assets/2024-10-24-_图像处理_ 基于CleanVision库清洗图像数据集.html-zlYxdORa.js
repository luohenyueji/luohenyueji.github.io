import{_ as s,c as a,a as e,o as t}from"./app-B1QbUTkN.js";const n={};function l(h,i){return t(),a("div",null,i[0]||(i[0]=[e(`<h1 id="图像处理-基于cleanvision库清洗图像数据集" tabindex="-1"><a class="header-anchor" href="#图像处理-基于cleanvision库清洗图像数据集"><span>[图像处理] 基于CleanVision库清洗图像数据集</span></a></h1><p>CleanVision是一个开源的Python库，旨在帮助用户自动检测图像数据集中可能影响机器学习项目的常见问题。该库被设计为计算机视觉项目的初步工具，以便在应用机器学习之前发现并解决数据集中的问题。CleanVision的核心功能包括检测完全重复、近似重复、模糊、低信息量、过暗、过亮、灰度、不规则长宽比和尺寸异常等问题图片。CleanVision开源仓库地址为：<a href="https://github.com/cleanlab/cleanvision" target="_blank" rel="noopener noreferrer">CleanVision</a>，官方文档地址为：<a href="https://cleanvision.readthedocs.io/en/latest/" target="_blank" rel="noopener noreferrer">CleanVision-docs</a>。</p><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/CSDN/[图像处理] 基于CleanVision库清洗图像数据集/imgs/introduce.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>CleanVision基础版安装命令如下：</p><blockquote><p>pip install cleanvision</p></blockquote><p>完整版安装命令如下：</p><blockquote><p>pip install &quot;cleanvision[all]&quot;</p></blockquote><p>查看CleanVision版本：</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" data-title="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 查看版本</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> cleanvision</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">cleanvision.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">__version__</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><pre><code>&#39;0.3.6&#39;
</code></pre><p>本文代码必要库版本：</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" data-title="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 用于表格显示</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> tabulate</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># tabulate版本需要0.8.10以上</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">tabulate.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">__version__</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><pre><code>&#39;0.9.0&#39;
</code></pre><h2 id="_1-使用说明" tabindex="-1"><a class="header-anchor" href="#_1-使用说明"><span>1 使用说明</span></a></h2><h3 id="_1-1-cleanvision功能介绍" tabindex="-1"><a class="header-anchor" href="#_1-1-cleanvision功能介绍"><span>1.1 CleanVision功能介绍</span></a></h3><p>CleanVision支持多种<a href="https://pillow.readthedocs.io/en/stable/handbook/image-file-formats.html" target="_blank" rel="noopener noreferrer">格式</a>的图像文件，并能检测以下类型的数据问题：</p><table><thead><tr><th>示例图片</th><th>问题类型</th><th>描述</th><th>关键字</th></tr></thead><tbody><tr><td><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/CSDN/[图像处理] 基于CleanVision库清洗图像数据集/imgs/exact_duplicates.png" alt="" loading="lazy"></td><td>完全重复</td><td>完全相同的图像</td><td>exact_duplicates</td></tr><tr><td><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/CSDN/[图像处理] 基于CleanVision库清洗图像数据集/imgs/near_duplicates.png" alt="" loading="lazy"></td><td>近似重复</td><td>视觉上几乎相同的图像</td><td>near_duplicates</td></tr><tr><td><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/CSDN/[图像处理] 基于CleanVision库清洗图像数据集/imgs/blurry.png" alt="" loading="lazy"></td><td>模糊</td><td>图像细节模糊（焦点不实）</td><td>blurry</td></tr><tr><td><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/CSDN/[图像处理] 基于CleanVision库清洗图像数据集/imgs/low_information.png" alt="" loading="lazy"></td><td>信息量低</td><td>缺乏内容的图像（像素值的熵很小）</td><td>low_information</td></tr><tr><td><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/CSDN/[图像处理] 基于CleanVision库清洗图像数据集/imgs/dark.jpg" alt="" loading="lazy"></td><td>过暗</td><td>不规则的暗图像（曝光不足）</td><td>dark</td></tr><tr><td><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/CSDN/[图像处理] 基于CleanVision库清洗图像数据集/imgs/light.jpg" alt="" loading="lazy"></td><td>过亮</td><td>不规则的亮图像（曝光过度）</td><td>light</td></tr><tr><td><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/CSDN/[图像处理] 基于CleanVision库清洗图像数据集/imgs/grayscale.jpg" alt="" loading="lazy"></td><td>灰度</td><td>缺乏颜色的图像</td><td>grayscale</td></tr><tr><td><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/CSDN/[图像处理] 基于CleanVision库清洗图像数据集/imgs/odd_aspect_ratio.jpg" alt="" loading="lazy"></td><td>异常宽高比</td><td>宽高比异常的图像</td><td>odd_aspect_ratio</td></tr><tr><td><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/CSDN/[图像处理] 基于CleanVision库清洗图像数据集/imgs/odd_size.png" alt="" loading="lazy"></td><td>异常大小</td><td>相比数据集中其他图像，尺寸异常的图像</td><td>odd_size</td></tr></tbody></table><p>上表中，CleanVision针对这些问题的检测主要依赖于多种统计方法，其中关键字列表用于指定CleanVision代码中每种问题类型的名称。CleanVision兼容Linux、macOS和Windows系统，可在Python 3.7及以上版本的环境中运行。</p><h3 id="_1-2-基础使用" tabindex="-1"><a class="header-anchor" href="#_1-2-基础使用"><span>1.2 基础使用</span></a></h3><p>本节介绍如何读取文件夹中的图片以进行问题检测。以下示例展示了对一个包含607张图片的文件夹进行质量检测的过程。在检测过程中，CleanVision将自动加载多进程以加快处理速度：</p><p><strong>基础使用</strong></p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" data-title="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> cleanvision </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> Imagelab</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 示例数据：https://cleanlab-public.s3.amazonaws.com/CleanVision/image_files.zip</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 读取示例图片</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">dataset_path </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;./image_files/&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 实例化Imagelab类，以用于后续处理</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">imagelab </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;"> Imagelab</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">data_path</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">dataset_path)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 使用multiprocessing进行多进程处理，n_jobs设置进程数</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># n_jobs默认为None，表示自动确定进程数</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 处理时会先检测每张图片的image_property（图像质量）</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 等所有图片处理完后，再检测duplicate（重复）</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">imagelab.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">find_issues</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">verbose</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">False</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">n_jobs</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><pre><code>Reading images from D:/cleanvision/image_files
</code></pre><p>如果在Windows系统上运行CleanVision代码，需要将相关代码放入main函数中，以便正确加载multiprocessing模块。当然，也可以将n_jobs设置为1，以使用单进程：</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" data-title="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> cleanvision </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> Imagelab</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">if</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;__main__&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> ==</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> __name__</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    # 示例数据：https://cleanlab-public.s3.amazonaws.com/CleanVision/image_files.zip</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    # 读取示例图片</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    dataset_path </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;./image_files/&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    imagelab </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;"> Imagelab</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">data_path</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">dataset_path)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    imagelab.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">find_issues</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">verbose</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">False</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><pre><code>Reading images from D:/cleanvision/image_files
</code></pre><p>基于report函数，能够报告数据集中每种问题类型的图像数量，并展示每种问题类型中最严重实例的图像：</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" data-title="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">imagelab.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">report</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><pre><code>Issues found in images in order of severity in the dataset

|    | issue_type       |   num_images |
|---:|:-----------------|-------------:|
|  0 | odd_size         |          109 |
|  1 | grayscale        |           20 |
|  2 | near_duplicates  |           20 |
|  3 | exact_duplicates |           19 |
|  4 | odd_aspect_ratio |           11 |
|  5 | dark             |           10 |
|  6 | blurry           |            6 |
|  7 | light            |            5 |
|  8 | low_information  |            5 | 

--------------------- odd_size images ----------------------

Number of examples with this issue: 109
Examples representing most severe instances of this issue:
</code></pre><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/CSDN/[图像处理] 基于CleanVision库清洗图像数据集/output_13_1.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><pre><code>--------------------- grayscale images ---------------------

Number of examples with this issue: 20
Examples representing most severe instances of this issue:
</code></pre><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/CSDN/[图像处理] 基于CleanVision库清洗图像数据集/output_13_3.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><pre><code>------------------ near_duplicates images ------------------

Number of examples with this issue: 20
Examples representing most severe instances of this issue:

Set: 0
</code></pre><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/CSDN/[图像处理] 基于CleanVision库清洗图像数据集/output_13_5.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><pre><code>Set: 1
</code></pre><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/CSDN/[图像处理] 基于CleanVision库清洗图像数据集/output_13_7.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><pre><code>Set: 2
</code></pre><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/CSDN/[图像处理] 基于CleanVision库清洗图像数据集/output_13_9.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><pre><code>Set: 3
</code></pre><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/CSDN/[图像处理] 基于CleanVision库清洗图像数据集/output_13_11.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><pre><code>----------------- exact_duplicates images ------------------

Number of examples with this issue: 19
Examples representing most severe instances of this issue:

Set: 0
</code></pre><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/CSDN/[图像处理] 基于CleanVision库清洗图像数据集/output_13_13.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><pre><code>Set: 1
</code></pre><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/CSDN/[图像处理] 基于CleanVision库清洗图像数据集/output_13_15.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><pre><code>Set: 2
</code></pre><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/CSDN/[图像处理] 基于CleanVision库清洗图像数据集/output_13_17.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><pre><code>Set: 3
</code></pre><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/CSDN/[图像处理] 基于CleanVision库清洗图像数据集/output_13_19.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><pre><code>----------------- odd_aspect_ratio images ------------------

Number of examples with this issue: 11
Examples representing most severe instances of this issue:
</code></pre><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/CSDN/[图像处理] 基于CleanVision库清洗图像数据集/output_13_21.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><pre><code>----------------------- dark images ------------------------

Number of examples with this issue: 10
Examples representing most severe instances of this issue:
</code></pre><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/CSDN/[图像处理] 基于CleanVision库清洗图像数据集/output_13_23.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><pre><code>---------------------- blurry images -----------------------

Number of examples with this issue: 6
Examples representing most severe instances of this issue:
</code></pre><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/CSDN/[图像处理] 基于CleanVision库清洗图像数据集/output_13_25.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><pre><code>----------------------- light images -----------------------

Number of examples with this issue: 5
Examples representing most severe instances of this issue:
</code></pre><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/CSDN/[图像处理] 基于CleanVision库清洗图像数据集/output_13_27.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><pre><code>------------------ low_information images ------------------

Number of examples with this issue: 5
Examples representing most severe instances of this issue:
</code></pre><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/CSDN/[图像处理] 基于CleanVision库清洗图像数据集/output_13_29.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><p>如果想创建自定义的问题识别类型，可以参考：<a href="https://cleanvision.readthedocs.io/en/latest/tutorials/tutorial.html#Advanced:-Create-your-own-issue-type" target="_blank" rel="noopener noreferrer">custom_issue_manager</a>。</p><p>与数据结果交互的主要方式是通过Imagelab类。此类可用于在宏观层面（全局概览）和微观层面（每张图片的问题和质量评分）了解数据集中的问题。它包含三个主要属性：</p><ul><li>Imagelab.issue_summary：问题摘要</li><li>Imagelab.issues：问题列表</li><li>Imagelab.info：数据集信息，包括相似图片信息</li></ul><p><strong>问题结果分析</strong></p><p>通过issue_summary属性可以展示数据集中不同问题类别的图像数量：</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" data-title="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 返回结果为pandas的dataframe</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">res </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> imagelab.issue_summary</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">type</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(res)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><pre><code>pandas.core.frame.DataFrame
</code></pre><p>查看汇总结果：</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" data-title="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">res</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div><table border="1" class="dataframe"><thead><tr style="text-align:right;"><th></th><th>issue_type</th><th>num_images</th></tr></thead><tbody><tr><th>0</th><td>odd_size</td><td>109</td></tr><tr><th>1</th><td>grayscale</td><td>20</td></tr><tr><th>2</th><td>near_duplicates</td><td>20</td></tr><tr><th>3</th><td>exact_duplicates</td><td>19</td></tr><tr><th>4</th><td>odd_aspect_ratio</td><td>11</td></tr><tr><th>5</th><td>dark</td><td>10</td></tr><tr><th>6</th><td>blurry</td><td>6</td></tr><tr><th>7</th><td>light</td><td>5</td></tr><tr><th>8</th><td>low_information</td><td>5</td></tr></tbody></table></div><p>通过issues属性，可以展示每张图片中各种问题的质量分数及其存在情况。这些质量分数的范围从0到1，较低的分数表示问题的严重性更高：</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" data-title="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">imagelab.issues.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">head</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div><table border="1" class="dataframe"><thead><tr style="text-align:right;"><th></th><th>odd_size_score</th><th>is_odd_size_issue</th><th>odd_aspect_ratio_score</th><th>is_odd_aspect_ratio_issue</th><th>low_information_score</th><th>is_low_information_issue</th><th>light_score</th><th>is_light_issue</th><th>grayscale_score</th><th>is_grayscale_issue</th><th>dark_score</th><th>is_dark_issue</th><th>blurry_score</th><th>is_blurry_issue</th><th>exact_duplicates_score</th><th>is_exact_duplicates_issue</th><th>near_duplicates_score</th><th>is_near_duplicates_issue</th></tr></thead><tbody><tr><th>D:/cleanvision/image_files/image_0.png</th><td>1.0</td><td>False</td><td>1.0</td><td>False</td><td>0.806332</td><td>False</td><td>0.925490</td><td>False</td><td>1</td><td>False</td><td>1.000000</td><td>False</td><td>0.980373</td><td>False</td><td>1.0</td><td>False</td><td>1.0</td><td>False</td></tr><tr><th>D:/cleanvision/image_files/image_1.png</th><td>1.0</td><td>False</td><td>1.0</td><td>False</td><td>0.923116</td><td>False</td><td>0.906609</td><td>False</td><td>1</td><td>False</td><td>0.990676</td><td>False</td><td>0.472314</td><td>False</td><td>1.0</td><td>False</td><td>1.0</td><td>False</td></tr><tr><th>D:/cleanvision/image_files/image_10.png</th><td>1.0</td><td>False</td><td>1.0</td><td>False</td><td>0.875129</td><td>False</td><td>0.995127</td><td>False</td><td>1</td><td>False</td><td>0.795937</td><td>False</td><td>0.470706</td><td>False</td><td>1.0</td><td>False</td><td>1.0</td><td>False</td></tr><tr><th>D:/cleanvision/image_files/image_100.png</th><td>1.0</td><td>False</td><td>1.0</td><td>False</td><td>0.916140</td><td>False</td><td>0.889762</td><td>False</td><td>1</td><td>False</td><td>0.827587</td><td>False</td><td>0.441195</td><td>False</td><td>1.0</td><td>False</td><td>1.0</td><td>False</td></tr><tr><th>D:/cleanvision/image_files/image_101.png</th><td>1.0</td><td>False</td><td>1.0</td><td>False</td><td>0.779338</td><td>False</td><td>0.960784</td><td>False</td><td>0</td><td>True</td><td>0.992157</td><td>False</td><td>0.507767</td><td>False</td><td>1.0</td><td>False</td><td>1.0</td><td>False</td></tr></tbody></table></div><p>由于imagelab.issues返回的是Pandas的数据表格，因此可以对特定类型的数据进行筛选：</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" data-title="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 得分越小，越严重</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">dark_images </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> imagelab.issues[imagelab.issues[</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;is_dark_issue&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">] </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">==</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> True</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">].</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">sort_values</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">    by</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;dark_score&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">dark_images_files </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> dark_images.index.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">tolist</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">dark_images_files</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><pre><code>[&#39;D:/cleanvision/image_files/image_417.png&#39;,
 &#39;D:/cleanvision/image_files/image_350.png&#39;,
 &#39;D:/cleanvision/image_files/image_605.png&#39;,
 &#39;D:/cleanvision/image_files/image_177.png&#39;,
 &#39;D:/cleanvision/image_files/image_346.png&#39;,
 &#39;D:/cleanvision/image_files/image_198.png&#39;,
 &#39;D:/cleanvision/image_files/image_204.png&#39;,
 &#39;D:/cleanvision/image_files/image_485.png&#39;,
 &#39;D:/cleanvision/image_files/image_457.png&#39;,
 &#39;D:/cleanvision/image_files/image_576.png&#39;]
</code></pre><p>可视化其中的问题图片：</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" data-title="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">imagelab.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">visualize</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">image_files</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">dark_images_files[:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">4</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">])</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/CSDN/[图像处理] 基于CleanVision库清洗图像数据集/output_25_0.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><p>完成上述任务的更简洁方法是直接在imagelab.visualize函数中指定issue_types参数，这样可以直接显示某个问题下的图片，并按严重程度对其进行排序展示：</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" data-title="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># issue_types：问题类型，num_images：显示图片数，cell_size：每个网格中图片尺寸</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">imagelab.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">visualize</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">issue_types</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;low_information&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">], </span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">num_images</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">3</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">cell_size</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">3</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">3</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">))</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/CSDN/[图像处理] 基于CleanVision库清洗图像数据集/output_27_0.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><p><strong>查看图片信息和相似图片</strong></p><p>通过info属性可以查看数据集的信息：</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" data-title="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 查看存在的项目</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">imagelab.info.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">keys</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><pre><code>dict_keys([&#39;statistics&#39;, &#39;dark&#39;, &#39;light&#39;, &#39;odd_aspect_ratio&#39;, &#39;low_information&#39;, &#39;blurry&#39;, &#39;grayscale&#39;, &#39;odd_size&#39;, &#39;exact_duplicates&#39;, &#39;near_duplicates&#39;])
</code></pre><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" data-title="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 查看统计信息</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">imagelab.info[</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;statistics&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">].</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">keys</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><pre><code>dict_keys([&#39;brightness&#39;, &#39;aspect_ratio&#39;, &#39;entropy&#39;, &#39;blurriness&#39;, &#39;color_space&#39;, &#39;size&#39;])
</code></pre><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" data-title="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 查看数据集的统计信息</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">imagelab.info[</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;statistics&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">][</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;size&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><pre><code>count     607.000000
mean      280.830152
std       215.001908
min        32.000000
25%       256.000000
50%       256.000000
75%       256.000000
max      4666.050578
Name: size, dtype: float64
</code></pre><p>查看数据集中基本相似的图片个数：</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" data-title="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">imagelab.info[</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;exact_duplicates&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">][</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;num_sets&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><pre><code>9
</code></pre><p>查看数据集中近似的图片对：</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" data-title="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">imagelab.info[</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;near_duplicates&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">][</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;sets&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><pre><code>[[&#39;D:/cleanvision/image_files/image_103.png&#39;,
  &#39;D:/cleanvision/image_files/image_408.png&#39;],
 [&#39;D:/cleanvision/image_files/image_109.png&#39;,
  &#39;D:/cleanvision/image_files/image_329.png&#39;],
 [&#39;D:/cleanvision/image_files/image_119.png&#39;,
  &#39;D:/cleanvision/image_files/image_250.png&#39;],
 [&#39;D:/cleanvision/image_files/image_140.png&#39;,
  &#39;D:/cleanvision/image_files/image_538.png&#39;],
 [&#39;D:/cleanvision/image_files/image_25.png&#39;,
  &#39;D:/cleanvision/image_files/image_357.png&#39;],
 [&#39;D:/cleanvision/image_files/image_255.png&#39;,
  &#39;D:/cleanvision/image_files/image_43.png&#39;],
 [&#39;D:/cleanvision/image_files/image_263.png&#39;,
  &#39;D:/cleanvision/image_files/image_486.png&#39;],
 [&#39;D:/cleanvision/image_files/image_3.png&#39;,
  &#39;D:/cleanvision/image_files/image_64.png&#39;],
 [&#39;D:/cleanvision/image_files/image_389.png&#39;,
  &#39;D:/cleanvision/image_files/image_426.png&#39;],
 [&#39;D:/cleanvision/image_files/image_52.png&#39;,
  &#39;D:/cleanvision/image_files/image_66.png&#39;]]
</code></pre><h3 id="_1-3-自定义检测" tabindex="-1"><a class="header-anchor" href="#_1-3-自定义检测"><span>1.3 自定义检测</span></a></h3><p><strong>指定检测类型</strong></p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" data-title="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> cleanvision </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> Imagelab</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 示例数据：https://cleanlab-public.s3.amazonaws.com/CleanVision/image_files.zip</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">dataset_path </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;./image_files/&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 指定检测类型</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">issue_types </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;blurry&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:{}, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;dark&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: {}}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">imagelab </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;"> Imagelab</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">data_path</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">dataset_path)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">imagelab.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">find_issues</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">issue_types</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">issue_types, </span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">verbose</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">False</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">imagelab.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">report</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><pre><code>Reading images from D:/cleanvision/image_files


Issues found in images in order of severity in the dataset

|    | issue_type   |   num_images |
|---:|:-------------|-------------:|
|  0 | dark         |           10 |
|  1 | blurry       |            6 | 

----------------------- dark images ------------------------

Number of examples with this issue: 10
Examples representing most severe instances of this issue:
</code></pre><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/CSDN/[图像处理] 基于CleanVision库清洗图像数据集/output_39_3.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><pre><code>---------------------- blurry images -----------------------

Number of examples with this issue: 6
Examples representing most severe instances of this issue:
</code></pre><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/CSDN/[图像处理] 基于CleanVision库清洗图像数据集/output_39_5.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><p>如果已经运行过find_issues函数，再次运行该函数时如果添加新的检测类型，当前结果将会与上一次的结果合并：</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" data-title="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">issue_types </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;light&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: {}}</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">imagelab.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">find_issues</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(issue_types)</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 报告三个类型的结果</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">imagelab.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">report</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><pre><code>Checking for light images ...
Issue checks completed. 21 issues found in the dataset. To see a detailed report of issues found, use imagelab.report().
Issues found in images in order of severity in the dataset

|    | issue_type   |   num_images |
|---:|:-------------|-------------:|
|  0 | dark         |           10 |
|  1 | blurry       |            6 |
|  2 | light        |            5 | 

----------------------- dark images ------------------------

Number of examples with this issue: 10
Examples representing most severe instances of this issue:
</code></pre><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/CSDN/[图像处理] 基于CleanVision库清洗图像数据集/output_41_1.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><pre><code>---------------------- blurry images -----------------------

Number of examples with this issue: 6
Examples representing most severe instances of this issue:
</code></pre><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/CSDN/[图像处理] 基于CleanVision库清洗图像数据集/output_41_3.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><pre><code>----------------------- light images -----------------------

Number of examples with this issue: 5
Examples representing most severe instances of this issue:
</code></pre><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/CSDN/[图像处理] 基于CleanVision库清洗图像数据集/output_41_5.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><p><strong>结果保存</strong></p><p>以下代码展示了如何保存和加载结果，但加载结果时，数据路径和数据集必须与保存时保持一致：</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" data-title="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">save_path </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;./results&quot;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 保存结果</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># force表示是否覆盖原文件</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">imagelab.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">save</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(save_path, </span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">force</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">True</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" data-title="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 加载结果</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">imagelab </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> Imagelab.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">load</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(save_path, dataset_path)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><pre><code>Successfully loaded Imagelab
</code></pre><p><strong>阈值设置</strong></p><p>CleanVision通过阈值控制来确定各种检测结果，其中exact_duplicates和near_duplicates是基于图像哈希（由 <a href="https://github.com/JohannesBuchner/imagehash" target="_blank" rel="noopener noreferrer">imagehash</a>库提供）进行检测的，而其他类型的检测则采用范围为0到1的阈值来控制结果。如果图片在某一问题类型上的得分低于设定的阈值，则认为该图片存在该问题；阈值越高，判定为存在该问题的可能性越大。如下所示：</p><table><thead><tr><th></th><th>关键字</th><th>超参数</th></tr></thead><tbody><tr><td>1</td><td>light</td><td>threshold</td></tr><tr><td>2</td><td>dark</td><td>threshold</td></tr><tr><td>3</td><td>odd_aspect_ratio</td><td>threshold</td></tr><tr><td>4</td><td>exact_duplicates</td><td>N/A</td></tr><tr><td>5</td><td>near_duplicates</td><td>hash_size(int)，hash_types(whash,phash,ahash,dhash,chash)</td></tr><tr><td>6</td><td>blurry</td><td>threshold</td></tr><tr><td>7</td><td>grayscale</td><td>threshold</td></tr><tr><td>8</td><td>low_information</td><td>threshold</td></tr></tbody></table><p>对于单一检测类型，阈值设置代码如下：</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" data-title="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">imagelab </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;"> Imagelab</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">data_path</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">dataset_path)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">issue_types </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;dark&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: {</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;threshold&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0.5</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}}</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">imagelab.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">find_issues</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(issue_types)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">imagelab.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">report</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><pre><code>Reading images from D:/cleanvision/image_files
Checking for dark images ...

Issue checks completed. 20 issues found in the dataset. To see a detailed report of issues found, use imagelab.report().
Issues found in images in order of severity in the dataset

|    | issue_type   |   num_images |
|---:|:-------------|-------------:|
|  0 | dark         |           20 | 

----------------------- dark images ------------------------

Number of examples with this issue: 20
Examples representing most severe instances of this issue:
</code></pre><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/CSDN/[图像处理] 基于CleanVision库清洗图像数据集/output_47_3.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><p>如果某类问题的存在是正常的，例如天文数据集中普遍图像过暗的情况，那么可以设置一个最大出现率（max_prevalence）。这意味着如果某一问题的图像所占比例超过了max_prevalence，则可以认为该问题是正常的。以上示例中，dark问题的图像数量为10，图像总数为607，因此dark问题的图像占比约为0.016。如果将max_prevalence设置为0.015，那么出现dark问题的图片将不会被报告为dark问题：</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" data-title="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">imagelab.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">report</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">max_prevalence</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0.015</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><pre><code>Removing dark from potential issues in the dataset as it exceeds max_prevalence=0.015 
Please specify some issue_types to check for in imagelab.find_issues().
</code></pre><h3 id="_1-4-在torchvision数据集上运行cleanvision" tabindex="-1"><a class="header-anchor" href="#_1-4-在torchvision数据集上运行cleanvision"><span>1.4 在Torchvision数据集上运行CleanVision</span></a></h3><p>CleanVision支持使用Torchvision数据集进行问题检测，具体代码如下：</p><p><strong>准备数据集</strong></p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" data-title="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> torchvision.datasets </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#D19A66;"> CIFAR10</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> torch.utils.data </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ConcatDataset</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> cleanvision </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> Imagelab</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 准备torchvision中的CIFAR10数据集</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">train_set </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;"> CIFAR10</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">root</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;./&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">download</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">True</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">test_set </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;"> CIFAR10</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">root</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;./&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">train</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">False</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">download</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">True</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><pre><code>Files already downloaded and verified
Files already downloaded and verified
</code></pre><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" data-title="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 查看训练集和测试集样本数</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">len</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(train_set), </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">len</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(test_set)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><pre><code>(50000, 10000)
</code></pre><p>如果想对训练集和测试集进行合并处理，可以使用如下代码：</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" data-title="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">dataset </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;"> ConcatDataset</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">([train_set, test_set])</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">len</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(dataset)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><pre><code>60000
</code></pre><p>查看图片：</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" data-title="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">dataset[</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">][</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/CSDN/[图像处理] 基于CleanVision库清洗图像数据集/output_57_0.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><p><strong>运行CleanVision</strong></p><p>只需在创建Imagelab示例时指定torchvision_dataset参数，即可对Torchvision数据集进行操作，后续的处理步骤与读取文件夹中图片的处理方式相同：</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" data-title="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">imagelab </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;"> Imagelab</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">torchvision_dataset</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">dataset)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">imagelab.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">find_issues</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 查看结果</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># imagelab.report()</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><pre><code>Checking for dark, light, odd_aspect_ratio, low_information, exact_duplicates, near_duplicates, blurry, grayscale, odd_size images ...

Issue checks completed. 173 issues found in the dataset. To see a detailed report of issues found, use imagelab.report().
</code></pre><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" data-title="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 结果汇总</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">imagelab.issue_summary</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><div><table border="1" class="dataframe"><thead><tr style="text-align:right;"><th></th><th>issue_type</th><th>num_images</th></tr></thead><tbody><tr><th>0</th><td>blurry</td><td>118</td></tr><tr><th>1</th><td>near_duplicates</td><td>40</td></tr><tr><th>2</th><td>dark</td><td>11</td></tr><tr><th>3</th><td>light</td><td>3</td></tr><tr><th>4</th><td>low_information</td><td>1</td></tr><tr><th>5</th><td>grayscale</td><td>0</td></tr><tr><th>6</th><td>odd_aspect_ratio</td><td>0</td></tr><tr><th>7</th><td>odd_size</td><td>0</td></tr><tr><th>8</th><td>exact_duplicates</td><td>0</td></tr></tbody></table></div><h3 id="_1-5-在hugging-face数据集上运行cleanvision" tabindex="-1"><a class="header-anchor" href="#_1-5-在hugging-face数据集上运行cleanvision"><span>1.5 在Hugging Face数据集上运行CleanVision</span></a></h3><p>CleanVision支持基于Hugging Face数据集（如果能用的话）进行问题检测，代码如下：</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" data-title="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># datasets是专门用于下载huggingface数据集的工具</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> datasets </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> load_dataset</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> cleanvision </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> Imagelab</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 以https://huggingface.co/datasets/mah91/cat为例</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 下载某个hugging face数据集，只需要将参数path设置为待下载链接datasets后的文字</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># split表示提取train或test的数据，如果没有提供分割后的数据集则返回完整的数据</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">dataset </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;"> load_dataset</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">path</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;mah91/cat&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">split</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;train&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><pre><code>Repo card metadata block was not found. Setting CardData to empty.
</code></pre><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" data-title="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 查看数据集，可以看到该数据集有800张图片，只提供了图片没有注释。</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">dataset</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><pre><code>Dataset({
    features: [&#39;image&#39;],
    num_rows: 800
})
</code></pre><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" data-title="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># dataset.features包含数据集中不同列的信息以及每列的类型，例如图像，音频</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">dataset.features</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><pre><code>{&#39;image&#39;: Image(mode=None, decode=True, id=None)}
</code></pre><p>指定hf_dataset参数加载hugging face数据集：</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" data-title="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 加载数据至CleanVision，image_key指定包含&#39;image&#39;的数据</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">imagelab </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;"> Imagelab</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">hf_dataset</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">dataset, </span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">image_key</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;image&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>进行检测的代码如下：</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" data-title="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">imagelab.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">find_issues</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 结果汇总</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">imagelab.issue_summary</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><pre><code>Checking for dark, light, odd_aspect_ratio, low_information, exact_duplicates, near_duplicates, blurry, grayscale, odd_size images ...

Issue checks completed. 4 issues found in the dataset. To see a detailed report of issues found, use imagelab.report().
</code></pre><div><table border="1" class="dataframe"><thead><tr style="text-align:right;"><th></th><th>issue_type</th><th>num_images</th></tr></thead><tbody><tr><th>0</th><td>blurry</td><td>3</td></tr><tr><th>1</th><td>odd_size</td><td>1</td></tr><tr><th>2</th><td>dark</td><td>0</td></tr><tr><th>3</th><td>grayscale</td><td>0</td></tr><tr><th>4</th><td>light</td><td>0</td></tr><tr><th>5</th><td>low_information</td><td>0</td></tr><tr><th>6</th><td>odd_aspect_ratio</td><td>0</td></tr><tr><th>7</th><td>exact_duplicates</td><td>0</td></tr><tr><th>8</th><td>near_duplicates</td><td>0</td></tr></tbody></table></div><h2 id="_2-参考" tabindex="-1"><a class="header-anchor" href="#_2-参考"><span>2 参考</span></a></h2><ul><li><a href="https://github.com/cleanlab/cleanvision" target="_blank" rel="noopener noreferrer">CleanVision</a></li><li><a href="https://cleanvision.readthedocs.io/en/latest/" target="_blank" rel="noopener noreferrer">CleanVision-docs</a></li><li><a href="https://cleanvision.readthedocs.io/en/latest/tutorials/tutorial.html#Advanced:-Create-your-own-issue-type" target="_blank" rel="noopener noreferrer">custom_issue_manager</a></li><li><a href="https://github.com/JohannesBuchner/imagehash" target="_blank" rel="noopener noreferrer">imagehash</a></li></ul>`,159)]))}const d=s(n,[["render",l],["__file","2024-10-24-_图像处理_ 基于CleanVision库清洗图像数据集.html.vue"]]),p=JSON.parse('{"path":"/blog/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/2024-10-24-_%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86_%20%E5%9F%BA%E4%BA%8ECleanVision%E5%BA%93%E6%B8%85%E6%B4%97%E5%9B%BE%E5%83%8F%E6%95%B0%E6%8D%AE%E9%9B%86.html","title":"[图像处理] 基于CleanVision库清洗图像数据集","lang":"zh-CN","frontmatter":{"date":"2024-10-24T10:33:01.000Z","category":["图像处理"],"tag":["图像处理","Python","机器学习"],"description":"[图像处理] 基于CleanVision库清洗图像数据集 CleanVision是一个开源的Python库，旨在帮助用户自动检测图像数据集中可能影响机器学习项目的常见问题。该库被设计为计算机视觉项目的初步工具，以便在应用机器学习之前发现并解决数据集中的问题。CleanVision的核心功能包括检测完全重复、近似重复、模糊、低信息量、过暗、过亮、灰度、不...","head":[["meta",{"property":"og:url","content":"https://luohenyueji.github.io/blog/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/2024-10-24-_%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86_%20%E5%9F%BA%E4%BA%8ECleanVision%E5%BA%93%E6%B8%85%E6%B4%97%E5%9B%BE%E5%83%8F%E6%95%B0%E6%8D%AE%E9%9B%86.html"}],["meta",{"property":"og:site_name","content":"落痕月极的博客"}],["meta",{"property":"og:title","content":"[图像处理] 基于CleanVision库清洗图像数据集"}],["meta",{"property":"og:description","content":"[图像处理] 基于CleanVision库清洗图像数据集 CleanVision是一个开源的Python库，旨在帮助用户自动检测图像数据集中可能影响机器学习项目的常见问题。该库被设计为计算机视觉项目的初步工具，以便在应用机器学习之前发现并解决数据集中的问题。CleanVision的核心功能包括检测完全重复、近似重复、模糊、低信息量、过暗、过亮、灰度、不..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/CSDN/%5B%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86%5D%20%E5%9F%BA%E4%BA%8ECleanVision%E5%BA%93%E6%B8%85%E6%B4%97%E5%9B%BE%E5%83%8F%E6%95%B0%E6%8D%AE%E9%9B%86/imgs/introduce.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"article:tag","content":"图像处理"}],["meta",{"property":"article:tag","content":"Python"}],["meta",{"property":"article:tag","content":"机器学习"}],["meta",{"property":"article:published_time","content":"2024-10-24T10:33:01.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"[图像处理] 基于CleanVision库清洗图像数据集\\",\\"image\\":[\\"https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/CSDN/%5B%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86%5D%20%E5%9F%BA%E4%BA%8ECleanVision%E5%BA%93%E6%B8%85%E6%B4%97%E5%9B%BE%E5%83%8F%E6%95%B0%E6%8D%AE%E9%9B%86/imgs/introduce.png\\",\\"https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/CSDN/%5B%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86%5D%20%E5%9F%BA%E4%BA%8ECleanVision%E5%BA%93%E6%B8%85%E6%B4%97%E5%9B%BE%E5%83%8F%E6%95%B0%E6%8D%AE%E9%9B%86/imgs/exact_duplicates.png\\",\\"https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/CSDN/%5B%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86%5D%20%E5%9F%BA%E4%BA%8ECleanVision%E5%BA%93%E6%B8%85%E6%B4%97%E5%9B%BE%E5%83%8F%E6%95%B0%E6%8D%AE%E9%9B%86/imgs/near_duplicates.png\\",\\"https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/CSDN/%5B%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86%5D%20%E5%9F%BA%E4%BA%8ECleanVision%E5%BA%93%E6%B8%85%E6%B4%97%E5%9B%BE%E5%83%8F%E6%95%B0%E6%8D%AE%E9%9B%86/imgs/blurry.png\\",\\"https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/CSDN/%5B%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86%5D%20%E5%9F%BA%E4%BA%8ECleanVision%E5%BA%93%E6%B8%85%E6%B4%97%E5%9B%BE%E5%83%8F%E6%95%B0%E6%8D%AE%E9%9B%86/imgs/low_information.png\\",\\"https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/CSDN/%5B%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86%5D%20%E5%9F%BA%E4%BA%8ECleanVision%E5%BA%93%E6%B8%85%E6%B4%97%E5%9B%BE%E5%83%8F%E6%95%B0%E6%8D%AE%E9%9B%86/imgs/dark.jpg\\",\\"https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/CSDN/%5B%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86%5D%20%E5%9F%BA%E4%BA%8ECleanVision%E5%BA%93%E6%B8%85%E6%B4%97%E5%9B%BE%E5%83%8F%E6%95%B0%E6%8D%AE%E9%9B%86/imgs/light.jpg\\",\\"https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/CSDN/%5B%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86%5D%20%E5%9F%BA%E4%BA%8ECleanVision%E5%BA%93%E6%B8%85%E6%B4%97%E5%9B%BE%E5%83%8F%E6%95%B0%E6%8D%AE%E9%9B%86/imgs/grayscale.jpg\\",\\"https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/CSDN/%5B%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86%5D%20%E5%9F%BA%E4%BA%8ECleanVision%E5%BA%93%E6%B8%85%E6%B4%97%E5%9B%BE%E5%83%8F%E6%95%B0%E6%8D%AE%E9%9B%86/imgs/odd_aspect_ratio.jpg\\",\\"https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/CSDN/%5B%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86%5D%20%E5%9F%BA%E4%BA%8ECleanVision%E5%BA%93%E6%B8%85%E6%B4%97%E5%9B%BE%E5%83%8F%E6%95%B0%E6%8D%AE%E9%9B%86/imgs/odd_size.png\\",\\"https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/CSDN/%5B%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86%5D%20%E5%9F%BA%E4%BA%8ECleanVision%E5%BA%93%E6%B8%85%E6%B4%97%E5%9B%BE%E5%83%8F%E6%95%B0%E6%8D%AE%E9%9B%86/output_13_1.png\\",\\"https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/CSDN/%5B%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86%5D%20%E5%9F%BA%E4%BA%8ECleanVision%E5%BA%93%E6%B8%85%E6%B4%97%E5%9B%BE%E5%83%8F%E6%95%B0%E6%8D%AE%E9%9B%86/output_13_3.png\\",\\"https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/CSDN/%5B%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86%5D%20%E5%9F%BA%E4%BA%8ECleanVision%E5%BA%93%E6%B8%85%E6%B4%97%E5%9B%BE%E5%83%8F%E6%95%B0%E6%8D%AE%E9%9B%86/output_13_5.png\\",\\"https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/CSDN/%5B%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86%5D%20%E5%9F%BA%E4%BA%8ECleanVision%E5%BA%93%E6%B8%85%E6%B4%97%E5%9B%BE%E5%83%8F%E6%95%B0%E6%8D%AE%E9%9B%86/output_13_7.png\\",\\"https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/CSDN/%5B%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86%5D%20%E5%9F%BA%E4%BA%8ECleanVision%E5%BA%93%E6%B8%85%E6%B4%97%E5%9B%BE%E5%83%8F%E6%95%B0%E6%8D%AE%E9%9B%86/output_13_9.png\\",\\"https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/CSDN/%5B%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86%5D%20%E5%9F%BA%E4%BA%8ECleanVision%E5%BA%93%E6%B8%85%E6%B4%97%E5%9B%BE%E5%83%8F%E6%95%B0%E6%8D%AE%E9%9B%86/output_13_11.png\\",\\"https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/CSDN/%5B%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86%5D%20%E5%9F%BA%E4%BA%8ECleanVision%E5%BA%93%E6%B8%85%E6%B4%97%E5%9B%BE%E5%83%8F%E6%95%B0%E6%8D%AE%E9%9B%86/output_13_13.png\\",\\"https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/CSDN/%5B%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86%5D%20%E5%9F%BA%E4%BA%8ECleanVision%E5%BA%93%E6%B8%85%E6%B4%97%E5%9B%BE%E5%83%8F%E6%95%B0%E6%8D%AE%E9%9B%86/output_13_15.png\\",\\"https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/CSDN/%5B%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86%5D%20%E5%9F%BA%E4%BA%8ECleanVision%E5%BA%93%E6%B8%85%E6%B4%97%E5%9B%BE%E5%83%8F%E6%95%B0%E6%8D%AE%E9%9B%86/output_13_17.png\\",\\"https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/CSDN/%5B%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86%5D%20%E5%9F%BA%E4%BA%8ECleanVision%E5%BA%93%E6%B8%85%E6%B4%97%E5%9B%BE%E5%83%8F%E6%95%B0%E6%8D%AE%E9%9B%86/output_13_19.png\\",\\"https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/CSDN/%5B%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86%5D%20%E5%9F%BA%E4%BA%8ECleanVision%E5%BA%93%E6%B8%85%E6%B4%97%E5%9B%BE%E5%83%8F%E6%95%B0%E6%8D%AE%E9%9B%86/output_13_21.png\\",\\"https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/CSDN/%5B%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86%5D%20%E5%9F%BA%E4%BA%8ECleanVision%E5%BA%93%E6%B8%85%E6%B4%97%E5%9B%BE%E5%83%8F%E6%95%B0%E6%8D%AE%E9%9B%86/output_13_23.png\\",\\"https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/CSDN/%5B%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86%5D%20%E5%9F%BA%E4%BA%8ECleanVision%E5%BA%93%E6%B8%85%E6%B4%97%E5%9B%BE%E5%83%8F%E6%95%B0%E6%8D%AE%E9%9B%86/output_13_25.png\\",\\"https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/CSDN/%5B%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86%5D%20%E5%9F%BA%E4%BA%8ECleanVision%E5%BA%93%E6%B8%85%E6%B4%97%E5%9B%BE%E5%83%8F%E6%95%B0%E6%8D%AE%E9%9B%86/output_13_27.png\\",\\"https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/CSDN/%5B%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86%5D%20%E5%9F%BA%E4%BA%8ECleanVision%E5%BA%93%E6%B8%85%E6%B4%97%E5%9B%BE%E5%83%8F%E6%95%B0%E6%8D%AE%E9%9B%86/output_13_29.png\\",\\"https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/CSDN/%5B%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86%5D%20%E5%9F%BA%E4%BA%8ECleanVision%E5%BA%93%E6%B8%85%E6%B4%97%E5%9B%BE%E5%83%8F%E6%95%B0%E6%8D%AE%E9%9B%86/output_25_0.png\\",\\"https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/CSDN/%5B%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86%5D%20%E5%9F%BA%E4%BA%8ECleanVision%E5%BA%93%E6%B8%85%E6%B4%97%E5%9B%BE%E5%83%8F%E6%95%B0%E6%8D%AE%E9%9B%86/output_27_0.png\\",\\"https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/CSDN/%5B%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86%5D%20%E5%9F%BA%E4%BA%8ECleanVision%E5%BA%93%E6%B8%85%E6%B4%97%E5%9B%BE%E5%83%8F%E6%95%B0%E6%8D%AE%E9%9B%86/output_39_3.png\\",\\"https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/CSDN/%5B%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86%5D%20%E5%9F%BA%E4%BA%8ECleanVision%E5%BA%93%E6%B8%85%E6%B4%97%E5%9B%BE%E5%83%8F%E6%95%B0%E6%8D%AE%E9%9B%86/output_39_5.png\\",\\"https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/CSDN/%5B%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86%5D%20%E5%9F%BA%E4%BA%8ECleanVision%E5%BA%93%E6%B8%85%E6%B4%97%E5%9B%BE%E5%83%8F%E6%95%B0%E6%8D%AE%E9%9B%86/output_41_1.png\\",\\"https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/CSDN/%5B%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86%5D%20%E5%9F%BA%E4%BA%8ECleanVision%E5%BA%93%E6%B8%85%E6%B4%97%E5%9B%BE%E5%83%8F%E6%95%B0%E6%8D%AE%E9%9B%86/output_41_3.png\\",\\"https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/CSDN/%5B%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86%5D%20%E5%9F%BA%E4%BA%8ECleanVision%E5%BA%93%E6%B8%85%E6%B4%97%E5%9B%BE%E5%83%8F%E6%95%B0%E6%8D%AE%E9%9B%86/output_41_5.png\\",\\"https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/CSDN/%5B%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86%5D%20%E5%9F%BA%E4%BA%8ECleanVision%E5%BA%93%E6%B8%85%E6%B4%97%E5%9B%BE%E5%83%8F%E6%95%B0%E6%8D%AE%E9%9B%86/output_47_3.png\\",\\"https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/CSDN/%5B%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86%5D%20%E5%9F%BA%E4%BA%8ECleanVision%E5%BA%93%E6%B8%85%E6%B4%97%E5%9B%BE%E5%83%8F%E6%95%B0%E6%8D%AE%E9%9B%86/output_57_0.png\\"],\\"datePublished\\":\\"2024-10-24T10:33:01.000Z\\",\\"dateModified\\":null,\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"落痕月极\\",\\"url\\":\\"/\\"}]}"]]},"headers":[{"level":2,"title":"1 使用说明","slug":"_1-使用说明","link":"#_1-使用说明","children":[{"level":3,"title":"1.1 CleanVision功能介绍","slug":"_1-1-cleanvision功能介绍","link":"#_1-1-cleanvision功能介绍","children":[]},{"level":3,"title":"1.2 基础使用","slug":"_1-2-基础使用","link":"#_1-2-基础使用","children":[]},{"level":3,"title":"1.3 自定义检测","slug":"_1-3-自定义检测","link":"#_1-3-自定义检测","children":[]},{"level":3,"title":"1.4 在Torchvision数据集上运行CleanVision","slug":"_1-4-在torchvision数据集上运行cleanvision","link":"#_1-4-在torchvision数据集上运行cleanvision","children":[]},{"level":3,"title":"1.5 在Hugging Face数据集上运行CleanVision","slug":"_1-5-在hugging-face数据集上运行cleanvision","link":"#_1-5-在hugging-face数据集上运行cleanvision","children":[]}]},{"level":2,"title":"2 参考","slug":"_2-参考","link":"#_2-参考","children":[]}],"git":{},"readingTime":{"minutes":17.78,"words":5333},"filePathRelative":"blog/图像处理/2024-10-24-[图像处理] 基于CleanVision库清洗图像数据集.md","localizedDate":"2024年10月24日","excerpt":"\\n<p>CleanVision是一个开源的Python库，旨在帮助用户自动检测图像数据集中可能影响机器学习项目的常见问题。该库被设计为计算机视觉项目的初步工具，以便在应用机器学习之前发现并解决数据集中的问题。CleanVision的核心功能包括检测完全重复、近似重复、模糊、低信息量、过暗、过亮、灰度、不规则长宽比和尺寸异常等问题图片。CleanVision开源仓库地址为：<a href=\\"https://github.com/cleanlab/cleanvision\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">CleanVision</a>，官方文档地址为：<a href=\\"https://cleanvision.readthedocs.io/en/latest/\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">CleanVision-docs</a>。</p>","autoDesc":true}');export{d as comp,p as data};
