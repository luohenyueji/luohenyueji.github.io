import{_ as o}from"./plugin-vue_export-helper-x3n3nnut.js";import{r as e,o as c,c as l,a as n,b as s,d as t,e as p}from"./app-MsA2k2kn.js";const i={},u=n("h1",{id:"数据分析与可视化-基于matplotlib-scalebar库绘制比例尺",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#数据分析与可视化-基于matplotlib-scalebar库绘制比例尺","aria-hidden":"true"},"#"),s(" [数据分析与可视化] 基于matplotlib-scalebar库绘制比例尺")],-1),r={href:"https://github.com/ppinard/matplotlib-scalebar",target:"_blank",rel:"noopener noreferrer"},k=n("blockquote",null,[n("p",null,"pip install matplotlib-scalebar")],-1),d=n("p",null,"比例尺是一种用于描述图上线段长度与实际相应线段长度之间关系的方法。其基本公式为：比例尺 = 图上距离 / 实际距离。比例尺的表示方法可以分为三种：",-1),m=n("ol",null,[n("li",null,"数字式，采用数字的比例形式或分数形式来表示比例尺的大小。例如：1:10000或1/10000。"),n("li",null,"线段式，在图上绘制一条线段，并注明图上该线段所代表的实际距离。"),n("li",null,"文字式，用文字描述图上的距离与实际距离之间的比例关系。例如：图上每1厘米代表实际距离 100 米。")],-1),b=n("p",null,[n("strong",null,"matplotlib-scalebar仅适用于线段式比例尺的绘制"),s("。因为在matplotlib中，我们可以通过文字绘制函数直接在图上添加数字式或文字式的比例尺。")],-1),v={href:"https://github.com/luohenyueji/Python-Study-Notes/tree/master/Plot%20Items/Matplotlib-related/%E5%9F%BA%E4%BA%8Ematplotlib-scalebar%E5%BA%93%E7%BB%98%E5%88%B6%E6%AF%94%E4%BE%8B%E5%B0%BA",target:"_blank",rel:"noopener noreferrer"},g=p(`<div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment">## jupyter notebook环境去除warning</span>
<span class="token keyword">import</span> warnings
warnings<span class="token punctuation">.</span>filterwarnings<span class="token punctuation">(</span><span class="token string">&quot;ignore&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">import</span> matplotlib_scalebar
<span class="token comment">## 打印matplotlib_scalebar版本</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;matplotlib_scalebar version&quot;</span><span class="token punctuation">,</span>matplotlib_scalebar<span class="token punctuation">.</span>__version__<span class="token punctuation">)</span>

<span class="token keyword">import</span> matplotlib <span class="token keyword">as</span> plt
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;matplotlob version&quot;</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>__version__<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><pre><code>matplotlib_scalebar version 0.8.1
matplotlob version 3.5.3
</code></pre><p>[toc]</p><h2 id="_1-使用说明" tabindex="-1"><a class="header-anchor" href="#_1-使用说明" aria-hidden="true">#</a> 1 使用说明</h2><h3 id="_1-1-快速入门" tabindex="-1"><a class="header-anchor" href="#_1-1-快速入门" aria-hidden="true">#</a> 1.1 快速入门</h3><p>以下代码展示了一个matplotlib-scalebar的使用示例，matplotlib-scalebar提供ScaleBar类来创建预设比例尺：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>ScaleBar(dx= 0.08, units= &quot;cm&quot;, length_fraction=0.5)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>其中dx，units和length_fraction都是基本参数，dx表示图中每个横向像素坐标实际代表0.08cm的长度，units表示使用cm厘米作为基准单位，length_fraction=0.5表示预设比例尺长度占实际绘图区域横向总长度的比例为50%。</p><p><strong>预设比例尺的含义为：matplotlib_scalebar.scalebar会根据我们预置的比例尺参数图，挑选合适规格的标准比例尺来表示</strong>。如下所示：</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>cbook <span class="token keyword">as</span> cbook
<span class="token keyword">from</span> matplotlib_scalebar<span class="token punctuation">.</span>scalebar <span class="token keyword">import</span> ScaleBar

<span class="token comment">## 载入自带图片数据，并将图片宽高都修改为256</span>
<span class="token keyword">with</span> cbook<span class="token punctuation">.</span>get_sample_data<span class="token punctuation">(</span><span class="token string">&quot;s1045.ima.gz&quot;</span><span class="token punctuation">)</span> <span class="token keyword">as</span> dfile<span class="token punctuation">:</span>
    im <span class="token operator">=</span> np<span class="token punctuation">.</span>frombuffer<span class="token punctuation">(</span>dfile<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> np<span class="token punctuation">.</span>uint16<span class="token punctuation">)</span><span class="token punctuation">.</span>reshape<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">256</span><span class="token punctuation">,</span> <span class="token number">256</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

fig<span class="token punctuation">,</span> ax <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplots<span class="token punctuation">(</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>axis<span class="token punctuation">(</span><span class="token string">&quot;off&quot;</span><span class="token punctuation">)</span>

<span class="token comment">## 绘图</span>
ax<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>im<span class="token punctuation">,</span> cmap<span class="token operator">=</span><span class="token string">&quot;gray&quot;</span><span class="token punctuation">)</span>

<span class="token comment">## 创建一个比例尺对象</span>
scalebar <span class="token operator">=</span> ScaleBar<span class="token punctuation">(</span>dx<span class="token operator">=</span> <span class="token number">0.08</span><span class="token punctuation">,</span> units<span class="token operator">=</span> <span class="token string">&quot;cm&quot;</span><span class="token punctuation">,</span> length_fraction<span class="token operator">=</span><span class="token number">0.5</span><span class="token punctuation">)</span>
<span class="token comment">## 添加比例尺</span>
ax<span class="token punctuation">.</span>add_artist<span class="token punctuation">(</span>scalebar<span class="token punctuation">)</span>

plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/Python-Study-Notes/Matplotlib-related/[数据分析与可视化] 基于matplotlib-scalebar库绘制比例尺/output/output_4_0.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><p>如上图所示，比例尺由一根横线和横线下的文字标识组成。该比例尺表示图中横向方向上，横线的长度等于实际1dm(分米)。以文中matplotlib-scalebar绘图代码为例说明计算该比例尺的步骤：</p><ol><li>输入参数：图像横向像素个数为256，每个像素表示0.08cm，预设比例尺占横向方向总像素的length_fraction=0.5。那么预设比例尺的长度为<code>256*0.08*0.5</code>，也就是10.24cm，共占横向128个像素。</li><li>判断10.24cm是否能进位换算为预设高一级的长度单位，例如10.24cm可换算为1.024dm。</li><li>判断1.024达到预设的哪种比例尺数值规格，如1、2、5、10、15等。根据给定值，找出第一个大于等于给定值的规格数值。例如1.024应以比例尺规格值1表示，4.99应以比例尺规格值2表示。</li><li>根据上一步结果，当前比例规格为1dm，那么比例尺的绘图长度将从预设长度改为1dm对应的长度。绘图长度的计算方式为<code>256*0.5*1/1.024</code>,也就是125个像素。</li><li>在图中绘制长度为125个像素，标识为1dm的比例尺。</li></ol><p>在matplotlib-scalebar，对于米制单位，预设比例尺数值规格为：</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">75</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">125</span><span class="token punctuation">,</span> <span class="token number">150</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">,</span> <span class="token number">750</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>预设比例尺单位规格为：</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token punctuation">{</span><span class="token string">&#39;m&#39;</span><span class="token punctuation">:</span> <span class="token number">1.0</span><span class="token punctuation">,</span>
 <span class="token string">&#39;Ym&#39;</span><span class="token punctuation">:</span> <span class="token number">1e+24</span><span class="token punctuation">,</span>
 <span class="token string">&#39;Zm&#39;</span><span class="token punctuation">:</span> <span class="token number">1e+21</span><span class="token punctuation">,</span>
 <span class="token string">&#39;Em&#39;</span><span class="token punctuation">:</span> <span class="token number">1e+18</span><span class="token punctuation">,</span>
 <span class="token string">&#39;Pm&#39;</span><span class="token punctuation">:</span> <span class="token number">1000000000000000.0</span><span class="token punctuation">,</span>
 <span class="token string">&#39;Tm&#39;</span><span class="token punctuation">:</span> <span class="token number">1000000000000.0</span><span class="token punctuation">,</span>
 <span class="token string">&#39;Gm&#39;</span><span class="token punctuation">:</span> <span class="token number">1000000000.0</span><span class="token punctuation">,</span>
 <span class="token string">&#39;Mm&#39;</span><span class="token punctuation">:</span> <span class="token number">1000000.0</span><span class="token punctuation">,</span>
 <span class="token string">&#39;km&#39;</span><span class="token punctuation">:</span> <span class="token number">1000.0</span><span class="token punctuation">,</span>
 <span class="token string">&#39;dm&#39;</span><span class="token punctuation">:</span> <span class="token number">0.1</span><span class="token punctuation">,</span>
 <span class="token string">&#39;cm&#39;</span><span class="token punctuation">:</span> <span class="token number">0.01</span><span class="token punctuation">,</span>
 <span class="token string">&#39;mm&#39;</span><span class="token punctuation">:</span> <span class="token number">0.001</span><span class="token punctuation">,</span>
 <span class="token string">&#39;µm&#39;</span><span class="token punctuation">:</span> <span class="token number">1e-06</span><span class="token punctuation">,</span>
 <span class="token string">&#39;um&#39;</span><span class="token punctuation">:</span> <span class="token number">1e-06</span><span class="token punctuation">,</span>
 <span class="token string">&#39;nm&#39;</span><span class="token punctuation">:</span> <span class="token number">1e-09</span><span class="token punctuation">,</span>
 <span class="token string">&#39;pm&#39;</span><span class="token punctuation">:</span> <span class="token number">1e-12</span><span class="token punctuation">,</span>
 <span class="token string">&#39;fm&#39;</span><span class="token punctuation">:</span> <span class="token number">1e-15</span><span class="token punctuation">,</span>
 <span class="token string">&#39;am&#39;</span><span class="token punctuation">:</span> <span class="token number">1e-18</span><span class="token punctuation">,</span>
 <span class="token string">&#39;zm&#39;</span><span class="token punctuation">:</span> <span class="token number">1e-21</span><span class="token punctuation">,</span>
 <span class="token string">&#39;ym&#39;</span><span class="token punctuation">:</span> <span class="token number">1e-24</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,17),h={href:"https://github.com/ppinard/matplotlib-scalebar/blob/2c57173d67a346b323a4afff7b7dd9c7f1314da4/matplotlib_scalebar/scalebar.py#L384",target:"_blank",rel:"noopener noreferrer"},_=p(`<p>按照以上比例尺的计算步骤，如果dx= 0.01, units= &quot;m&quot;, length_fraction=1。那么实际应该使用预设数值规格为2，单位规格为m，占横向200个像素的比例尺。如下所示：</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>cbook <span class="token keyword">as</span> cbook
<span class="token keyword">from</span> matplotlib_scalebar<span class="token punctuation">.</span>scalebar <span class="token keyword">import</span> ScaleBar

<span class="token comment">## 载入matplotlib自带图片数据，并将图片宽高都修改为256</span>
<span class="token keyword">with</span> cbook<span class="token punctuation">.</span>get_sample_data<span class="token punctuation">(</span><span class="token string">&quot;s1045.ima.gz&quot;</span><span class="token punctuation">)</span> <span class="token keyword">as</span> dfile<span class="token punctuation">:</span>
    im <span class="token operator">=</span> np<span class="token punctuation">.</span>frombuffer<span class="token punctuation">(</span>dfile<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> np<span class="token punctuation">.</span>uint16<span class="token punctuation">)</span><span class="token punctuation">.</span>reshape<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">256</span><span class="token punctuation">,</span> <span class="token number">256</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

fig<span class="token punctuation">,</span> ax <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplots<span class="token punctuation">(</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>axis<span class="token punctuation">(</span><span class="token string">&quot;off&quot;</span><span class="token punctuation">)</span>

<span class="token comment">## 绘图</span>
ax<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>im<span class="token punctuation">,</span> cmap<span class="token operator">=</span><span class="token string">&quot;gray&quot;</span><span class="token punctuation">)</span>

<span class="token comment">## 创建一个比例尺对象</span>
scalebar <span class="token operator">=</span> ScaleBar<span class="token punctuation">(</span>dx<span class="token operator">=</span> <span class="token number">0.01</span><span class="token punctuation">,</span> units<span class="token operator">=</span> <span class="token string">&quot;m&quot;</span><span class="token punctuation">,</span> length_fraction<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token comment">## 添加比例尺</span>
ax<span class="token punctuation">.</span>add_artist<span class="token punctuation">(</span>scalebar<span class="token punctuation">)</span>

plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/Python-Study-Notes/Matplotlib-related/[数据分析与可视化] 基于matplotlib-scalebar库绘制比例尺/output/output_7_0.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><p>在前面展示的是表示横向方向长度的比例尺，如果想创建表示纵向方向的比例尺，则在初始ScaleBar类时设置rotation=&quot;vertical&quot;即可。要注意纵向比例尺是根据图像高度来计算的，如下代码所示：</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>cbook <span class="token keyword">as</span> cbook
<span class="token keyword">from</span> matplotlib_scalebar<span class="token punctuation">.</span>scalebar <span class="token keyword">import</span> ScaleBar

<span class="token comment">## 载入自带图片数据，并将图片宽改为512，高改为128，可以对比不设置rotation=&quot;vertical&quot;时的效果</span>
<span class="token keyword">with</span> cbook<span class="token punctuation">.</span>get_sample_data<span class="token punctuation">(</span><span class="token string">&quot;s1045.ima.gz&quot;</span><span class="token punctuation">)</span> <span class="token keyword">as</span> dfile<span class="token punctuation">:</span>
    im <span class="token operator">=</span> np<span class="token punctuation">.</span>frombuffer<span class="token punctuation">(</span>dfile<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> np<span class="token punctuation">.</span>uint16<span class="token punctuation">)</span><span class="token punctuation">.</span>reshape<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">128</span><span class="token punctuation">,</span> <span class="token number">512</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

fig<span class="token punctuation">,</span> ax <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplots<span class="token punctuation">(</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>axis<span class="token punctuation">(</span><span class="token string">&quot;off&quot;</span><span class="token punctuation">)</span>

<span class="token comment">## 绘图</span>
ax<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>im<span class="token punctuation">,</span> cmap<span class="token operator">=</span><span class="token string">&quot;gray&quot;</span><span class="token punctuation">)</span>

<span class="token comment">## 创建一个比例尺对象</span>
scalebar <span class="token operator">=</span> ScaleBar<span class="token punctuation">(</span>dx<span class="token operator">=</span><span class="token number">0.01</span><span class="token punctuation">,</span>
                    units<span class="token operator">=</span><span class="token string">&quot;m&quot;</span><span class="token punctuation">,</span>
                    length_fraction<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span>
                    rotation<span class="token operator">=</span><span class="token string">&quot;vertical&quot;</span><span class="token punctuation">,</span>
                    scale_loc<span class="token operator">=</span><span class="token string">&quot;right&quot;</span><span class="token punctuation">,</span>
                    border_pad<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span>
                    pad<span class="token operator">=</span><span class="token number">0.5</span><span class="token punctuation">)</span>
<span class="token comment">## 添加比例尺</span>
ax<span class="token punctuation">.</span>add_artist<span class="token punctuation">(</span>scalebar<span class="token punctuation">)</span>

plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/Python-Study-Notes/Matplotlib-related/[数据分析与可视化] 基于matplotlib-scalebar库绘制比例尺/output/output_9_0.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><h3 id="_1-2-scalebar类说明" tabindex="-1"><a class="header-anchor" href="#_1-2-scalebar类说明" aria-hidden="true">#</a> 1.2 ScaleBar类说明</h3><p>ScaleBar类构造函数的参数如下所示：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>dx (float): x轴的长度，以当前绘图单位表示。  
units (str, optional): 标尺的单位。默认为&quot;m&quot;。  
dimension (str, optional): 标尺的属性维度。默认为&quot;si-length&quot;。  
label (str or None, optional): 标尺的标签文字。默认为None。  
length_fraction (float, optional): 标尺的长度与总长度的比例。默认为None。  
height_fraction (float, optional): 标尺的高度与总高度的比例。默认为None，该参数已经废除，使用width_fraction替代。  
width_fraction (float, optional): 标尺的宽度与总宽度的比例。默认为None。  
location (tuple or None, optional): 标尺的位置。默认为None。  
pad (tuple or None, optional): 内边距。默认为None。  
border_pad (tuple or None, optional): 外边距。默认为None。  
sep (tuple or None, optional): 标签文字与标尺之间的间隔。默认为None。  
frameon (bool or None, optional): 是否显示标尺背景框。默认为None。  
color (str or tuple or None, optional): 标尺的颜色。默认为None。  
box_color (str or tuple or None, optional): 标尺线框的颜色。默认为None。  
box_alpha (float or None, optional): 标尺线框的透明度。默认为None。  
scale_loc (str or None, optional): 标尺放置的位置。默认为None。  
label_loc (str or None, optional): 标签文字放置的位置。默认为None。  
font_properties (str or None, optional): 字体样式。默认为None。  
label_formatter (str or None, optional): 标签文字格式化函数。默认为None，该参数已经废除，使用scale_formatter替代。  
scale_formatter (str or None, optional): 标尺刻度格式化函数。默认为None。  
fixed_value (float or None, optional): 固定的标尺值。默认为None。  
fixed_units (str or None, optional): 固定的标尺单位。默认为None。  
animated (bool, optional): 是否以动画的形式进行显示。默认为False。  
rotation (float or None, optional): 标签文字的旋转角度。默认为None。  
bbox_to_anchor (str or tuple or None, optional): 标签文字的位置基准。默认为None，一些matplotlib_scalebar版本可能不支持该参数。  
bbox_transform (str or None, optional): 标签文字的变换函数。默认为None，一些matplotlib_scalebar版本可能不支持该参数。 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ScaleBar一些主要参数决定了比例尺的展示效果，下图展示了ScaleBar主要参数的作用域：</p><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/Python-Study-Notes/Matplotlib-related/[数据分析与可视化] 基于matplotlib-scalebar库绘制比例尺/image/img1.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>值得注意的是，ScaleBar提供了两种计算比例尺规格的方式：</p><ol><li>第一种是1.1节提到的计算方式，根据dx、units、length_fraction值创建预置比例尺参数，然后根据这些参数自动确定比例尺的绘制规格标准。推荐使用该方式创建比例尺。</li><li>第二种是直接通过fixed_value和fixed_units确定比例尺的绘制规格标准，然后结合dx参数完成比例尺的绘制，这种情况主要适用于需要设置特定数值。</li></ol><p>接下来，对ScaleBar的主要参数进行介绍。</p><h4 id="_1-2-1-dx-units-dimension" tabindex="-1"><a class="header-anchor" href="#_1-2-1-dx-units-dimension" aria-hidden="true">#</a> 1.2.1 dx, units, dimension</h4><p>dx为必须输入参数，表示一个像素点代表的实际大小。units表示单位，dimension表示单位属性（所属单位制），可选的长度单位参数如下表所示：</p><table><thead><tr><th>dimension</th><th>units</th></tr></thead><tbody><tr><td>si-length</td><td>km, m, cm, um</td></tr><tr><td>imperial-length</td><td>in, ft, yd, mi</td></tr><tr><td>si-length-reciprocal</td><td>1/m, 1/cm</td></tr><tr><td>angle</td><td>deg</td></tr></tbody></table>`,17),f={href:"https://www.cnblogs.com/luohenyueji/p/17485432.html",target:"_blank",rel:"noopener noreferrer"},q=p(`<p>将比例尺的标识改为imperial-length英制长度的示例代码如下：</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>
<span class="token comment">## 载入matplotlib自带图片数据，并将图片宽高都修改为256</span>
<span class="token keyword">with</span> cbook<span class="token punctuation">.</span>get_sample_data<span class="token punctuation">(</span><span class="token string">&quot;s1045.ima.gz&quot;</span><span class="token punctuation">)</span> <span class="token keyword">as</span> dfile<span class="token punctuation">:</span>
    im <span class="token operator">=</span> np<span class="token punctuation">.</span>frombuffer<span class="token punctuation">(</span>dfile<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> np<span class="token punctuation">.</span>uint16<span class="token punctuation">)</span><span class="token punctuation">.</span>reshape<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">256</span><span class="token punctuation">,</span> <span class="token number">256</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

fig<span class="token punctuation">,</span> ax <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplots<span class="token punctuation">(</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>axis<span class="token punctuation">(</span><span class="token string">&quot;off&quot;</span><span class="token punctuation">)</span>

ax<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>im<span class="token punctuation">,</span> cmap<span class="token operator">=</span><span class="token string">&quot;gray&quot;</span><span class="token punctuation">)</span>

scalebar <span class="token operator">=</span> ScaleBar<span class="token punctuation">(</span>dx<span class="token operator">=</span><span class="token number">0.0315</span><span class="token punctuation">,</span> units<span class="token operator">=</span><span class="token string">&quot;in&quot;</span><span class="token punctuation">,</span> dimension<span class="token operator">=</span><span class="token string">&quot;imperial-length&quot;</span><span class="token punctuation">,</span> length_fraction<span class="token operator">=</span><span class="token number">0.25</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>add_artist<span class="token punctuation">(</span>scalebar<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><pre><code>&lt;matplotlib_scalebar.scalebar.ScaleBar at 0x7fb634727850&gt;
</code></pre><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/Python-Study-Notes/Matplotlib-related/[数据分析与可视化] 基于matplotlib-scalebar库绘制比例尺/output/output_12_1.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><h4 id="_1-2-2-label-label-loc-scale-loc" tabindex="-1"><a class="header-anchor" href="#_1-2-2-label-label-loc-scale-loc" aria-hidden="true">#</a> 1.2.2 label, label_loc, scale_loc</h4><p>label设置标尺的标签文字。label_loc设置标签文字相对于比例尺的位置，可选值有： bottom, top, left, right, none（不显示标签文字）。 scale_loc设置比例尺标注值相对于比例尺的位置，可选值有： bottom, top, left, right, none（不显示标注文字）。示例代码如下：</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>
<span class="token comment">## 载入matplotlib自带图片数据，并将图片宽高都修改为256</span>
<span class="token keyword">with</span> cbook<span class="token punctuation">.</span>get_sample_data<span class="token punctuation">(</span><span class="token string">&quot;s1045.ima.gz&quot;</span><span class="token punctuation">)</span> <span class="token keyword">as</span> dfile<span class="token punctuation">:</span>
    im <span class="token operator">=</span> np<span class="token punctuation">.</span>frombuffer<span class="token punctuation">(</span>dfile<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> np<span class="token punctuation">.</span>uint16<span class="token punctuation">)</span><span class="token punctuation">.</span>reshape<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">256</span><span class="token punctuation">,</span> <span class="token number">256</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

fig<span class="token punctuation">,</span> ax <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplots<span class="token punctuation">(</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>axis<span class="token punctuation">(</span><span class="token string">&quot;off&quot;</span><span class="token punctuation">)</span>

ax<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>im<span class="token punctuation">,</span> cmap<span class="token operator">=</span><span class="token string">&quot;gray&quot;</span><span class="token punctuation">)</span>

scalebar <span class="token operator">=</span> ScaleBar<span class="token punctuation">(</span>dx<span class="token operator">=</span> <span class="token number">0.08</span><span class="token punctuation">,</span> units<span class="token operator">=</span> <span class="token string">&quot;cm&quot;</span><span class="token punctuation">,</span> length_fraction<span class="token operator">=</span><span class="token number">0.25</span><span class="token punctuation">,</span> 
                    label<span class="token operator">=</span><span class="token string">&quot;scale bar&quot;</span><span class="token punctuation">,</span>label_loc<span class="token operator">=</span><span class="token string">&quot;left&quot;</span><span class="token punctuation">,</span> scale_loc<span class="token operator">=</span><span class="token string">&quot;top&quot;</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>add_artist<span class="token punctuation">(</span>scalebar<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><pre><code>&lt;matplotlib_scalebar.scalebar.ScaleBar at 0x7fb6347f1fd0&gt;
</code></pre><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/Python-Study-Notes/Matplotlib-related/[数据分析与可视化] 基于matplotlib-scalebar库绘制比例尺/output/output_14_1.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><h4 id="_1-2-3-length-fraction-width-fraction" tabindex="-1"><a class="header-anchor" href="#_1-2-3-length-fraction-width-fraction" aria-hidden="true">#</a> 1.2.3 length_fraction, width_fraction</h4><p>length_fraction设置比例尺相对于图形的长度，如果不指定值，在代码内部会以为0.2（20%)赋值。width_fraction设置比例尺相对于图形的宽度，如果不指定值，在代码内部会以为0.01（1%)赋值。本文在1.1节提到过，在这种情况下比例尺标注值只能取以下数字确定的：1、2、5、10、15等。如果需要特定的值，需要指定fixed_value和fixed_units。示例代码如下:</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment">## 载入自带图片数据，并将图片宽高都修改为256</span>
<span class="token keyword">with</span> cbook<span class="token punctuation">.</span>get_sample_data<span class="token punctuation">(</span><span class="token string">&quot;s1045.ima.gz&quot;</span><span class="token punctuation">)</span> <span class="token keyword">as</span> dfile<span class="token punctuation">:</span>
    im <span class="token operator">=</span> np<span class="token punctuation">.</span>frombuffer<span class="token punctuation">(</span>dfile<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> np<span class="token punctuation">.</span>uint16<span class="token punctuation">)</span><span class="token punctuation">.</span>reshape<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">256</span><span class="token punctuation">,</span> <span class="token number">256</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

fig<span class="token punctuation">,</span> ax <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplots<span class="token punctuation">(</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>axis<span class="token punctuation">(</span><span class="token string">&quot;off&quot;</span><span class="token punctuation">)</span>

<span class="token comment">## 绘图</span>
ax<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>im<span class="token punctuation">,</span> cmap<span class="token operator">=</span><span class="token string">&quot;gray&quot;</span><span class="token punctuation">)</span>

<span class="token comment">## 创建一个比例尺对象</span>
scalebar <span class="token operator">=</span> ScaleBar<span class="token punctuation">(</span>dx<span class="token operator">=</span> <span class="token number">0.08</span><span class="token punctuation">,</span> units<span class="token operator">=</span> <span class="token string">&quot;cm&quot;</span><span class="token punctuation">,</span> length_fraction<span class="token operator">=</span><span class="token number">0.25</span><span class="token punctuation">,</span> width_fraction<span class="token operator">=</span><span class="token number">0.05</span><span class="token punctuation">)</span>
<span class="token comment">## 添加比例尺</span>
ax<span class="token punctuation">.</span>add_artist<span class="token punctuation">(</span>scalebar<span class="token punctuation">)</span>

plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/Python-Study-Notes/Matplotlib-related/[数据分析与可视化] 基于matplotlib-scalebar库绘制比例尺/output/output_16_0.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><h4 id="_1-2-4-标尺位置与边距" tabindex="-1"><a class="header-anchor" href="#_1-2-4-标尺位置与边距" aria-hidden="true">#</a> 1.2.4 标尺位置与边距</h4><ul><li>location：设置图例的位置，该参数作用与matplotlib的图例位置设置参数相同，取值可以是：upper right, upper left, lower left, lower right, right, center left, center right, lower center, upper center或center。默认值为None，表示使用matplotlib的默认值。</li><li>loc：location的别名。</li><li>pad：内边距，默认为None，表示使用matplotlib的默认值0.2。</li><li>border_pad：外边距，默认为None，表示使用matplotlib的默认值0.1。</li><li>sep：标签文字与标尺之间的间隔，默认为None，表示使用matplotlib的默认值5。</li><li>frameon：是否显示标尺背景框，默认为None，表示使用matplotlib的默认值True，该背景框默认为白色背景。</li></ul><p>示例代码如下:</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment">## 载入自带图片数据，并将图片宽高都修改为256</span>
<span class="token keyword">with</span> cbook<span class="token punctuation">.</span>get_sample_data<span class="token punctuation">(</span><span class="token string">&quot;s1045.ima.gz&quot;</span><span class="token punctuation">)</span> <span class="token keyword">as</span> dfile<span class="token punctuation">:</span>
    im <span class="token operator">=</span> np<span class="token punctuation">.</span>frombuffer<span class="token punctuation">(</span>dfile<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> np<span class="token punctuation">.</span>uint16<span class="token punctuation">)</span><span class="token punctuation">.</span>reshape<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">256</span><span class="token punctuation">,</span> <span class="token number">256</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

fig<span class="token punctuation">,</span> ax <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplots<span class="token punctuation">(</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>axis<span class="token punctuation">(</span><span class="token string">&quot;off&quot;</span><span class="token punctuation">)</span>

<span class="token comment">## 绘图</span>
ax<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>im<span class="token punctuation">,</span> cmap<span class="token operator">=</span><span class="token string">&quot;gray&quot;</span><span class="token punctuation">)</span>

<span class="token comment">## 创建一个比例尺对象</span>
<span class="token comment">## 如果将frameon设置为False，对于当前背景为黑色的图片需要修改标尺颜色以更好可视化效果。</span>
scalebar <span class="token operator">=</span> ScaleBar<span class="token punctuation">(</span>dx<span class="token operator">=</span> <span class="token number">0.08</span><span class="token punctuation">,</span> units<span class="token operator">=</span> <span class="token string">&quot;cm&quot;</span><span class="token punctuation">,</span> length_fraction<span class="token operator">=</span><span class="token number">0.25</span><span class="token punctuation">,</span> 
                    location<span class="token operator">=</span><span class="token string">&quot;upper left&quot;</span><span class="token punctuation">,</span> pad <span class="token operator">=</span> <span class="token number">0.1</span><span class="token punctuation">,</span> border_pad<span class="token operator">=</span><span class="token number">0.5</span><span class="token punctuation">,</span> 
                    sep<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span> frameon<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
<span class="token comment">## 添加比例尺</span>
ax<span class="token punctuation">.</span>add_artist<span class="token punctuation">(</span>scalebar<span class="token punctuation">)</span>

plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/Python-Study-Notes/Matplotlib-related/[数据分析与可视化] 基于matplotlib-scalebar库绘制比例尺/output/output_18_0.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><h4 id="_1-2-5-颜色" tabindex="-1"><a class="header-anchor" href="#_1-2-5-颜色" aria-hidden="true">#</a> 1.2.5 颜色</h4><p>matplotlib-scalebar通过color参数设置标尺及标注文字的颜色，通过box_color和box_alpha设置背景框的颜色和透明度。示例代码如下：</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment">## 载入自带图片数据，并将图片宽高都修改为256</span>
<span class="token keyword">with</span> cbook<span class="token punctuation">.</span>get_sample_data<span class="token punctuation">(</span><span class="token string">&quot;s1045.ima.gz&quot;</span><span class="token punctuation">)</span> <span class="token keyword">as</span> dfile<span class="token punctuation">:</span>
    im <span class="token operator">=</span> np<span class="token punctuation">.</span>frombuffer<span class="token punctuation">(</span>dfile<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> np<span class="token punctuation">.</span>uint16<span class="token punctuation">)</span><span class="token punctuation">.</span>reshape<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">256</span><span class="token punctuation">,</span> <span class="token number">256</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

fig<span class="token punctuation">,</span> ax <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplots<span class="token punctuation">(</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>axis<span class="token punctuation">(</span><span class="token string">&quot;off&quot;</span><span class="token punctuation">)</span>

<span class="token comment">## 绘图</span>
ax<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>im<span class="token punctuation">,</span> cmap<span class="token operator">=</span><span class="token string">&quot;gray&quot;</span><span class="token punctuation">)</span>

<span class="token comment">## 创建一个比例尺对象</span>
scalebar <span class="token operator">=</span> ScaleBar<span class="token punctuation">(</span>dx<span class="token operator">=</span> <span class="token number">0.08</span><span class="token punctuation">,</span> units<span class="token operator">=</span> <span class="token string">&quot;cm&quot;</span><span class="token punctuation">,</span> length_fraction<span class="token operator">=</span><span class="token number">0.25</span><span class="token punctuation">,</span> 
                    color<span class="token operator">=</span><span class="token string">&quot;white&quot;</span><span class="token punctuation">,</span> box_color <span class="token operator">=</span> <span class="token string">&quot;blue&quot;</span><span class="token punctuation">,</span> box_alpha<span class="token operator">=</span><span class="token number">0.7</span><span class="token punctuation">)</span>
<span class="token comment">## 添加比例尺</span>
ax<span class="token punctuation">.</span>add_artist<span class="token punctuation">(</span>scalebar<span class="token punctuation">)</span>

plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/Python-Study-Notes/Matplotlib-related/[数据分析与可视化] 基于matplotlib-scalebar库绘制比例尺/output/output_20_0.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><h4 id="_1-2-6-font-properties和scale-formatter" tabindex="-1"><a class="header-anchor" href="#_1-2-6-font-properties和scale-formatter" aria-hidden="true">#</a> 1.2.6 font_properties和scale_formatter</h4>`,23),x={href:"https://matplotlib.org/api/font_manager_api.html#matplotlib.font_manager.FontProperties",target:"_blank",rel:"noopener noreferrer"},y=n("code",null,'lambda value, unit: f"{value} {unit}"',-1),w=p(`<p>示例代码如下：</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment">## 载入自带图片数据，并将图片宽高都修改为256</span>
<span class="token keyword">with</span> cbook<span class="token punctuation">.</span>get_sample_data<span class="token punctuation">(</span><span class="token string">&quot;s1045.ima.gz&quot;</span><span class="token punctuation">)</span> <span class="token keyword">as</span> dfile<span class="token punctuation">:</span>
    im <span class="token operator">=</span> np<span class="token punctuation">.</span>frombuffer<span class="token punctuation">(</span>dfile<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> np<span class="token punctuation">.</span>uint16<span class="token punctuation">)</span><span class="token punctuation">.</span>reshape<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">256</span><span class="token punctuation">,</span> <span class="token number">256</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

fig<span class="token punctuation">,</span> ax <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplots<span class="token punctuation">(</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>axis<span class="token punctuation">(</span><span class="token string">&quot;off&quot;</span><span class="token punctuation">)</span>

<span class="token comment">## 绘图</span>
ax<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>im<span class="token punctuation">,</span> cmap<span class="token operator">=</span><span class="token string">&quot;gray&quot;</span><span class="token punctuation">)</span>

<span class="token comment">## 创建一个比例尺对象</span>
scalebar1 <span class="token operator">=</span> ScaleBar<span class="token punctuation">(</span>dx<span class="token operator">=</span> <span class="token number">0.08</span><span class="token punctuation">,</span> units<span class="token operator">=</span> <span class="token string">&quot;cm&quot;</span><span class="token punctuation">,</span> length_fraction<span class="token operator">=</span><span class="token number">0.25</span><span class="token punctuation">,</span> 
                   scale_formatter <span class="token operator">=</span> <span class="token keyword">lambda</span> value<span class="token punctuation">,</span> unit<span class="token punctuation">:</span> <span class="token string-interpolation"><span class="token string">f&quot;scalebar&quot;</span></span><span class="token punctuation">)</span>

scalebar2 <span class="token operator">=</span> ScaleBar<span class="token punctuation">(</span>dx<span class="token operator">=</span> <span class="token number">0.08</span><span class="token punctuation">,</span> units<span class="token operator">=</span> <span class="token string">&quot;cm&quot;</span><span class="token punctuation">,</span> length_fraction<span class="token operator">=</span><span class="token number">0.25</span><span class="token punctuation">,</span> location<span class="token operator">=</span><span class="token string">&#39;center left&#39;</span><span class="token punctuation">,</span>
                   scale_formatter <span class="token operator">=</span> <span class="token keyword">lambda</span> value<span class="token punctuation">,</span> unit<span class="token punctuation">:</span> <span class="token string-interpolation"><span class="token string">f&quot;value: </span><span class="token interpolation"><span class="token punctuation">{</span>value<span class="token punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token punctuation">{</span>unit<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
scalebar3 <span class="token operator">=</span> ScaleBar<span class="token punctuation">(</span>dx<span class="token operator">=</span> <span class="token number">0.08</span><span class="token punctuation">,</span> units<span class="token operator">=</span> <span class="token string">&quot;cm&quot;</span><span class="token punctuation">,</span> length_fraction<span class="token operator">=</span><span class="token number">0.25</span><span class="token punctuation">,</span> location<span class="token operator">=</span><span class="token string">&#39;center&#39;</span><span class="token punctuation">,</span>
                   font_properties<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&#39;style&#39;</span><span class="token punctuation">:</span><span class="token string">&#39;italic&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;weight&#39;</span><span class="token punctuation">:</span><span class="token string">&#39;bold&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;size&#39;</span><span class="token punctuation">:</span><span class="token number">12</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    
<span class="token comment">## 添加比例尺</span>
ax<span class="token punctuation">.</span>add_artist<span class="token punctuation">(</span>scalebar1<span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>add_artist<span class="token punctuation">(</span>scalebar2<span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>add_artist<span class="token punctuation">(</span>scalebar3<span class="token punctuation">)</span>

plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/Python-Study-Notes/Matplotlib-related/[数据分析与可视化] 基于matplotlib-scalebar库绘制比例尺/output/output_22_0.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><h4 id="_1-2-7-fixed-value-fixed-units" tabindex="-1"><a class="header-anchor" href="#_1-2-7-fixed-value-fixed-units" aria-hidden="true">#</a> 1.2.7 fixed_value, fixed_units</h4><p>fixed_value和fixed_units用于自定义比例尺标注值，当fixed_value默认为none表示根据dx自动确定比例尺的标注值。比例尺的长度会根据dx和这两个参数而自动调整。示例代码如下：</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment">## 载入自带图片数据，并将图片宽高都修改为256</span>
<span class="token keyword">with</span> cbook<span class="token punctuation">.</span>get_sample_data<span class="token punctuation">(</span><span class="token string">&quot;s1045.ima.gz&quot;</span><span class="token punctuation">)</span> <span class="token keyword">as</span> dfile<span class="token punctuation">:</span>
    im <span class="token operator">=</span> np<span class="token punctuation">.</span>frombuffer<span class="token punctuation">(</span>dfile<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> np<span class="token punctuation">.</span>uint16<span class="token punctuation">)</span><span class="token punctuation">.</span>reshape<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">256</span><span class="token punctuation">,</span> <span class="token number">256</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

fig<span class="token punctuation">,</span> ax <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplots<span class="token punctuation">(</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>axis<span class="token punctuation">(</span><span class="token string">&quot;off&quot;</span><span class="token punctuation">)</span>

<span class="token comment">## 绘图</span>
ax<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>im<span class="token punctuation">,</span> cmap<span class="token operator">=</span><span class="token string">&quot;gray&quot;</span><span class="token punctuation">)</span>

<span class="token comment">## 创建一个比例尺对象</span>
scalebar <span class="token operator">=</span> ScaleBar<span class="token punctuation">(</span>dx<span class="token operator">=</span> <span class="token number">0.08</span><span class="token punctuation">,</span> units<span class="token operator">=</span> <span class="token string">&quot;cm&quot;</span><span class="token punctuation">,</span> length_fraction<span class="token operator">=</span><span class="token number">0.25</span><span class="token punctuation">,</span> 
                    fixed_value<span class="token operator">=</span><span class="token number">0.5</span><span class="token punctuation">,</span> fixed_units<span class="token operator">=</span> <span class="token string">&quot;cm&quot;</span><span class="token punctuation">)</span>
<span class="token comment">## 添加比例尺</span>
ax<span class="token punctuation">.</span>add_artist<span class="token punctuation">(</span>scalebar<span class="token punctuation">)</span>

plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/Python-Study-Notes/Matplotlib-related/[数据分析与可视化] 基于matplotlib-scalebar库绘制比例尺/output/output_24_0.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><h4 id="_1-2-8-rotation" tabindex="-1"><a class="header-anchor" href="#_1-2-8-rotation" aria-hidden="true">#</a> 1.2.8 rotation</h4><p>rotation表示是基于x轴还是基于y轴创建比例尺。rotation可取horizontal或vertical。如果调整rotation，可能需要调整scale_loc和label_loc以实现合理的比例尺布局。如果改变rotation的值后，比例尺标注值显示有问题，可以尝试升级matplotlib版本解决。rotation默认为None，表示使用matplotlib的默认值。如下：</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment">## 载入自带图片数据，并将图片宽高都修改为256</span>
<span class="token keyword">with</span> cbook<span class="token punctuation">.</span>get_sample_data<span class="token punctuation">(</span><span class="token string">&quot;s1045.ima.gz&quot;</span><span class="token punctuation">)</span> <span class="token keyword">as</span> dfile<span class="token punctuation">:</span>
    im <span class="token operator">=</span> np<span class="token punctuation">.</span>frombuffer<span class="token punctuation">(</span>dfile<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> np<span class="token punctuation">.</span>uint16<span class="token punctuation">)</span><span class="token punctuation">.</span>reshape<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">256</span><span class="token punctuation">,</span> <span class="token number">256</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
fig<span class="token punctuation">,</span> ax <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplots<span class="token punctuation">(</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>axis<span class="token punctuation">(</span><span class="token string">&quot;off&quot;</span><span class="token punctuation">)</span>

ax<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>im<span class="token punctuation">,</span> cmap<span class="token operator">=</span><span class="token string">&quot;gray&quot;</span><span class="token punctuation">)</span>

scalebar <span class="token operator">=</span> ScaleBar<span class="token punctuation">(</span>
    <span class="token number">0.08</span><span class="token punctuation">,</span>
    <span class="token string">&quot;cm&quot;</span><span class="token punctuation">,</span>
    length_fraction<span class="token operator">=</span><span class="token number">0.25</span><span class="token punctuation">,</span>
    rotation<span class="token operator">=</span><span class="token string">&quot;vertical&quot;</span><span class="token punctuation">,</span>
    scale_loc<span class="token operator">=</span><span class="token string">&quot;right&quot;</span><span class="token punctuation">,</span>
    border_pad<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span>
    pad<span class="token operator">=</span><span class="token number">0.1</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>add_artist<span class="token punctuation">(</span>scalebar<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><pre><code>&lt;matplotlib_scalebar.scalebar.ScaleBar at 0x7fb63452f790&gt;
</code></pre><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/Python-Study-Notes/Matplotlib-related/[数据分析与可视化] 基于matplotlib-scalebar库绘制比例尺/output/output_26_1.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><h2 id="_2-绘图实例" tabindex="-1"><a class="header-anchor" href="#_2-绘图实例" aria-hidden="true">#</a> 2 绘图实例</h2>`,13),N={href:"https://kolibril13.github.io/plywood-gallery-matplotlib-scalebar/",target:"_blank",rel:"noopener noreferrer"},S=p(`<figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/Python-Study-Notes/Matplotlib-related/[数据分析与可视化] 基于matplotlib-scalebar库绘制比例尺/image/img2.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>总体绘图效果如下：</p><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/Python-Study-Notes/Matplotlib-related/[数据分析与可视化] 基于matplotlib-scalebar库绘制比例尺/image/img3.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>以下代码展示不同绘图实例的效果。</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt
<span class="token keyword">from</span> matplotlib_scalebar<span class="token punctuation">.</span>scalebar <span class="token keyword">import</span> ScaleBar
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>image <span class="token keyword">as</span> mpimg

<span class="token comment">## 添加比例尺代码</span>
<span class="token keyword">def</span> <span class="token function">imshow_bar</span><span class="token punctuation">(</span>im<span class="token punctuation">,</span> scalebar<span class="token punctuation">,</span>ax<span class="token punctuation">)</span><span class="token punctuation">:</span>
    ax<span class="token punctuation">.</span>axis<span class="token punctuation">(</span><span class="token string">&quot;off&quot;</span><span class="token punctuation">)</span>
    ax<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>im<span class="token punctuation">)</span>
    ax<span class="token punctuation">.</span>add_artist<span class="token punctuation">(</span>scalebar<span class="token punctuation">)</span>

fig<span class="token punctuation">,</span> _ <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplots<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">14</span><span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">## 调整子图间距</span>
plt<span class="token punctuation">.</span>subplots_adjust<span class="token punctuation">(</span>wspace<span class="token operator">=</span><span class="token number">0.05</span><span class="token punctuation">,</span> hspace<span class="token operator">=</span><span class="token number">0.05</span><span class="token punctuation">)</span>

<span class="token comment">## 图1</span>
ax <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">441</span><span class="token punctuation">)</span>
img <span class="token operator">=</span> mpimg<span class="token punctuation">.</span>imread<span class="token punctuation">(</span><span class="token string">&quot;image/orange.png&quot;</span><span class="token punctuation">)</span>
scalebar <span class="token operator">=</span> ScaleBar<span class="token punctuation">(</span><span class="token number">0.3</span><span class="token punctuation">,</span> <span class="token string">&quot;mm&quot;</span><span class="token punctuation">,</span> scale_formatter<span class="token operator">=</span><span class="token keyword">lambda</span> value<span class="token punctuation">,</span> unit<span class="token punctuation">:</span> <span class="token string-interpolation"><span class="token string">f&quot;</span><span class="token interpolation"><span class="token punctuation">{</span>value<span class="token operator">/</span><span class="token number">5</span><span class="token punctuation">}</span></span><span class="token string"> limo&quot;</span></span><span class="token punctuation">)</span>
imshow_bar<span class="token punctuation">(</span>img<span class="token punctuation">,</span> scalebar<span class="token punctuation">,</span>ax<span class="token operator">=</span>ax<span class="token punctuation">)</span>

<span class="token comment">## 图2</span>
ax <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">442</span><span class="token punctuation">)</span>
img <span class="token operator">=</span> mpimg<span class="token punctuation">.</span>imread<span class="token punctuation">(</span><span class="token string">&quot;image/orange.png&quot;</span><span class="token punctuation">)</span>
scalebar <span class="token operator">=</span> ScaleBar<span class="token punctuation">(</span><span class="token number">0.3</span><span class="token punctuation">,</span> <span class="token string">&quot;mm&quot;</span><span class="token punctuation">,</span> border_pad<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>
imshow_bar<span class="token punctuation">(</span>img<span class="token punctuation">,</span> scalebar<span class="token punctuation">,</span>ax<span class="token operator">=</span>ax<span class="token punctuation">)</span>

<span class="token comment">## 图3</span>
ax <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">443</span><span class="token punctuation">)</span>
img <span class="token operator">=</span> mpimg<span class="token punctuation">.</span>imread<span class="token punctuation">(</span><span class="token string">&quot;image/green.png&quot;</span><span class="token punctuation">)</span>
scalebar <span class="token operator">=</span> ScaleBar<span class="token punctuation">(</span><span class="token number">0.3</span><span class="token punctuation">,</span> <span class="token string">&quot;mm&quot;</span><span class="token punctuation">,</span> pad<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>
imshow_bar<span class="token punctuation">(</span>img<span class="token punctuation">,</span> scalebar<span class="token punctuation">,</span>ax<span class="token operator">=</span>ax<span class="token punctuation">)</span>

<span class="token comment">## 图4</span>
ax <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">444</span><span class="token punctuation">)</span>
img <span class="token operator">=</span> mpimg<span class="token punctuation">.</span>imread<span class="token punctuation">(</span><span class="token string">&quot;image/green.png&quot;</span><span class="token punctuation">)</span>
scalebar <span class="token operator">=</span> ScaleBar<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">,</span> dimension<span class="token operator">=</span><span class="token string">&quot;pixel-length&quot;</span><span class="token punctuation">,</span> length_fraction<span class="token operator">=</span><span class="token number">0.3</span><span class="token punctuation">)</span>
imshow_bar<span class="token punctuation">(</span>img<span class="token punctuation">,</span> scalebar<span class="token punctuation">,</span>ax<span class="token operator">=</span>ax<span class="token punctuation">)</span>

<span class="token comment">## 图5</span>
ax <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">445</span><span class="token punctuation">)</span>
img <span class="token operator">=</span> mpimg<span class="token punctuation">.</span>imread<span class="token punctuation">(</span><span class="token string">&quot;image/yellow.png&quot;</span><span class="token punctuation">)</span>
scalebar <span class="token operator">=</span> ScaleBar<span class="token punctuation">(</span><span class="token number">0.03</span> <span class="token operator">/</span> <span class="token number">2.54</span><span class="token punctuation">,</span> <span class="token string">&quot;in&quot;</span><span class="token punctuation">,</span> dimension<span class="token operator">=</span><span class="token string">&quot;imperial-length&quot;</span><span class="token punctuation">,</span> length_fraction<span class="token operator">=</span><span class="token number">0.3</span><span class="token punctuation">)</span>
imshow_bar<span class="token punctuation">(</span>img<span class="token punctuation">,</span> scalebar<span class="token punctuation">,</span>ax<span class="token operator">=</span>ax<span class="token punctuation">)</span>

<span class="token comment">## 图6</span>
ax <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">)</span>
img <span class="token operator">=</span> mpimg<span class="token punctuation">.</span>imread<span class="token punctuation">(</span><span class="token string">&quot;image/yellow.png&quot;</span><span class="token punctuation">)</span>
scalebar <span class="token operator">=</span> ScaleBar<span class="token punctuation">(</span><span class="token number">0.3</span><span class="token punctuation">,</span> <span class="token string">&quot;mm&quot;</span><span class="token punctuation">,</span> height_fraction<span class="token operator">=</span><span class="token number">0.05</span><span class="token punctuation">)</span>
imshow_bar<span class="token punctuation">(</span>img<span class="token punctuation">,</span> scalebar<span class="token punctuation">,</span>ax<span class="token operator">=</span>ax<span class="token punctuation">)</span>

<span class="token comment">## 图7</span>
ax <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">)</span>
img <span class="token operator">=</span> mpimg<span class="token punctuation">.</span>imread<span class="token punctuation">(</span><span class="token string">&quot;image/purple.png&quot;</span><span class="token punctuation">)</span>
scalebar <span class="token operator">=</span> ScaleBar<span class="token punctuation">(</span><span class="token number">0.3</span><span class="token punctuation">,</span> <span class="token string">&quot;mm&quot;</span><span class="token punctuation">,</span> rotation<span class="token operator">=</span><span class="token string">&quot;vertical&quot;</span><span class="token punctuation">)</span>
imshow_bar<span class="token punctuation">(</span>img<span class="token punctuation">,</span> scalebar<span class="token punctuation">,</span>ax<span class="token operator">=</span>ax<span class="token punctuation">)</span>

<span class="token comment">## 图8</span>
ax <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">)</span>
img <span class="token operator">=</span> mpimg<span class="token punctuation">.</span>imread<span class="token punctuation">(</span><span class="token string">&quot;image/purple.png&quot;</span><span class="token punctuation">)</span>
scalebar <span class="token operator">=</span> ScaleBar<span class="token punctuation">(</span><span class="token number">0.3</span><span class="token punctuation">,</span> <span class="token string">&quot;mm&quot;</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">&quot;blue&quot;</span><span class="token punctuation">,</span> scale_loc<span class="token operator">=</span><span class="token string">&quot;right&quot;</span><span class="token punctuation">)</span>
imshow_bar<span class="token punctuation">(</span>img<span class="token punctuation">,</span> scalebar<span class="token punctuation">,</span>ax<span class="token operator">=</span>ax<span class="token punctuation">)</span>

<span class="token comment">## 图9</span>
ax <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">)</span>
img <span class="token operator">=</span> mpimg<span class="token punctuation">.</span>imread<span class="token punctuation">(</span><span class="token string">&quot;image/red.png&quot;</span><span class="token punctuation">)</span>
scalebar <span class="token operator">=</span> ScaleBar<span class="token punctuation">(</span><span class="token number">0.3</span><span class="token punctuation">,</span> <span class="token string">&quot;mm&quot;</span><span class="token punctuation">,</span> box_color<span class="token operator">=</span><span class="token string">&quot;skyblue&quot;</span><span class="token punctuation">,</span> box_alpha<span class="token operator">=</span><span class="token number">0.3</span><span class="token punctuation">)</span>
imshow_bar<span class="token punctuation">(</span>img<span class="token punctuation">,</span> scalebar<span class="token punctuation">,</span>ax<span class="token operator">=</span>ax<span class="token punctuation">)</span>

<span class="token comment">## 图10</span>
ax <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span>
img <span class="token operator">=</span> mpimg<span class="token punctuation">.</span>imread<span class="token punctuation">(</span><span class="token string">&quot;image/red.png&quot;</span><span class="token punctuation">)</span>
scalebar <span class="token operator">=</span> ScaleBar<span class="token punctuation">(</span><span class="token number">0.3</span><span class="token punctuation">,</span> <span class="token string">&quot;mm&quot;</span><span class="token punctuation">,</span> label<span class="token operator">=</span><span class="token string">&quot;Lemon&quot;</span><span class="token punctuation">,</span> label_loc<span class="token operator">=</span><span class="token string">&quot;right&quot;</span><span class="token punctuation">)</span>
imshow_bar<span class="token punctuation">(</span>img<span class="token punctuation">,</span> scalebar<span class="token punctuation">,</span>ax<span class="token operator">=</span>ax<span class="token punctuation">)</span>

<span class="token comment">## 图11</span>
ax <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">)</span>
img <span class="token operator">=</span> mpimg<span class="token punctuation">.</span>imread<span class="token punctuation">(</span><span class="token string">&quot;image/zoom1.png&quot;</span><span class="token punctuation">)</span>
scalebar <span class="token operator">=</span> ScaleBar<span class="token punctuation">(</span><span class="token number">0.3</span> <span class="token operator">/</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">&quot;mm&quot;</span><span class="token punctuation">,</span> sep<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">)</span>
imshow_bar<span class="token punctuation">(</span>img<span class="token punctuation">,</span> scalebar<span class="token punctuation">,</span>ax<span class="token operator">=</span>ax<span class="token punctuation">)</span>

<span class="token comment">## 图12</span>
ax <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">)</span>
img <span class="token operator">=</span> mpimg<span class="token punctuation">.</span>imread<span class="token punctuation">(</span><span class="token string">&quot;image/zoom2.png&quot;</span><span class="token punctuation">)</span>
scalebar <span class="token operator">=</span> ScaleBar<span class="token punctuation">(</span><span class="token number">0.3</span> <span class="token operator">/</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token string">&quot;mm&quot;</span><span class="token punctuation">,</span> label<span class="token operator">=</span><span class="token string">&quot;Lemon&quot;</span><span class="token punctuation">,</span> label_loc<span class="token operator">=</span><span class="token string">&quot;bottom&quot;</span><span class="token punctuation">)</span>
imshow_bar<span class="token punctuation">(</span>img<span class="token punctuation">,</span> scalebar<span class="token punctuation">,</span>ax<span class="token operator">=</span>ax<span class="token punctuation">)</span>

<span class="token comment">## 图13</span>
ax <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">13</span><span class="token punctuation">)</span>
img <span class="token operator">=</span> mpimg<span class="token punctuation">.</span>imread<span class="token punctuation">(</span><span class="token string">&quot;image/zoom3.png&quot;</span><span class="token punctuation">)</span>
scalebar <span class="token operator">=</span> ScaleBar<span class="token punctuation">(</span><span class="token number">0.3</span> <span class="token operator">/</span> <span class="token number">10000</span><span class="token punctuation">,</span> <span class="token string">&quot;mm&quot;</span><span class="token punctuation">,</span> length_fraction<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> font_properties<span class="token operator">=</span><span class="token string">&quot;serif&quot;</span><span class="token punctuation">)</span>
imshow_bar<span class="token punctuation">(</span>img<span class="token punctuation">,</span> scalebar<span class="token punctuation">,</span>ax<span class="token operator">=</span>ax<span class="token punctuation">)</span>

<span class="token comment">## 图14</span>
ax <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">14</span><span class="token punctuation">)</span>
img <span class="token operator">=</span> mpimg<span class="token punctuation">.</span>imread<span class="token punctuation">(</span><span class="token string">&quot;image/zoom4.png&quot;</span><span class="token punctuation">)</span>
scalebar <span class="token operator">=</span> ScaleBar<span class="token punctuation">(</span><span class="token number">0.3</span> <span class="token operator">/</span> <span class="token number">10000000</span><span class="token punctuation">,</span> <span class="token string">&quot;mm&quot;</span><span class="token punctuation">,</span> frameon<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> label<span class="token operator">=</span><span class="token string">&quot;Lemon&quot;</span><span class="token punctuation">)</span>
imshow_bar<span class="token punctuation">(</span>img<span class="token punctuation">,</span> scalebar<span class="token punctuation">,</span>ax<span class="token operator">=</span>ax<span class="token punctuation">)</span>

<span class="token comment">## 图15</span>
ax <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">15</span><span class="token punctuation">)</span>
img <span class="token operator">=</span> mpimg<span class="token punctuation">.</span>imread<span class="token punctuation">(</span><span class="token string">&quot;image/zoom4.png&quot;</span><span class="token punctuation">)</span>
scalebar <span class="token operator">=</span> ScaleBar<span class="token punctuation">(</span><span class="token number">0.3</span> <span class="token operator">/</span> <span class="token number">10000000</span><span class="token punctuation">,</span> <span class="token string">&quot;mm&quot;</span><span class="token punctuation">,</span> fixed_units<span class="token operator">=</span><span class="token string">&quot;mm&quot;</span><span class="token punctuation">,</span> fixed_value<span class="token operator">=</span><span class="token number">1e-6</span><span class="token punctuation">,</span> font_properties<span class="token operator">=</span><span class="token string">&quot;monospace&quot;</span><span class="token punctuation">,</span> location<span class="token operator">=</span><span class="token string">&quot;lower left&quot;</span><span class="token punctuation">)</span>
imshow_bar<span class="token punctuation">(</span>img<span class="token punctuation">,</span> scalebar<span class="token punctuation">,</span>ax<span class="token operator">=</span>ax<span class="token punctuation">)</span>

<span class="token comment">## 图16</span>
ax <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">)</span>
img <span class="token operator">=</span> mpimg<span class="token punctuation">.</span>imread<span class="token punctuation">(</span><span class="token string">&quot;image/zoom4.png&quot;</span><span class="token punctuation">)</span>
scalebar <span class="token operator">=</span> ScaleBar<span class="token punctuation">(</span><span class="token number">0.3</span> <span class="token operator">/</span> <span class="token number">10000000</span><span class="token punctuation">,</span> <span class="token string">&quot;mm&quot;</span><span class="token punctuation">,</span> fixed_units<span class="token operator">=</span><span class="token string">&quot;pm&quot;</span><span class="token punctuation">,</span> fixed_value<span class="token operator">=</span><span class="token number">1000</span><span class="token punctuation">,</span> location<span class="token operator">=</span><span class="token string">&quot;upper left&quot;</span><span class="token punctuation">)</span>
imshow_bar<span class="token punctuation">(</span>img<span class="token punctuation">,</span> scalebar<span class="token punctuation">,</span>ax<span class="token operator">=</span>ax<span class="token punctuation">)</span>

<span class="token comment">## 保存图片</span>
plt<span class="token punctuation">.</span>savefig<span class="token punctuation">(</span><span class="token string">&quot;res.jpg&quot;</span><span class="token punctuation">,</span>dpi<span class="token operator">=</span><span class="token number">300</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/Python-Study-Notes/Matplotlib-related/[数据分析与可视化] 基于matplotlib-scalebar库绘制比例尺/output/output_29_0.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><h2 id="_3-参考" tabindex="-1"><a class="header-anchor" href="#_3-参考" aria-hidden="true">#</a> 3 参考</h2>`,7),B={href:"https://github.com/ppinard/matplotlib-scalebar",target:"_blank",rel:"noopener noreferrer"},z={href:"https://github.com/ppinard/matplotlib-scalebar/blob/2c57173d67a346b323a4afff7b7dd9c7f1314da4/matplotlib_scalebar/scalebar.py#L384",target:"_blank",rel:"noopener noreferrer"},P={href:"https://www.cnblogs.com/luohenyueji/p/17485432.html",target:"_blank",rel:"noopener noreferrer"},j={href:"https://matplotlib.org/api/font_manager_api.html#matplotlib.font_manager.FontProperties",target:"_blank",rel:"noopener noreferrer"},M={href:"https://kolibril13.github.io/plywood-gallery-matplotlib-scalebar/",target:"_blank",rel:"noopener noreferrer"};function E(F,L){const a=e("ExternalLinkIcon");return c(),l("div",null,[u,n("p",null,[n("a",r,[s("matplotlib-scalebar"),t(a)]),s("是一个Python库，用于在matplotlib图形中添加比例尺。它允许用户指定比例尺的大小、位置、字体和颜色，以及比例尺的单位。该库支持不同的比例尺单位，例如米、英尺、英寸等。matplotlib-scalebar安装命令如下：")]),k,d,m,b,n("p",null,[s("本文所有代码见："),n("a",v,[s("Python-Study-Notes"),t(a)])]),g,n("p",null,[s("matplotlib-scalebar关于比例尺的计算详细函数见"),n("a",h,[s("matplotlib_scalebar/dimension.py"),t(a)]),s("的draw函数。")]),_,n("p",null,[s("如果使用GeoPandas绘制地图的比例尺则需要根据坐标系的类型来确定dx，具体如何在GeoPandas中确定dx见："),n("a",f,[s("Python绘制数据地图3-GeoPandas使用要点"),t(a)]),s("。")]),q,n("p",null,[s("font_properties设置标签文本的字体属性，具体使用见matplotlib的"),n("a",x,[s("FontProperties"),t(a)]),s("。 scale_formatter调用类似"),y,s("这类自定义函数来自定义比例尺的标注值，默认为none。")]),w,n("p",null,[n("a",N,[s("plywood-gallery-matplotlib-scalebar"),t(a)]),s("提供了一个交互式matplotlib-scalebar的绘图实例，每个实例给出了不同图例参数详细的绘制代码，非常推荐学习和使用。绘图实例内容如下：")]),S,n("ul",null,[n("li",null,[n("a",B,[s("matplotlib-scalebar"),t(a)])]),n("li",null,[n("a",z,[s("matplotlib_scalebar/dimension.py"),t(a)])]),n("li",null,[n("a",P,[s("Python绘制数据地图3-GeoPandas使用要点"),t(a)])]),n("li",null,[n("a",j,[s("FontProperties"),t(a)])]),n("li",null,[n("a",M,[s("plywood-gallery-matplotlib-scalebar"),t(a)])])])])}const T=o(i,[["render",E],["__file","2023-06-28-_数据分析与可视化_ 基于matplotlib-scalebar库绘制比例尺.html.vue"]]);export{T as default};
