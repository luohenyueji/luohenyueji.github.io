import{_ as t}from"./plugin-vue_export-helper-x3n3nnut.js";import{r as p,o as e,c as o,a as n,b as s,d as i,e as c}from"./app-MsA2k2kn.js";const l={},u=n("h1",{id:"seaborn-seaborn学习笔记11-绘图实例-3-drawing-example-3",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#seaborn-seaborn学习笔记11-绘图实例-3-drawing-example-3","aria-hidden":"true"},"#"),s(" [seaborn] seaborn学习笔记11 绘图实例(3) Drawing example(3)")],-1),r={href:"https://github.com/luohenyueji/Python-Study-Notes/tree/master/Seaborn%20Study",target:"_blank",rel:"noopener noreferrer"},k=c(`<ol><li>Plotting a diagonal correlation matrix(heatmap)</li><li>Scatterplot with marginal ticks(JointGrid)</li><li>Multiple bivariate KDE plots(kdeplot)</li><li>Multiple linear regression(lmplot)</li><li>Paired density and scatterplot matrix(PairGrid)</li><li>Paired categorical plots(PairGrid)</li><li>Dot plot with several variables(PairGrid)</li><li>Plotting a three-way ANOVA(catplot)</li><li>Linear regression with marginal distributions(jointplot)</li><li>Plotting model residuals(residplot)</li></ol><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># import packages</span>
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd
<span class="token keyword">import</span> seaborn <span class="token keyword">as</span> sns
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_1-plotting-a-diagonal-correlation-matrix-heatmap" tabindex="-1"><a class="header-anchor" href="#_1-plotting-a-diagonal-correlation-matrix-heatmap" aria-hidden="true">#</a> 1. Plotting a diagonal correlation matrix(heatmap)</h2><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># 读取字母表</span>
<span class="token keyword">from</span> string <span class="token keyword">import</span> ascii_letters

<span class="token comment"># Generate a large random dataset 生成数据集</span>
rs <span class="token operator">=</span> np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>RandomState<span class="token punctuation">(</span><span class="token number">33</span><span class="token punctuation">)</span>
d <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span>data<span class="token operator">=</span>rs<span class="token punctuation">.</span>normal<span class="token punctuation">(</span>size<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">26</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                 columns<span class="token operator">=</span><span class="token builtin">list</span><span class="token punctuation">(</span>ascii_letters<span class="token punctuation">[</span><span class="token number">26</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment"># Compute the correlation matrix 计算相关系数</span>
corr <span class="token operator">=</span> d<span class="token punctuation">.</span>corr<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># Generate a mask for the upper triangle 生成掩模</span>
mask <span class="token operator">=</span> np<span class="token punctuation">.</span>zeros_like<span class="token punctuation">(</span>corr<span class="token punctuation">,</span> dtype<span class="token operator">=</span>np<span class="token punctuation">.</span><span class="token builtin">bool</span><span class="token punctuation">)</span>
mask<span class="token punctuation">[</span>np<span class="token punctuation">.</span>triu_indices_from<span class="token punctuation">(</span>mask<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">True</span>

d<span class="token comment"># Set up the matplotlib figure 设置图大小</span>
f<span class="token punctuation">,</span> ax <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplots<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment"># Generate a custom diverging colormap 设置颜色</span>
cmap <span class="token operator">=</span> sns<span class="token punctuation">.</span>diverging_palette<span class="token punctuation">(</span><span class="token number">220</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> as_cmap<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>

<span class="token comment"># Draw the heatmap with the mask and correct aspect ratio</span>
<span class="token comment"># square表都是正方形</span>
sns<span class="token punctuation">.</span>heatmap<span class="token punctuation">(</span>corr<span class="token punctuation">,</span> mask<span class="token operator">=</span>mask<span class="token punctuation">,</span> cmap<span class="token operator">=</span>cmap<span class="token punctuation">,</span> vmax<span class="token operator">=</span><span class="token number">.3</span><span class="token punctuation">,</span> center<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>
            square<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> linewidths<span class="token operator">=</span><span class="token number">.5</span><span class="token punctuation">,</span> cbar_kws<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&quot;shrink&quot;</span><span class="token punctuation">:</span> <span class="token number">.5</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/Python-Study-Notes/Seaborn-Study/11 绘图实例(3) Drawing example(3)/output_3_0.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><h2 id="_2-scatterplot-with-marginal-ticks-jointgrid" tabindex="-1"><a class="header-anchor" href="#_2-scatterplot-with-marginal-ticks-jointgrid" aria-hidden="true">#</a> 2. Scatterplot with marginal ticks(JointGrid)</h2><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>sns<span class="token punctuation">.</span><span class="token builtin">set</span><span class="token punctuation">(</span>style<span class="token operator">=</span><span class="token string">&quot;white&quot;</span><span class="token punctuation">,</span> color_codes<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>

<span class="token comment"># Generate a random bivariate dataset</span>
rs <span class="token operator">=</span> np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>RandomState<span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span>
mean <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span>
cov <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
x<span class="token punctuation">,</span> y <span class="token operator">=</span> rs<span class="token punctuation">.</span>multivariate_normal<span class="token punctuation">(</span>mean<span class="token punctuation">,</span> cov<span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">.</span>T

<span class="token comment"># Use JointGrid directly to draw a custom plot</span>
<span class="token comment"># 创建一个绘图表格区域，设置好x,y对应数据</span>
grid <span class="token operator">=</span> sns<span class="token punctuation">.</span>JointGrid<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> space<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> height<span class="token operator">=</span><span class="token number">6</span><span class="token punctuation">,</span> ratio<span class="token operator">=</span><span class="token number">50</span><span class="token punctuation">)</span>
<span class="token comment"># 在联合分布上画出散点图</span>
grid<span class="token punctuation">.</span>plot_joint<span class="token punctuation">(</span>plt<span class="token punctuation">.</span>scatter<span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">&quot;g&quot;</span><span class="token punctuation">)</span>
<span class="token comment"># 在边缘分布上再作图</span>
grid<span class="token punctuation">.</span>plot_marginals<span class="token punctuation">(</span>sns<span class="token punctuation">.</span>rugplot<span class="token punctuation">,</span> height<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">&quot;g&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><pre><code>C:\\ProgramData\\Anaconda3\\lib\\site-packages\\matplotlib\\tight_layout.py:199: UserWarning: Tight layout not applied. tight_layout cannot make axes width small enough to accommodate all axes decorations
  warnings.warn(&#39;Tight layout not applied. &#39;
</code></pre><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/Python-Study-Notes/Seaborn-Study/11 绘图实例(3) Drawing example(3)/output_5_1.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><h2 id="_3-multiple-bivariate-kde-plots-kdeplot" tabindex="-1"><a class="header-anchor" href="#_3-multiple-bivariate-kde-plots-kdeplot" aria-hidden="true">#</a> 3. Multiple bivariate KDE plots(kdeplot)</h2><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>sns<span class="token punctuation">.</span><span class="token builtin">set</span><span class="token punctuation">(</span>style<span class="token operator">=</span><span class="token string">&quot;darkgrid&quot;</span><span class="token punctuation">)</span>
iris <span class="token operator">=</span> sns<span class="token punctuation">.</span>load_dataset<span class="token punctuation">(</span><span class="token string">&quot;iris&quot;</span><span class="token punctuation">)</span>

<span class="token comment"># Subset the iris dataset by species</span>
<span class="token comment"># 单独筛选对应类的数据</span>
setosa <span class="token operator">=</span> iris<span class="token punctuation">.</span>query<span class="token punctuation">(</span><span class="token string">&quot;species == &#39;setosa&#39;&quot;</span><span class="token punctuation">)</span>
virginica <span class="token operator">=</span> iris<span class="token punctuation">.</span>query<span class="token punctuation">(</span><span class="token string">&quot;species == &#39;virginica&#39;&quot;</span><span class="token punctuation">)</span>

<span class="token comment"># Set up the figure</span>
f<span class="token punctuation">,</span> ax <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplots<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment"># 设置轴的缩放比例，equal表示x,y轴同等缩放比例</span>
ax<span class="token punctuation">.</span>set_aspect<span class="token punctuation">(</span><span class="token string">&quot;equal&quot;</span><span class="token punctuation">)</span>

<span class="token comment"># Draw the two density plots</span>
<span class="token comment"># 画核密度图</span>
<span class="token comment"># shade表示添加阴影，shade_lowest表示两个核密度图相叠时，核密度小的部分不画出来</span>
ax <span class="token operator">=</span> sns<span class="token punctuation">.</span>kdeplot<span class="token punctuation">(</span>setosa<span class="token punctuation">.</span>sepal_width<span class="token punctuation">,</span> setosa<span class="token punctuation">.</span>sepal_length<span class="token punctuation">,</span>
                 cmap<span class="token operator">=</span><span class="token string">&quot;Reds&quot;</span><span class="token punctuation">,</span> shade<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> shade_lowest<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
ax <span class="token operator">=</span> sns<span class="token punctuation">.</span>kdeplot<span class="token punctuation">(</span>virginica<span class="token punctuation">.</span>sepal_width<span class="token punctuation">,</span> virginica<span class="token punctuation">.</span>sepal_length<span class="token punctuation">,</span>
                 cmap<span class="token operator">=</span><span class="token string">&quot;Blues&quot;</span><span class="token punctuation">,</span> shade<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> shade_lowest<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>

<span class="token comment"># Add labels to the plot</span>
<span class="token comment"># 添加颜色</span>
red <span class="token operator">=</span> sns<span class="token punctuation">.</span>color_palette<span class="token punctuation">(</span><span class="token string">&quot;Reds&quot;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span>
blue <span class="token operator">=</span> sns<span class="token punctuation">.</span>color_palette<span class="token punctuation">(</span><span class="token string">&quot;Blues&quot;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span>
ax<span class="token punctuation">.</span>text<span class="token punctuation">(</span><span class="token number">2.5</span><span class="token punctuation">,</span> <span class="token number">8.2</span><span class="token punctuation">,</span> <span class="token string">&quot;virginica&quot;</span><span class="token punctuation">,</span> size<span class="token operator">=</span><span class="token number">16</span><span class="token punctuation">,</span> color<span class="token operator">=</span>blue<span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>text<span class="token punctuation">(</span><span class="token number">3.8</span><span class="token punctuation">,</span> <span class="token number">4.5</span><span class="token punctuation">,</span> <span class="token string">&quot;setosa&quot;</span><span class="token punctuation">,</span> size<span class="token operator">=</span><span class="token number">16</span><span class="token punctuation">,</span> color<span class="token operator">=</span>red<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><pre><code>C:\\ProgramData\\Anaconda3\\lib\\site-packages\\scipy\\stats\\stats.py:1713: FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use \`arr[tuple(seq)]\` instead of \`arr[seq]\`. In the future this will be interpreted as an array index, \`arr[np.array(seq)]\`, which will result either in an error or a different result.
  return np.add.reduce(sorted[indexer] * weights, axis=axis) / sumval
</code></pre><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/Python-Study-Notes/Seaborn-Study/11 绘图实例(3) Drawing example(3)/output_7_1.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><h2 id="_4-multiple-linear-regression-lmplot" tabindex="-1"><a class="header-anchor" href="#_4-multiple-linear-regression-lmplot" aria-hidden="true">#</a> 4. Multiple linear regression(lmplot)</h2><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># Load the iris dataset 读取数据</span>
iris <span class="token operator">=</span> sns<span class="token punctuation">.</span>load_dataset<span class="token punctuation">(</span><span class="token string">&quot;iris&quot;</span><span class="token punctuation">)</span>

<span class="token comment"># Plot sepal with as a function of sepal_length across days</span>
<span class="token comment"># 画散点图，lmplot默认参数，以hue设定不同种类</span>
<span class="token comment"># truncate为true表示现植回归拟合曲线绘图时只画出有数据的部分</span>
g <span class="token operator">=</span> sns<span class="token punctuation">.</span>lmplot<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token string">&quot;sepal_length&quot;</span><span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token string">&quot;sepal_width&quot;</span><span class="token punctuation">,</span> hue<span class="token operator">=</span><span class="token string">&quot;species&quot;</span><span class="token punctuation">,</span>
               truncate<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> height<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">,</span> data<span class="token operator">=</span>iris<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># Use more informative axis labels than are provided by default</span>
<span class="token comment"># 设置横竖坐标轴label</span>
g<span class="token punctuation">.</span>set_axis_labels<span class="token punctuation">(</span><span class="token string">&quot;Sepal length (mm)&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Sepal width (mm)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/Python-Study-Notes/Seaborn-Study/11 绘图实例(3) Drawing example(3)/output_9_0.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><h2 id="_5-paired-density-and-scatterplot-matrix-pairgrid" tabindex="-1"><a class="header-anchor" href="#_5-paired-density-and-scatterplot-matrix-pairgrid" aria-hidden="true">#</a> 5. Paired density and scatterplot matrix(PairGrid)</h2><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>sns<span class="token punctuation">.</span><span class="token builtin">set</span><span class="token punctuation">(</span>style<span class="token operator">=</span><span class="token string">&quot;white&quot;</span><span class="token punctuation">)</span>

df <span class="token operator">=</span> sns<span class="token punctuation">.</span>load_dataset<span class="token punctuation">(</span><span class="token string">&quot;iris&quot;</span><span class="token punctuation">)</span>
<span class="token comment"># 制作散点图矩阵</span>
<span class="token comment"># diag_sharey是否共享y轴</span>
g <span class="token operator">=</span> sns<span class="token punctuation">.</span>PairGrid<span class="token punctuation">(</span>df<span class="token punctuation">,</span> diag_sharey<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
<span class="token comment"># 下三角绘多变量核密度图</span>
g<span class="token punctuation">.</span>map_lower<span class="token punctuation">(</span>sns<span class="token punctuation">.</span>kdeplot<span class="token punctuation">)</span>
<span class="token comment"># 上三角绘散点图</span>
g<span class="token punctuation">.</span>map_upper<span class="token punctuation">(</span>sns<span class="token punctuation">.</span>scatterplot<span class="token punctuation">)</span>
<span class="token comment"># 对角线绘单变量核密度图，lw表示线条粗细</span>
g<span class="token punctuation">.</span>map_diag<span class="token punctuation">(</span>sns<span class="token punctuation">.</span>kdeplot<span class="token punctuation">,</span> lw<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/Python-Study-Notes/Seaborn-Study/11 绘图实例(3) Drawing example(3)/output_11_0.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><h2 id="_6-paired-categorical-plots-pairgrid" tabindex="-1"><a class="header-anchor" href="#_6-paired-categorical-plots-pairgrid" aria-hidden="true">#</a> 6. Paired categorical plots(PairGrid)</h2><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>sns<span class="token punctuation">.</span><span class="token builtin">set</span><span class="token punctuation">(</span>style<span class="token operator">=</span><span class="token string">&quot;whitegrid&quot;</span><span class="token punctuation">)</span>

<span class="token comment"># Load the example Titanic dataset</span>
titanic <span class="token operator">=</span> sns<span class="token punctuation">.</span>load_dataset<span class="token punctuation">(</span><span class="token string">&quot;titanic&quot;</span><span class="token punctuation">)</span>

<span class="token comment"># Set up a grid to plot survival probability against several variables</span>
<span class="token comment"># 制作散点图矩阵</span>
<span class="token comment"># y轴为survived值，x_vars设定x轴</span>
g <span class="token operator">=</span> sns<span class="token punctuation">.</span>PairGrid<span class="token punctuation">(</span>titanic<span class="token punctuation">,</span> y_vars<span class="token operator">=</span><span class="token string">&quot;survived&quot;</span><span class="token punctuation">,</span>
                 x_vars<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">&quot;class&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;sex&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;who&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;alone&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                 height<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">,</span> aspect<span class="token operator">=</span><span class="token number">.5</span><span class="token punctuation">)</span>
<span class="token comment"># Draw a seaborn pointplot onto each Axes</span>
<span class="token comment"># 制作折线图, errwidth表示上下标准注的长度，其中各点代表平均值</span>
g<span class="token punctuation">.</span><span class="token builtin">map</span><span class="token punctuation">(</span>sns<span class="token punctuation">.</span>pointplot<span class="token punctuation">,</span> scale<span class="token operator">=</span><span class="token number">1.3</span><span class="token punctuation">,</span> errwidth<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">&quot;xkcd:plum&quot;</span><span class="token punctuation">)</span>
g<span class="token punctuation">.</span><span class="token builtin">set</span><span class="token punctuation">(</span>ylim<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
sns<span class="token punctuation">.</span>despine<span class="token punctuation">(</span>fig<span class="token operator">=</span>g<span class="token punctuation">.</span>fig<span class="token punctuation">,</span> left<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/Python-Study-Notes/Seaborn-Study/11 绘图实例(3) Drawing example(3)/output_13_0.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><h2 id="_7-dot-plot-with-several-variables-pairgrid" tabindex="-1"><a class="header-anchor" href="#_7-dot-plot-with-several-variables-pairgrid" aria-hidden="true">#</a> 7. Dot plot with several variables(PairGrid)</h2><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>sns<span class="token punctuation">.</span><span class="token builtin">set</span><span class="token punctuation">(</span>style<span class="token operator">=</span><span class="token string">&quot;whitegrid&quot;</span><span class="token punctuation">)</span>

<span class="token comment"># Load the dataset</span>
crashes <span class="token operator">=</span> sns<span class="token punctuation">.</span>load_dataset<span class="token punctuation">(</span><span class="token string">&quot;car_crashes&quot;</span><span class="token punctuation">)</span>

<span class="token comment"># Make the PairGrid</span>
<span class="token comment"># 按crash排序的值绘图，x_vars，y_vars表示x轴或者y轴</span>
g <span class="token operator">=</span> sns<span class="token punctuation">.</span>PairGrid<span class="token punctuation">(</span>crashes<span class="token punctuation">.</span>sort_values<span class="token punctuation">(</span><span class="token string">&quot;total&quot;</span><span class="token punctuation">,</span> ascending<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                 x_vars<span class="token operator">=</span>crashes<span class="token punctuation">.</span>columns<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> y_vars<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">&quot;abbrev&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                 height<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">,</span> aspect<span class="token operator">=</span><span class="token number">.25</span><span class="token punctuation">)</span>
<span class="token comment"># Draw a dot plot using the stripplot function</span>
g<span class="token punctuation">.</span><span class="token builtin">map</span><span class="token punctuation">(</span>sns<span class="token punctuation">.</span>stripplot<span class="token punctuation">,</span> size<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">,</span> orient<span class="token operator">=</span><span class="token string">&quot;h&quot;</span><span class="token punctuation">,</span>
      palette<span class="token operator">=</span><span class="token string">&quot;ch:s=1,r=-.1,h=1_r&quot;</span><span class="token punctuation">,</span> linewidth<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> edgecolor<span class="token operator">=</span><span class="token string">&quot;w&quot;</span><span class="token punctuation">)</span>
<span class="token comment"># Use the same x axis limits on all columns and add better labels</span>
<span class="token comment"># 设置x轴，x标签</span>
g<span class="token punctuation">.</span><span class="token builtin">set</span><span class="token punctuation">(</span>xlim<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">,</span> xlabel<span class="token operator">=</span><span class="token string">&quot;Crashes&quot;</span><span class="token punctuation">,</span> ylabel<span class="token operator">=</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span>

<span class="token comment"># Use semantically meaningful titles for the columns</span>
titles <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;Total crashes&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Speeding crashes&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Alcohol crashes&quot;</span><span class="token punctuation">,</span>
          <span class="token string">&quot;Not distracted crashes&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;No previous crashes&quot;</span><span class="token punctuation">]</span>

<span class="token comment">#去除轴线</span>
<span class="token keyword">for</span> ax<span class="token punctuation">,</span> title <span class="token keyword">in</span> <span class="token builtin">zip</span><span class="token punctuation">(</span>g<span class="token punctuation">.</span>axes<span class="token punctuation">.</span>flat<span class="token punctuation">,</span> titles<span class="token punctuation">)</span><span class="token punctuation">:</span>

    <span class="token comment"># Set a different title for each axes</span>
    ax<span class="token punctuation">.</span><span class="token builtin">set</span><span class="token punctuation">(</span>title<span class="token operator">=</span>title<span class="token punctuation">)</span>

    <span class="token comment"># Make the grid horizontal instead of vertical</span>
    ax<span class="token punctuation">.</span>xaxis<span class="token punctuation">.</span>grid<span class="token punctuation">(</span><span class="token boolean">False</span><span class="token punctuation">)</span>
    ax<span class="token punctuation">.</span>yaxis<span class="token punctuation">.</span>grid<span class="token punctuation">(</span><span class="token boolean">True</span><span class="token punctuation">)</span>

sns<span class="token punctuation">.</span>despine<span class="token punctuation">(</span>left<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> bottom<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/Python-Study-Notes/Seaborn-Study/11 绘图实例(3) Drawing example(3)/output_15_0.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><h2 id="_8-plotting-a-three-way-anova-catplot" tabindex="-1"><a class="header-anchor" href="#_8-plotting-a-three-way-anova-catplot" aria-hidden="true">#</a> 8. Plotting a three-way ANOVA(catplot)</h2><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># Load the example exercise dataset</span>
df <span class="token operator">=</span> sns<span class="token punctuation">.</span>load_dataset<span class="token punctuation">(</span><span class="token string">&quot;exercise&quot;</span><span class="token punctuation">)</span>

<span class="token comment"># Draw a pointplot to show pulse as a function of three categorical factors</span>
<span class="token comment"># 分类型数据作坐标轴画图catplot,</span>
<span class="token comment"># col表示用什么变量对图像在横坐标方向分列</span>
<span class="token comment"># hue表示在单个维度上用某个变量区分;</span>
<span class="token comment"># capsize表示延伸线的长度</span>
g <span class="token operator">=</span> sns<span class="token punctuation">.</span>catplot<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token string">&quot;time&quot;</span><span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token string">&quot;pulse&quot;</span><span class="token punctuation">,</span> hue<span class="token operator">=</span><span class="token string">&quot;kind&quot;</span><span class="token punctuation">,</span> col<span class="token operator">=</span><span class="token string">&quot;diet&quot;</span><span class="token punctuation">,</span>
                capsize<span class="token operator">=</span><span class="token number">0.2</span><span class="token punctuation">,</span> palette<span class="token operator">=</span><span class="token string">&quot;YlGnBu_d&quot;</span><span class="token punctuation">,</span> height<span class="token operator">=</span><span class="token number">6</span><span class="token punctuation">,</span> aspect<span class="token operator">=</span><span class="token number">.75</span><span class="token punctuation">,</span>
                kind<span class="token operator">=</span><span class="token string">&quot;point&quot;</span><span class="token punctuation">,</span> data<span class="token operator">=</span>df<span class="token punctuation">)</span>
g<span class="token punctuation">.</span>despine<span class="token punctuation">(</span>left<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/Python-Study-Notes/Seaborn-Study/11 绘图实例(3) Drawing example(3)/output_17_0.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><h2 id="_9-linear-regression-with-marginal-distributions-jointplot" tabindex="-1"><a class="header-anchor" href="#_9-linear-regression-with-marginal-distributions-jointplot" aria-hidden="true">#</a> 9. Linear regression with marginal distributions(jointplot)</h2><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>sns<span class="token punctuation">.</span><span class="token builtin">set</span><span class="token punctuation">(</span>style<span class="token operator">=</span><span class="token string">&quot;darkgrid&quot;</span><span class="token punctuation">)</span>

tips <span class="token operator">=</span> sns<span class="token punctuation">.</span>load_dataset<span class="token punctuation">(</span><span class="token string">&quot;tips&quot;</span><span class="token punctuation">)</span>
<span class="token comment"># 设置联合图像，类型是&quot;reg&quot;回归图</span>
g <span class="token operator">=</span> sns<span class="token punctuation">.</span>jointplot<span class="token punctuation">(</span><span class="token string">&quot;total_bill&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;tip&quot;</span><span class="token punctuation">,</span> data<span class="token operator">=</span>tips<span class="token punctuation">,</span> kind<span class="token operator">=</span><span class="token string">&quot;reg&quot;</span><span class="token punctuation">,</span>
                  xlim<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">)</span><span class="token punctuation">,</span> ylim<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">&quot;m&quot;</span><span class="token punctuation">,</span> height<span class="token operator">=</span><span class="token number">7</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/Python-Study-Notes/Seaborn-Study/11 绘图实例(3) Drawing example(3)/output_19_0.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure><h2 id="_10-plotting-model-residuals-residplot" tabindex="-1"><a class="header-anchor" href="#_10-plotting-model-residuals-residplot" aria-hidden="true">#</a> 10. Plotting model residuals(residplot)</h2><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>sns<span class="token punctuation">.</span><span class="token builtin">set</span><span class="token punctuation">(</span>style<span class="token operator">=</span><span class="token string">&quot;whitegrid&quot;</span><span class="token punctuation">)</span>

<span class="token comment"># Make an example dataset with y ~ x</span>
rs <span class="token operator">=</span> np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>RandomState<span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span>
x <span class="token operator">=</span> rs<span class="token punctuation">.</span>normal<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">75</span><span class="token punctuation">)</span>
y <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">1.5</span> <span class="token operator">*</span> x <span class="token operator">+</span> rs<span class="token punctuation">.</span>normal<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">75</span><span class="token punctuation">)</span>

<span class="token comment"># Plot the residuals after fitting a linear model 残差图</span>
<span class="token comment"># 中间曲线为残差曲线((对比一阶拟合直线的残差)),lowess曲线平滑</span>
sns<span class="token punctuation">.</span>residplot<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> lowess<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">&quot;g&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/Python-Study-Notes/Seaborn-Study/11 绘图实例(3) Drawing example(3)/output_21_0.png" alt="png" tabindex="0" loading="lazy"><figcaption>png</figcaption></figure>`,34);function d(m,v){const a=p("ExternalLinkIcon");return e(),o("div",null,[u,n("p",null,[n("a",r,[s("(代码下载)"),i(a)]),s(" 本文主要讲述seaborn官网相关函数绘图实例。具体内容有：")]),k])}const h=t(l,[["render",d],["__file","2019-06-06-_seaborn_ seaborn学习笔记11 绘图实例(3) Drawing example(3).html.vue"]]);export{h as default};
